[{"content":"","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/categories/","section":"Categories","summary":"","title":"Categories"},{"content":"\r","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/","section":"Index","summary":"","title":"Index"},{"content":"","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/","section":"Posts","summary":"","title":"Posts"},{"content":"","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/series/","section":"Series","summary":"","title":"Series"},{"content":"","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/series/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80/","section":"Series","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€"},{"content":"\räºŒç»´å‡ ä½•å˜æ¢ # å‘é‡çŸ©é˜µ # åŸºæœ¬å‡ ä½•å˜æ¢éƒ½æ˜¯ç›¸å¯¹äºåæ ‡åŸç‚¹å’Œåæ ‡è½´è¿›è¡Œçš„å‡ ä½•å˜æ¢ã€‚\nåœ¨è®¡ç®—æœºä¸­ï¼Œè‹¥è¦å¯¹æ•´ä¸ªå›¾å½¢è¿›è¡Œå‡ ä½•å˜æ¢ï¼Œåªéœ€è¦å°†è¯¥å›¾å½¢çš„æ‰€æœ‰é¡¶ç‚¹è¿›è¡Œç›¸åŒçš„å‡ ä½•å˜æ¢å³å¯ã€‚\nä¸€èˆ¬ä½¿ç”¨ä¸€ä¸ªå‘é‡çŸ©é˜µæ¥å­˜å‚¨å›¾å½¢çš„ä¸€ä¸ªé¡¶ç‚¹ï¼Œå¦‚ï¼š \\( P = \\begin{bmatrix} x \\\\ y \\end{bmatrix} \\)\né€šè¿‡å¯¹å›¾å½¢æ¯ä¸ªé¡¶ç‚¹çš„å‘é‡çŸ©é˜µè¿›è¡Œå„ç§è®¡ç®—ï¼Œå³å¯å¯¹è¯¥å›¾å½¢è¿›è¡Œå‡ ä½•å˜æ¢\nå¹³ç§»å˜æ¢ # å¯¹ä¸€ä¸ªå›¾å½¢è¿›è¡Œå¹³ç§»ï¼Œåªéœ€å¯¹å…¶é¡¶ç‚¹çš„å‘é‡çŸ©é˜µåŠ ä¸Šå„ä¸ªè½´çš„åç§»é‡å³å¯ï¼š 2Då¹³ç§»å˜æ¢\r$$ P\u0026rsquo; = P + T \\\\ P = \\begin{bmatrix} x \\\\ y \\end{bmatrix} \\ \\ \\ T = \\begin{bmatrix} t_x \\\\ t_y \\end{bmatrix} \\\\ P\u0026rsquo; = \\begin{bmatrix} x+t_x \\\\ y+t_x \\end{bmatrix}= \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\end{bmatrix} $$\næ—‹è½¬å˜æ¢ # ç»•åæ ‡åŸç‚¹çš„æ—‹è½¬å˜æ¢ è®¾æ—‹è½¬è§’åº¦ä¸º Î¸ æ—‹è½¬å˜æ¢\r$$ P\u0026rsquo; = RP \\\\ R = \\begin{bmatrix} cos Î¸ \u0026amp; -sin Î¸\\\\ sin Î¸ \u0026amp; cos Î¸ \\end{bmatrix} \\ \\ \\ P = \\begin{bmatrix} x \\\\ y \\end{bmatrix} \\\\ P\u0026rsquo; = \\begin{bmatrix} cos Î¸ \u0026amp; -sin Î¸\\\\ sin Î¸ \u0026amp; cos Î¸ \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix}= \\begin{bmatrix} xcosÎ¸-ysinÎ¸ \\\\ xsinÎ¸+ycosÎ¸ \\end{bmatrix} $$\nå¦‚æœæŸä¸ªé¡¶ç‚¹ \\(P_0(X_0,0_Y)\\) è¦ç»•æŸä¸ªç‰¹å®šç‚¹ \\(P_r(X_r,Y_r)\\) æ—‹è½¬Î¸åº¦ï¼Œåªéœ€è¦å°†è¯¥ç‚¹è®¾ä¸ºåŸç‚¹ï¼Œæ¥ç€è®¡ç®— \\(P_0\\) ç‚¹å¯¹ \\(P_r\\) ç‚¹çš„ç›¸å¯¹åæ ‡ \\(P_t(X_t,Y_t)\\) ï¼Œä½¿ç”¨ \\(P_t\\) ç‚¹è¿›è¡Œç»•åæ ‡åŸç‚¹çš„æ—‹è½¬å˜æ¢å¾—å‡ºç›®æ ‡ç‚¹ \\(P_1(X_1,Y_1)\\)ï¼Œç„¶åä»¥è¯¥ \\(P_1\\) ç‚¹ä½œä¸ºåç§»é‡å¯¹ \\(P_0\\) ç‚¹è¿›è¡Œå¹³ç§»å˜æ¢å³å¯ã€‚\nç¼©æ”¾å˜æ¢ # ä»¥åæ ‡åŸç‚¹ä¸ºåŸºå‡†ç‚¹çš„ç¼©æ”¾å˜æ¢ è®¾ç¼©æ”¾ç‡ä¸º \\(S_x, S_y\\) ç¼©æ”¾å˜æ¢\r$$ P\u0026rsquo; = SP \\\\ P = \\begin{bmatrix} x \\\\ y \\end{bmatrix} \\ \\ \\ S = \\begin{bmatrix} S_x \u0026amp; 0 \\\\ 0 \u0026amp; S_y \\end{bmatrix} \\\\ P\u0026rsquo; = \\begin{bmatrix} S_x \u0026amp; 0 \\\\ 0 \u0026amp; S_y \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix} \\begin{bmatrix} S_x \\centerdot x \\\\ S_y \\centerdot y \\end{bmatrix} $$\næ³¨æ„ï¼š\nè¿™æ ·çš„ç¼©æ”¾å˜æ¢ä»¥åæ ‡åŸç‚¹ä¸ºæ”¾ç¼©å‚ç…§ç‚¹\nå®ƒä¸ä»…æ”¹å˜äº†ç‰©ä½“çš„å¤§å°å’Œå½¢çŠ¶ï¼Œä¹Ÿæ”¹å˜äº†å®ƒç¦»åŸç‚¹çš„è·ç¦»\nå¯¹ç§°å˜æ¢ # å…³äºXè½´çš„å¯¹ç§°å˜æ¢ # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\end{bmatrix}= \\begin{bmatrix} 1 \u0026amp; 0 \\\\ 0 \u0026amp; -1 \\end{bmatrix}= \\begin{bmatrix} x \\\\ -y \\end{bmatrix} $$\nå…³äºYè½´çš„å¯¹ç§°å˜æ¢ # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\end{bmatrix}= \\begin{bmatrix} -1 \u0026amp; 0 \\\\ 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix}= \\begin{bmatrix} x \\\\ -y \\end{bmatrix} $$\nå…³äºå¯¹è§’çº¿y=xå¯¹ç§°å˜æ¢ # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\end{bmatrix}= \\begin{bmatrix} 0 \u0026amp; 1 \\\\ 1 \u0026amp; 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix}= \\begin{bmatrix} x \\\\ -y \\end{bmatrix} $$\nå…³äºå¯¹è§’çº¿y=-xå¯¹ç§°å˜æ¢ # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\end{bmatrix}= \\begin{bmatrix} 0 \u0026amp; -1 \\\\ -1 \u0026amp; 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix}= \\begin{bmatrix} x \\\\ -y \\end{bmatrix} $$\nå…³äºåŸç‚¹å¯¹ç§° # å³å…ˆå¯¹å¯¹è§’çº¿y=xå¯¹ç§°ï¼Œå†å¯¹å¯¹è§’çº¿y=-xå¯¹ç§° $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\end{bmatrix}= \\begin{bmatrix} 0 \u0026amp; 1 \\\\ 1 \u0026amp; 0 \\end{bmatrix} \\begin{bmatrix} 0 \u0026amp; -1 \\\\ -1 \u0026amp; 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix}= \\begin{bmatrix} -1 \u0026amp; 0 \\\\ 0 \u0026amp; -1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix}= \\begin{bmatrix} x \\\\ -y \\end{bmatrix} $$\né½æ¬¡åæ ‡ # æ ¹æ®ä¸Šé¢çš„äºŒç»´å‡ ä½•å˜æ¢ï¼Œå¯ä»¥å¾—å‡ºï¼Œæ¯ä¸ªåŸºæœ¬å˜æ¢ï¼ˆå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰ï¼‰éƒ½å¯ä»¥è¡¨ç¤ºä¸ºä¸‹åˆ—å½¢å¼ï¼š $$ P\u0026rsquo; = M_1P+M_2 $$ å…¶ä¸­P\u0026rsquo;å’ŒPè¡¨ç¤ºä¸ºåæ ‡çš„å‘é‡çŸ©é˜µï¼Œ\\(M_1\\) æ˜¯ä¸€ä¸ªåŒ…å«ä¹˜æ³•ç³»æ•°çš„ 2*2 çš„çŸ©é˜µï¼Œ \\(M_2\\) æ˜¯åŒ…å«åŠ æ³•ç³»æ•°çš„ 2*1 çš„çŸ©é˜µã€‚\nå¯¹äºå¹³ç§»å˜æ¢ï¼Œ \\(M_1\\) æ˜¯ä¸€ä¸ªå•ä½çŸ©é˜µï¼Œåªéœ€è¦å¯¹ \\(M_2\\) è¿›è¡ŒåŠ æ³•è¿ç®—å³å¯ã€‚ å¯¹äºæ—‹è½¬ï¼Œç¼©æ”¾æˆ–æ˜¯å¯¹ç§°å˜æ¢ï¼Œå¯¹ \\(M_1\\) è¿›è¡Œä¹˜æ³•è¿ç®—ã€‚ å¦‚æœè¦å¯¹å›¾å½¢è¿›è¡Œå¤åˆå˜æ¢ï¼Œå¿…é¡»ä¸€æ­¥ä¸€æ­¥åœ°è®¡ç®—å›¾å½¢é¡¶ç‚¹çš„å‘é‡çŸ©é˜µçš„æ¯ä¸€æ¬¡å˜æ¢ã€‚å¹¶ä¸”ä¸ºäº†é˜²æ­¢å›¾å½¢äº§ç”Ÿç•¸å˜ï¼Œè¿˜è¦éµå®ˆ\râ€œå…ˆç¼©æ”¾ï¼Œå†æ—‹è½¬ï¼Œåå¹³ç§»â€çš„åŸåˆ™ã€‚\nå› æ­¤ï¼Œæ›´æœ‰æ•ˆçš„æ–¹æ³•æ˜¯å°†ä¸åŒç±»å‹çš„å˜æ¢ç»„åˆï¼Œä»è€Œç›´æ¥ä»åˆå§‹åæ ‡å¾—åˆ°æœ€åçš„åæ ‡ä½ç½®ï¼Œæ¶ˆé™¤ä¸­é—´åæ ‡å€¼çš„è®¡ç®—ï¼Œå› æ­¤å¼•å…¥äº†é½æ¬¡åæ ‡ã€‚\né½æ¬¡åæ ‡å°±æ˜¯ç”± n+1 ç»´å‘é‡è¡¨ç¤ºä¸€ä¸ª n ç»´å‘é‡ã€‚å¦‚æœæ˜¯2ç»´å‡ ä½•å˜æ¢ï¼Œé‚£å°±æ˜¯ç”¨ä¸€ä¸ª 3*3 çš„çŸ©é˜µæ¥è¡¨ç¤ºåŸæœ¬ 2*2 çš„çŸ©é˜µã€‚ç„¶åå°†æ‰€æœ‰çš„å˜æ¢å…¬å¼è¡¨è¾¾ä¸ºçŸ©é˜µä¹˜æ³•ã€‚\nå°†ä¸€ä¸ªé¡¶ç‚¹çš„å‘é‡çŸ©é˜µè½¬æ¢ä¸ºé½æ¬¡çŸ©é˜µï¼š $$ P = \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$ å…¶ä¸­ç¬¬ä¸‰ä¸ªå€¼ 1 ç§°ä¸ºå“‘åæ ‡ï¼Œå†³å®šäº†åæ ‡çš„ç¼©æ”¾æ¯”ï¼Œä¸€ä¸ªç‚¹çš„é½æ¬¡åæ ‡æ˜¯ä¸å”¯ä¸€çš„ï¼Œä¾‹å¦‚ï¼Œæ™®é€šåæ ‡ç³»ä¸‹çš„ç‚¹ (2,3) å˜æ¢ä¸ºé½æ¬¡åæ ‡å¯ä»¥æ˜¯ (2,3,1)ã€(1,1.5,0.5)ã€(4,6,2) ç­‰ã€‚å¦‚æœåæ ‡æ˜¯æ— ç©·å¤§ï¼Œå“‘åæ ‡å¯ä»¥è¡¨ç¤ºä¸º0ã€‚\nç„¶åï¼Œåˆ©ç”¨é½æ¬¡åæ ‡ï¼Œå¯ä»¥å¾—åˆ°äºŒç»´å›¾å½¢å˜æ¢çŸ©é˜µçš„é€šå¼ï¼š é½æ¬¡åæ ‡\rç”±ä¸Šå›¾æ‰€ç¤ºï¼Œå°†æ¯”ä¾‹ã€åå°„ã€æ—‹è½¬å’Œé”™åˆ‡å˜æ¢æ•´åˆåˆ° a,b,c,d å››ä¸ªå€¼ä¸­ï¼Œå°†å¹³ç§»å˜æ¢æ•´åˆåˆ° m,n ä¸­ï¼Œå°†æŠ•å½±å˜æ¢è½¬æ¢åˆ° p,q ä¸­ï¼Œå°†ç¼©æ”¾å˜æ¢è½¬æ¢åˆ°å“‘åæ ‡ s ä¸­ã€‚\nå¦‚æœè¦å¯¹ä¸€ä¸ªé¡¶ç‚¹è¿›è¡Œå‡ ä½•å˜æ¢ï¼Œå°†è¯¥é€šå¼ T ä¸é¡¶ç‚¹çš„é½æ¬¡åæ ‡ç›¸ä¹˜å³å¯ï¼š $$ \\begin{split} P\u0026rsquo; \u0026amp;= TP \\\\ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ H \\end{bmatrix}\u0026amp;= \\begin{bmatrix} a \u0026amp; c \u0026amp; m \\\\ b \u0026amp; d \u0026amp; n \\\\ p \u0026amp; q \u0026amp; s \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\end{split} $$\nä½¿ç”¨é½æ¬¡åæ ‡çš„äºŒç»´å‡ ä½•å˜æ¢ # å¹³ç§»å˜æ¢ # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} 1 \u0026amp; 0 \u0026amp; t_x \\\\ 0 \u0026amp; 1 \u0026amp; t_y \\\\ 0 \u0026amp; 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$\næ—‹è½¬å˜æ¢ # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} cosÎ¸ \u0026amp; -sinÎ¸ \u0026amp; 0 \\\\ sinÎ¸ \u0026amp; cosÎ¸ \u0026amp; 0 \\\\ 0 \u0026amp; 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$\nç¼©æ”¾å˜æ¢ # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} 1 \u0026amp; 0 \u0026amp; 0 \\\\ 0 \u0026amp; 1 \u0026amp; 0 \\\\ 0 \u0026amp; 0 \u0026amp; s \\end{bmatrix} \\begin{bmatrix} x/s \\\\ y/s \\\\ 1 \\end{bmatrix} $$\nå¯¹ç§°å˜æ¢ # å…³äºxè½´å¯¹ç§° # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} 1 \u0026amp; 0 \u0026amp; 0 \\\\ 0 \u0026amp; -1 \u0026amp; 0 \\\\ 0 \u0026amp; 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$\nå…³äºyè½´å¯¹ç§° # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} -1 \u0026amp; 0 \u0026amp; 0 \\\\ 0 \u0026amp; 1 \u0026amp; 0 \\\\ 0 \u0026amp; 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$\nå…³äºå¯¹è§’çº¿y=xçš„å¯¹ç§° # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} 0 \u0026amp; 1 \u0026amp; 0 \\\\ 1 \u0026amp; 0 \u0026amp; 0 \\\\ 0 \u0026amp; 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$\nå…³äºå¯¹è§’çº¿y=-xçš„å¯¹ç§° # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} 0 \u0026amp; -1 \u0026amp; 0 \\\\ -1 \u0026amp; 0 \u0026amp; 0 \\\\ 0 \u0026amp; 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$\nå…³äºåŸç‚¹çš„å¯¹ç§° # $$ \\begin{bmatrix} x\u0026rsquo; \\\\ y\u0026rsquo; \\\\ 1 \\end{bmatrix}= \\begin{bmatrix} -1 \u0026amp; 0 \u0026amp; 0 \\\\ 0 \u0026amp; -1 \u0026amp; 0 \\\\ 0 \u0026amp; 0 \u0026amp; 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} $$\n","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E5%9B%9B%E7%AB%A0/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬å››ç« "},{"content":"","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6/","section":"Tags","summary":"","title":"è®¡ç®—æœºå›¾å½¢å­¦"},{"content":"","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/categories/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","section":"Categories","summary":"","title":"æœŸæœ«å¤ä¹ "},{"content":"\rç›´çº¿è£å‰ª # ä½¿ç”¨ä¸€ä¸ªçŸ©å½¢çª—å£ï¼Œå¯¹ç›´çº¿è¿›è¡Œè£å‰ªï¼Œä¿ç•™çŸ©å½¢æ¡†å†…çš„ç›´çº¿æ®µï¼Œç§»é™¤çŸ©å½¢æ¡†å¤–çš„ã€‚\nCohen-Sutherlandè£å‰ªç®—æ³• # è¯¥ç®—æ³•çš„ä¸»è¦æ€æƒ³ä¸ºï¼šå¯¹äºæ¯æ¡çº¿æ®µï¼Œåˆ†ä¸º3ç§æƒ…å†µå¤„ç†ï¼š\nçº¿æ®µå®Œå…¨åœ¨çª—å£å†…ï¼Œåˆ™ä¸è¿›è¡Œè£å‰ªï¼Œç§°ä¸ºâ€œå–â€ çº¿æ®µå®Œå…¨åœ¨çª—å£å¤–ï¼Œåˆ™ä¸¢å¼ƒæ•´æ¡çº¿æ®µï¼Œç§°ä¸ºâ€œå¼ƒâ€ å¦‚æœçº¿æ®µéƒ¨åˆ†åœ¨çª—å£å†…è€Œéƒ¨åˆ†åœ¨çª—å£å¤–ï¼Œåˆ™å°†çº¿æ®µåˆ†å‰²ï¼Œçª—å£å¤–çš„å¼ƒï¼Œçª—å£å†…çš„å– Cohen-Sutherlandä½¿ç”¨ç¼–ç ç©ºé—´åˆ’åˆ†çš„æ–¹æ³•å¿«é€Ÿç¡®å®šç›´çº¿ä¸çŸ©å½¢çª—å£çš„ä½ç½®å…³ç³»ï¼Œé¿å…äº†é¢‘ç¹åœ°å¯¹ç›´çº¿å’ŒçŸ©å½¢æ¡†å–äº¤ç‚¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°†çŸ©å½¢çª—å£å¤–çš„å…«ä¸ªæ–¹å‘ä»¥åŠçª—å£å†…å…±9ä¸ªåŒºåŸŸä½¿ç”¨ä¸€ä¸²åŒºåŸŸç¼–ç æ¥è¡¨ç¤ºï¼š\nåŒºåŸŸç¼–ç \renum Code { INSIDE = 0, LEFT = 1, RIGHT = 2, BOTTOM = 4, TOP = 8, }; Code Encode(Vector2f\u0026amp; point, Rect\u0026amp; rect) { int c = INSIDE; if (point.x \u0026lt; rect.x_left) c = c | LEFT; else if (point.y \u0026gt; rect.x_right) c = c | RIGHT; if (point.y \u0026lt; rect.y_bottom) c = c | BOTTOM; else if (point.y \u0026gt; rect.y_top) c = c | TOP; return static_cast\u0026lt;Code\u0026gt;(c); } åŒºåŸŸç¼–ç ç¤ºä¾‹\rå¯¹ä¸€æ¡ç›´çº¿çš„ä¸¤ä¸ªç«¯ç‚¹è¿›è¡ŒåŒºåŸŸç¼–ç ï¼Œåˆ¤æ–­ç›´çº¿ä¸çŸ©å½¢çª—å£çš„ä½ç½®å…³ç³»ï¼š\nå¦‚æœä¸¤ä¸ªç«¯ç‚¹çš„ç¼–ç å‡ä¸º 0000ï¼Œåˆ™ä»£è¡¨æ•´æ¡çº¿æ®µéƒ½åœ¨çŸ©å½¢æ¡†å†…ï¼Œå–ä¹‹ã€‚ï¼ˆæ¯”å¦‚å›¾ä¸­çš„ç›´çº¿ABï¼‰ å¦‚æœä¸¤ä¸ªç«¯ç‚¹çš„ç¼–ç çš„é€»è¾‘ä¸ä¸ä¸º0000ï¼Œåˆ™è¿™æ¡çº¿æ®µå®Œå…¨åœ¨çŸ©å½¢æ¡†å¤–ï¼Œå¼ƒä¹‹ã€‚ï¼ˆæ¯”å¦‚å›¾ä¸­çš„ç›´çº¿CDï¼š0101 \u0026amp; 0100 = 0100ï¼‰ ç„¶è€Œä¸Šä¸€æ­¥å¹¶ä¸èƒ½å»é™¤æ‰€æœ‰çš„å®Œå…¨åœ¨çŸ©å½¢æ¡†å¤–çš„ç›´çº¿ï¼ˆæ¯”å¦‚å›¾ä¸­çš„KLï¼‰ï¼Œæ­¤æ—¶éœ€è¦å¯¹å‰©ä½™çš„ç›´çº¿è¿›è¡Œå¯è§æ€§åˆ¤å®šï¼š æ±‚å‡ºç›´çº¿ä¸çŸ©å½¢æ¡†çš„æ‰€æœ‰äº¤ç‚¹ å¦‚æœæ²¡æœ‰äº¤ç‚¹ï¼Œè¯´æ˜ç›´çº¿å®Œå…¨åœ¨çŸ©å½¢æ¡†å¤–ï¼Œå¼ƒä¹‹ï¼ˆå¦‚å›¾ä¸­çš„KLï¼‰ åˆ¤æ–­äº¤ç‚¹ä¸ªæ•°ï¼š å¦‚æœæœ‰ä¸€ä¸ªäº¤ç‚¹ï¼Œè¯´æ˜ç›´çº¿ä¸€ç«¯åœ¨çŸ©å½¢æ¡†å¤–ï¼Œå¦ä¸€ç«¯åœ¨çŸ©å½¢æ¡†å†…ï¼ˆå¦‚å›¾ä¸­çš„EFï¼‰ï¼Œæ­¤æ—¶ï¼Œå–äº¤ç‚¹ä»¥åŠç›´çº¿ä½äºçŸ©å½¢æ¡†å†…çš„ç«¯ç‚¹æˆæ–°çš„ç›´çº¿ å¦‚æœæœ‰ä¸¤ä¸ªäº¤ç‚¹ï¼Œè¯´æ˜ç›´çº¿ä¸¤ç«¯éƒ½åœ¨çŸ©å½¢æ¡†å¤–ï¼Œçº¿æ®µè´¯ç©¿çŸ©å½¢æ¡†ï¼ˆå¦‚å›¾ä¸­çš„GHï¼‰ï¼Œæ­¤æ—¶ï¼Œå–ä¸¤ä¸ªäº¤ç‚¹ä¸ºæ–°çš„ç›´çº¿ Line Cohen_Sutherland(const Line\u0026amp; line, Rect\u0026amp; rect) { auto code1 = Encode(*line.begin, rect); auto code2 = Encode(*line.end, rect); auto result = line; //çº¿æ®µåœ¨åˆ‡å‰²èŒƒå›´å¤–ï¼Œè¿”å›ç©º if ((code1 \u0026amp; code2) != INSIDE) return {nullptr, nullptr}; //è‹¥ä¸¤ç‚¹å‡åœ¨åˆ‡å‰²èŒƒå›´å†…ï¼Œåˆ™è¿”å›æ•´æ¡çº¿æ®µ while (code1 != INSIDE || code2 != INSIDE) { //ç«¯ç‚¹åœ¨åˆ‡å‰²èŒƒå›´å¤– if ((code1 \u0026amp; code2) != INSIDE) break; //é€‰å–éèŒƒå›´å†…ç«¯ç‚¹ auto code = code1 == INSIDE ? code2 : code1; auto p = new Vector2f(); //çº¿æ®µä¸å·¦è¾¹ç¼˜ç›¸äº¤ if ((code \u0026amp; LEFT) != INSIDE) { p-\u0026gt;x = rect.x_left; p-\u0026gt;y = line.begin-\u0026gt;y + (line.end-\u0026gt;y - line.begin-\u0026gt;y) * (rect.x_left - line.begin-\u0026gt;x) / (line.end-\u0026gt;x - line. begin-\u0026gt;x); //æ±‚äº¤ç‚¹ } //å³è¾¹ç¼˜ç›¸äº¤ else if ((code \u0026amp; RIGHT) != INSIDE) { p-\u0026gt;x = rect.x_right; p-\u0026gt;y = line.begin-\u0026gt;y + (line.end-\u0026gt;y - line.begin-\u0026gt;y) * (rect.x_right - line.begin-\u0026gt;x) / (line.end-\u0026gt;x - line. begin-\u0026gt;x); } //ä¸‹è¾¹ç¼˜ç›¸äº¤ else if ((code \u0026amp; BOTTOM) != 0) { p-\u0026gt;y = rect.y_bottom; p-\u0026gt;x = line.begin-\u0026gt;x + (line.end-\u0026gt;x - line.begin-\u0026gt;x) * (rect.y_bottom - line.begin-\u0026gt;y) / (line.end-\u0026gt;y - line .begin-\u0026gt;y); } //ä¸Šè¾¹ç¼˜ç›¸äº¤ else { p-\u0026gt;y = rect.y_top; p-\u0026gt;x = line.begin-\u0026gt;x + (line.end-\u0026gt;x - line.begin-\u0026gt;x) * (rect.y_top - line.begin-\u0026gt;y) / (line.end-\u0026gt;y - line. begin-\u0026gt;y); } //é€‰å–çš„ä¸ºbegin if (code == code1) { result.begin = p; //é‡æ–°è®¡ç®—ç«¯ç‚¹ç¼–ç  code1 = Encode(*p, rect); } else { result.end = p; code2 = Encode(*p, rect); } } return result; } Liang-Barskyç®—æ³• # TODO # ","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E4%B8%89%E7%AB%A0--5.-%E5%9B%BE%E5%83%8F%E8%A3%81%E5%89%AA/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬ä¸‰ç«  -- 5. å›¾åƒè£å‰ª"},{"content":"åèµ°æ ·å³æŠ—é”¯é½¿ï¼Œæ¶ˆé™¤å€¾æ–œç›´çº¿å…‰æ …åŒ–åçš„é”¯é½¿çŠ¶æ•ˆæœã€‚\nå¸¸ç”¨çš„åèµ°æ ·æŠ€æœ¯æœ‰ä¸‰ç§ï¼š\næé«˜åˆ†è¾¨ç‡ ç®€å•åŒºåŸŸé‡‡æ · ç”²é†›åŒºåŸŸé‡‡æ · ç®€å•åŒºåŸŸé‡‡æ · # ç®€å•åŒºåŸŸé‡‡æ ·\ræ¯ä¸ªåƒç´ æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€å®šé¢ç§¯çš„å°åŒºåŸŸï¼Œå°†ç›´çº¿æ®µçœ‹ä½œå…·æœ‰ä¸€å®šå®½åº¦çš„ç‹­é•¿çŸ©å½¢\nå½“çŸ©å½¢ï¼ˆç›´çº¿æ®µï¼‰ä¸åƒç´ ç›¸äº¤æ—¶ï¼Œæ±‚å‡ºä¸¤è€…ç›¸äº¤åŒºåŸŸçš„é¢ç§¯ï¼Œç„¶åæ ¹æ®ç›¸äº¤åŒºåŸŸé¢ç§¯æˆ–è·ç¦»çš„å¤§å°ç¡®å®šè¯¥åƒç´ çš„äº®åº¦å€¼\nè®¡ç®—äº®åº¦å€¼\ræ¯ä¸ªåƒç´ é¢ç§¯ä¸ºå•ä½é¢ç§¯,å³ä¸º1\nç›¸äº¤åŒºåŸŸé¢ç§¯æ˜¯ä»‹äº0ã€1ä¹‹é—´çš„å®æ•°\nç”¨å®ƒä¹˜ä»¥åƒç´ çš„äº®åº¦å€¼ï¼Œå³å¯å¾—åˆ°è¯¥åƒç´ å®é™…æ˜¾ç¤ºçš„äº®åº¦å€¼\nå¦‚æœèƒŒæ™¯å’Œçº¿æ¡éƒ½æ˜¯RGBæœ‰è‰²å›¾è€Œéç°åº¦å›¾ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹æ¯ä¸ªé¢œè‰²åˆ†é‡ä½¿ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—å…¶å€¼ï¼Œ\nå…¶ä¸­targetColorä¸ºç›®æ ‡é¢œè‰²åˆ†é‡å€¼ï¼ŒforegroundColorä¸ºç›´çº¿é¢œè‰²ï¼ŒbackgroundColorä¸ºèƒŒæ™¯é¢œè‰²ï¼Œfä¸ºç›´çº¿ï¼ˆçŸ©å½¢æ¡†ï¼‰ä¸è¯¥åƒç´ ç›¸äº¤çš„é¢ç§¯\n$$ targetColor = foregroundColor \\times f + (1-f) \\times backgroundColor $$\n","date":"2023å¹´6æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E4%B8%89%E7%AB%A0--4.-%E5%8F%8D%E8%B5%B0%E6%A0%B7/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬ä¸‰ç«  -- 4. åèµ°æ ·"},{"content":"\rå¤šè¾¹å½¢å¡«å……ç®—æ³• # å¤šè¾¹å½¢æ‰«æè½¬æ¢ç®—æ³• # æ¦‚è¿° # æ‰«æçº¿ç®—æ³•æ˜¯ç¡®å®šæ°´å¹³æ‰«æçº¿ä¸å¤šè¾¹å½¢çš„ç›¸äº¤åŒºé—´ï¼ŒæŠŠè¯¥åŒºé—´å†…çš„æ‰€æœ‰åƒç´ ä¸€æ¬¡æ€§èµ‹ä»¥æ–°çš„é¢œè‰²å€¼ã€‚\nç®—æ³•åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š\næ±‚äº¤ï¼šè®¡ç®—æ‰«æçº¿ä¸å¤šè¾¹å½¢æ‰€æœ‰è¾¹çš„äº¤ç‚¹ æ’åºï¼šæŒ‰xè½´æ’åºæ‰€æœ‰äº¤ç‚¹ äº¤ç‚¹é…å¯¹ï¼šæ¯å¯¹äº¤ç‚¹ä»£è¡¨æ‰«æçº¿ä¸å¤šè¾¹å½¢çš„ä¸€ä¸ªç›¸äº¤åŒºåŸŸ åŒºé—´å¡«è‰²ï¼šæ ¹æ®ç›¸äº¤åŒºåŸŸå¡«è‰² ä»¥Xè½´ä¸ºæ‰«æçº¿è½´ä½¿ç”¨å¤šè¾¹å½¢æ‰«æè½¬æ¢ç®—æ³•çš„æ­¥éª¤ï¼š\nXæ‰«æçº¿å¡«å……ç®—æ³•\ræ±‚è§’ï¼šæ‰«æçº¿ y=6 ä¸å¤šè¾¹å½¢çš„è¾¹ç•Œäº¤äº A,B,C,D ç‚¹ï¼Œå¾—åˆ°äº¤ç‚¹ä¸º (2,6),(4,6),(8,6),(11,6) æ’åºï¼šæŒ‰ç…§äº¤ç‚¹çš„xå€¼æ’åºï¼Œ2-\u0026gt;4-\u0026gt;8-\u0026gt;11 é…å¯¹ï¼šæ¯ä¸¤ä¸ªäº¤ç‚¹è¡¨ç¤ºäº†å¤šè¾¹å½¢çš„ä¸€å—åŒºåŸŸï¼Œæ­¤æ—¶æœ‰ä¸¤å—åŒºåŸŸï¼Œ[(2,6),(4,6)]å’Œ[(8,6),(11,6)] æŠŠæ¯ä¸ªåŒºåŸŸä¸­çš„åƒç´ å¡«å…… æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ï¼Œåœ¨Yè½´ä¸Šéå†æ‰«æçº¿ï¼Œç›´åˆ°æ•´ä¸ªå›¾å½¢è¢«å¡«å……\nå…·ä½“ç®—æ³•å®ç°æ­¥éª¤ # æ„é€ è¾¹è¡¨ï¼ˆETï¼‰\næ„é€ ä¸€ä¸ªåˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨ç§°ä¸ºè¾¹è¡¨ï¼Œé•¿åº¦ä¸ºè¯¥å¤šè¾¹å½¢çš„æ‰«æçº¿çš„æ•°é‡ï¼ˆå³å¤šè¾¹å½¢åœ¨yè½´ä¸Šçš„è·¨åº¦ï¼‰ï¼Œè¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œä»£è¡¨ç€æ¯ä¸€æ¡æ‰«æçº¿ï¼ˆæ–¹ç¨‹\\(y=n\\ï¼Œnä¸ºæ‰«æçº¿æ‰€åœ¨yè½´ä¸Šçš„ä½ç½®)ï¼Œæ¯æ¡æ‰«æçº¿ç§°ä¸ºæ¡¶ å°†å¤šè¾¹å½¢ä¸­æ¯æ¡è¾¹çš„ä¿¡æ¯é“¾å…¥ä¸è¯¥è¾¹æœ€å°yåæ ‡(\\(y_{low}\\))ç›¸å¯¹åº”çš„æ¡¶ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè‹¥æŸè¾¹çš„è¾ƒä½ç«¯ç‚¹ä¸º(x,\\(y_{low}\\))ï¼Œåˆ™è¯¥è¾¹å°±æ”¾åœ¨ \\(y=y_{low}\\) è¿™æ¡æ‰«æçº¿å¯¹åº”çš„æ¡¶ä¸­ æ¯æ¡è¾¹çš„æ•°æ®ä¸ºé“¾è¡¨çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†…å®¹åŒ…å«ä¸‰ä¸ªå€¼ï¼š è¯¥è¾¹å’Œå¯¹åº”æ‰«æçš„åˆå§‹äº¤ç‚¹ï¼ˆå³è¾ƒä½ç«¯ç‚¹ï¼‰çš„xå€¼ \\(x_{low}\\) è¯¥è¾¹æœ€å¤§yåæ ‡ï¼ˆå³è¾ƒé«˜ç«¯ç‚¹ï¼‰çš„yå€¼ \\(y_{high}\\) è¯¥è¾¹çš„æ–œç‡çš„å€’æ•° \\(\\frac{1}{k}\\) åŒä¸€ä¸ªæ¡¶ä¸­çš„èŠ‚ç‚¹æŒ‰ç…§ \\(x_{low}\\) ä»å°åˆ°å¤§æ’åºï¼Œå¦‚æœ \\(x_{low}\\) ç›¸ç­‰ï¼Œåˆ™æŒ‰ç…§ \\(\\frac 1 k\\)æ¥æ’åº ä¸‹é¢çš„ä¾‹å­æ„é€ äº†ä¸€ä¸ªè¾¹è¡¨ï¼š\nå¤šè¾¹å½¢ç¤ºä¾‹\rè¾¹ \\(y_{low}\\) \\(x_{low}\\) \\(y_{high}\\) \\(\\frac 1 k\\) p0p1 8 7 12 -1 p1p2 7 1 12 2/5 p2p3 1 3 7 -1/3 p3p4 1 3 5 3/4 p4p5 1 8 5 -1/2 p5p6 1 8 9 1/2 p6p0 8 7 9 5 æœ€ç»ˆæ„é€ çš„è¾¹è¡¨\ræ„é€ æ´»åŠ¨è¾¹è¡¨ï¼ˆAETï¼‰ æ ¹æ®æ„é€ çš„è¾¹è¡¨ï¼ˆETï¼‰ï¼Œè¿›è¡Œæ‰«æè½¬æ¢ã€‚å¯¹äºä¸åŒçš„æ‰«æçº¿ï¼Œä¸å…¶ç›¸äº¤çš„è¾¹çº¿ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå½“å¯¹æŸä¸€æ¡æ‰«æçº¿è¿›è¡Œæ‰«æè½¬æ¢æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘ä¸å®ƒç›¸äº¤çš„é‚£äº›è¾¹çº¿\nå› æ­¤ï¼Œéœ€è¦å»ºç«‹ä¸€ä¸ªåªä¸å½“å‰æ‰«æçº¿ç›¸äº¤çš„è¾¹è®°å½•é“¾è¡¨ï¼Œç§°ä¹‹ä¸ºæ´»åŠ¨è¾¹è¡¨ï¼ˆAETï¼‰\næ„é€ ä¸€ä¸ªé“¾è¡¨ï¼Œä½œä¸ºæ´»åŠ¨è¾¹è¡¨ æŒ‰ç…§yè½´éå†æ¯æ¡æ‰«æçº¿ï¼Œå–å‡ºè¯¥æ‰«æçº¿åœ¨è¾¹è¡¨ä¸­å¯¹åº”çš„æ¡¶ï¼Œæ”¾å…¥æ´»åŠ¨è¾¹è¡¨ï¼ŒåŒæ—¶åœ¨è¾¹è¡¨ä¸­åˆ é™¤è¯¥æ¡¶ï¼Œç„¶åå°†æ´»åŠ¨è¾¹è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹æŒ‰ç…§ \\(x_{low}\\) æ’åº å¦‚æœæ¡¶ä¸­èŠ‚ç‚¹çš„ \\(y_{max}\\) å€¼å°äºæˆ–ç­‰äºå½“å‰æ‰«æçº¿çš„yå€¼ï¼Œé‚£ä¹ˆç§»é™¤è¯¥èŠ‚ç‚¹ åœ¨å½“å‰æ´»åŠ¨è¾¹è¡¨ä¸­ï¼Œå–ä¸¤ä¸¤èŠ‚ç‚¹çš„ \\(x_{low}\\) å€¼ï¼Œä½œä¸ºè¯¥æ‰«æçº¿çš„å¡«å……åŒºåŸŸå¹¶å¡«å……å¤šè¾¹å½¢ å°†æ¡¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ \\(x_{min}\\) å€¼åŠ ä¸Šå…¶ \\(\\frac 1 k\\)çš„å€¼ é‡å¤2-5ï¼Œéå†ä¸‹ä¸€æ¡æ‰«æçº¿ï¼Œç›´åˆ°è¾¹è¡¨å’Œæ´»åŠ¨è¾¹è¡¨éƒ½ä¸ºç©º å¯¹ä¸Šè¿°çš„å¤šè¾¹å½¢æ„é€ æ´»åŠ¨è¾¹è¡¨å¹¶å¡«å……ï¼š\nä» y=1 å¼€å§‹éå†æ‰«æçº¿ï¼Œå°†è¾¹è¡¨ä¸­ä¸‹æ ‡ä¸º1çš„æ¡¶åŠ å…¥æ´»åŠ¨è¾¹è¡¨å¹¶æ’åºï¼Œå–ä¸¤ä¸¤èŠ‚ç‚¹è¿›è¡Œå¡«å……ï¼Œæœ€ç»ˆå¡«å……èŒƒå›´æ˜¯3-3å’Œ8-8ï¼š\ræ´»åŠ¨è¾¹è¡¨y=1\rå°†æ´»åŠ¨è¾¹è¡¨ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„\\(x_{low}\\)åŠ ä¸Š\\(\\frac 1 k\\)çš„å€¼ã€‚ç„¶ååˆ‡æ¢åˆ°ä¸‹ä¸€æ¡æ‰«æçº¿ y=2ï¼Œè¾¹è¡¨ä¸­å¯¹åº”çš„æ¡¶ä¸ºç©ºï¼Œå¯¹AETæ’åºå¹¶ç»§ç»­å¡«å……ï¼Œæ­¤æ—¶å¡«å……èŒƒå›´ä¸º 3-4å’Œ8-9ï¼ˆå¦‚æœ\\(x_{low}\\)æœ‰å°æ•°åˆ™å››èˆäº”å…¥ï¼‰ï¼š\ræ´»åŠ¨è¾¹è¡¨y=2\rä¸ä¸Šä¸€æ­¥æ“ä½œç›¸åŒï¼Œæ­¤æ—¶æ‰«æçº¿ y=3 çš„å¡«å……èŒƒå›´ä¸º 2-5å’Œ7-9ï¼š\ræ´»åŠ¨è¾¹è¡¨y=3\ry=4ï¼Œå¡«å……èŒƒå›´ä¸º 2-5å’Œ7-10ï¼š\ræ´»åŠ¨è¾¹è¡¨y=4\ry=5ï¼Œæ­¤æ—¶è¦AETä¸­çš„è¾¹ p2p4å’Œp4p5 çš„ \\(y_{max}\\) å€¼ç­‰äºæ‰«æçº¿çš„ y å€¼ï¼Œå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹ç§»é™¤ã€‚ç„¶åæ’åºï¼Œç»§ç»­å¡«å……ï¼ŒèŒƒå›´ä¸º 2-10ï¼š\ræ´»åŠ¨è¾¹è¡¨y=5\ry=6ï¼Œå¡«å……èŒƒå›´ 1-11ï¼š\ræ´»åŠ¨è¾¹è¡¨y=6\ry=7ï¼ŒAETä¸­çš„ p2p3 èŠ‚ç‚¹çš„ \\(y_{max}\\) ç­‰äº7ï¼Œå°†å…¶ç§»é™¤ï¼ŒåŠ å…¥ETä¸­çš„ p2p1 èŠ‚ç‚¹ç„¶åæ’åºï¼Œè®¡ç®—å¡«å……èŒƒå›´ 1-11ï¼š\ræ´»åŠ¨è¾¹è¡¨y=7\ry=8ï¼ŒåŠ å…¥ETä¸­çš„ p0p1å’Œp0p6 èŠ‚ç‚¹ï¼Œæ’åºï¼Œç„¶åè®¡ç®—å¡«å……èŒƒå›´ä¸ºï¼š1-7å’Œ7-12ï¼š\ræ´»åŠ¨è¾¹è¡¨y=8\ry=9ï¼Œç§»é™¤AETä¸­çš„ p0p6å’Œp5p6 èŠ‚ç‚¹ï¼Œæ’åºï¼Œç„¶åè®¡ç®—å¡«å……èŒƒå›´ï¼š2-6ï¼š\ræ´»åŠ¨è¾¹è¡¨y=9\rä¸æ–­å¡«å……ï¼Œæœ€ååœ¨ æ‰«æçº¿ y=12æ—¶ï¼ŒAETå’ŒETä¸­çš„èŠ‚ç‚¹å…¨éƒ¨è¢«ç§»é™¤ï¼Œå¡«å……å®Œæ¯•ï¼š\ræ´»åŠ¨è¾¹è¡¨y=10-12\rå¡«å……å®Œæ¯•\rç§å­å¡«å……ç®—æ³• # åœ¨å¡«å……å›¾åƒåŒºåŸŸçš„å†…éƒ¨æ‰¾åˆ°ä¸€ä¸ªåƒç´ ï¼ˆç§å­ç‚¹ï¼‰çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡é‚»è¿‘æœç´¢å‘å¤–æ‰©æ•£å¼å¡«å……ã€‚\nç§å­å¡«å……ç®—æ³•åˆ†ä¸º4è¿é€šå’Œ8è¿é€šæ–¹å¼ï¼Œå³è¿›è¡Œé‚»è¿‘æœç´¢æ—¶æœç´¢ \u0026ldquo;ä¸Šä¸‹å·¦å³\u0026quot;å››ä¸ªåƒç´ ï¼ˆå››è”é€šï¼‰æˆ–æ˜¯\u0026quot;ä¸Šä¸‹å·¦å³å·¦ä¸Šå³ä¸Šå·¦ä¸‹å³ä¸‹\u0026quot;å…«ä¸ªåƒç´ ï¼Œå…«è”é€šç®—æ³•ç›¸å¯¹äºå››è¿é€šè·¨è¶Šæ€§æ›´å¼ºï¼ˆå› ä¸ºå¯ä»¥æ‰«æå¯¹è§’æ–¹å‘ï¼‰ã€‚\nç§å­å¡«å……ç®—æ³•\råŸºäºå †æ ˆè€Œéé€’å½’çš„4è¿é€šç§å­å¡«å……ç®—æ³•å®ç°æ­¥éª¤ï¼š\nåˆå§‹åŒ–æ ˆï¼Œå¹¶å°†ç§å­ç‚¹å…¥æ ˆ å°†æ ˆé¡¶ç‚¹å‡ºæ ˆ å¡«å……è¯¥ç‚¹ æ£€æŸ¥ä¸Šã€ä¸‹ã€å·¦ã€å³æ–¹çš„å››ä¸ªåƒç´ ï¼Œå¦‚æœåƒç´ ä¸æ˜¯è¾¹ç•Œç‚¹ï¼Œä¸”å…¶é¢œè‰²æœªè¢«å¡«å……ä¸ºç›®æ ‡é¢œè‰²ï¼Œåˆ™å°†å…¶å…¥æ ˆ å¾ªç¯æ‰§è¡Œå‰ä¸‰æ­¥ï¼Œç›´åˆ°æ ˆç©º void FloodFill4(Vector2 startPoint, const GLubyte newColor[3], const GLubyte boundaryColor[3]) { stack\u0026lt;Vector2\u0026gt; _stack = stack\u0026lt;Vector2\u0026gt;(); _stack.push(startPoint); while (!_stack.empty()) { auto point = _stack.top(); _stack.pop(); cout \u0026lt;\u0026lt; \u0026#34;Position:\u0026#34; \u0026lt;\u0026lt; point.x \u0026lt;\u0026lt; \u0026#39; \u0026#39; \u0026lt;\u0026lt; point.y \u0026lt;\u0026lt; endl; GLubyte color[3]; glReadPixels(point.x, point.y, 1, 1,GL_RGB,GL_UNSIGNED_BYTE, color); //è¯»å–åƒç´ é¢œè‰² if (color[0] == boundaryColor[0] \u0026amp;\u0026amp; color[1] == boundaryColor[1] \u0026amp;\u0026amp; color[2] == boundaryColor[2] || color[0] == newColor[0] \u0026amp;\u0026amp; color[1] == newColor[1] \u0026amp;\u0026amp; color[2] == newColor[2]) //è‹¥ä¸å¡«å……é¢œè‰²/è¾¹ç•Œé¢œè‰²ç›¸ç­‰åˆ™åœæ­¢ { continue; } //ç»˜åˆ¶ DrawDot(point, newColor); //è¿é€š _stack.push(Vector2(point.x - 1, point.y)); _stack.push(Vector2(point.x, point.y + 1)); _stack.push(Vector2(point.x + 1, point.y)); _stack.push(Vector2(point.x, point.y - 1)); } } åŸºäºæ‰«æçº¿çš„ç§å­å¡«å……ç®—æ³• # æ‰¾åˆ°ä¸€ä¸ªå›¾å½¢å†…çš„åƒç´ ç‚¹ï¼ˆç§å­ç‚¹ï¼‰ï¼Œé€šè¿‡Xè½´æ‰«æçº¿å¯¹å›¾åƒè¿›è¡Œå¡«å……\nå®ç°æ­¥éª¤ä¸ºï¼š\nåˆå§‹åŒ–æ ˆå¹¶å°†ç§å­ç‚¹å…¥æ ˆ æ ˆé¡¶ç‚¹å‡ºæ ˆï¼Œä»¥è¯¥ç‚¹çš„æ°´å¹³çº¿ä½œä¸ºå½“å‰çš„æ‰«æçº¿ ä»è¯¥ç‚¹å‡ºå‘ï¼Œæ²¿ç€å½“å‰æ‰«æçº¿å·¦å³ä¸¤æ–¹å‘å¡«å……ï¼Œç›´åˆ°å¡«å……åˆ°è¾¹ç•Œã€‚æœ€å·¦ç«¯çš„å¡«å……åƒç´ å’Œæœ€å³ç«¯çš„åˆ†åˆ«è®°ä¸º \\(X_l\\)å’Œ \\(X_r\\) åœ¨åŒºé—´[\\(X_l,X_r\\)]èŒƒå›´å†…ï¼Œæœç´¢æ¯ä¸ªåƒç´ ç‚¹çš„ä¸Šæ–¹åƒç´ ï¼ˆä¸€èˆ¬æ˜¯ä»å·¦åˆ°å³ï¼‰æ˜¯å¦æœªå¡«å……ä¸”ä¸æ˜¯è¾¹ç•Œã€‚å¦‚æœå‘ç°ï¼Œåˆ™å°†ä¸Šæ–¹æ¯ä¸ªæœªå¡«å……åƒç´ åŒºé—´ï¼ˆå¯èƒ½æœ‰å¤šä¸ªéè¿é€šçš„æœªå¡«å……åŒºé—´ï¼‰çš„æœ€å·¦è¾¹çš„ï¼ˆæˆ–æ˜¯æœ€å³ï¼Œä¾é¢˜æ„ï¼‰åƒç´ å…¥æ ˆ å’Œç¬¬4æ­¥ä¸€è‡´ï¼Œåªä¸è¿‡æœç´¢çš„æ˜¯ä¸‹æ–¹çš„åƒç´ ç‚¹ é‡å¤2-5ï¼Œç›´åˆ°æ ˆç©ºï¼ˆä¾é¢˜æ„ï¼Œç¬¬4æ­¥å’Œç¬¬5æ­¥çš„é¡ºåºå¯èƒ½è°ƒæ¢ï¼‰ åƒç´ å…¥æ ˆé¡ºåº - æ¯æ¡æ‰«æçº¿ä»å·¦åˆ°å³æ‰«æï¼Œå…ˆæœç´¢ä¸Šæ–¹åƒç´ ï¼Œå†æœç´¢ä¸‹æ–¹ï¼Œæ¯æ¬¡é€‰æ‹©æœªå¡«å……åŒºé—´çš„æœ€å³åƒç´ ç‚¹\r","date":"2023å¹´6æœˆ16æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E4%B8%89%E7%AB%A0--3.-%E5%8C%BA%E5%9F%9F%E5%A1%AB%E5%85%85/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬ä¸‰ç«  -- 3. åŒºåŸŸå¡«å……"},{"content":"\rBresenhamç”»åœ†ç®—æ³• # Bresenhamç”»åœ†ç®—æ³•\rè®¾ä¸å½“å‰åœ†å‘¨æœ€è¿‘çš„åƒç´ ç‚¹æ˜¯ \\(P_{i-1}(x_i-1,y_i-1)\\)\nä¸‹ä¸€ä¸ªä¸åœ†å‘¨æœ€è¿‘çš„åƒç´ ç‚¹åªèƒ½æ˜¯æ­£å³æ–¹çš„ç‚¹ \\(H_i(xi_-1+1,y_i-1)\\) æˆ–è€…æ˜¯å³ä¸‹æ–¹çš„ç‚¹ \\(L_i(x_i-1+1,y_i-1-1)\\)\nåšåˆ¤åˆ«å¼ \\(d_i\\) çš„å¢é‡è®¡ç®—ï¼š\n\\(d_i\\) çš„åˆå€¼ä¸º $$ Î”é‡ç‚¹ \\ \\ d_0 = 3 - 2R $$\nè‹¥ \\(d_i\u0026lt;0\\) ï¼Œé€‰æ‹© \\(H_i\\) ç‚¹ä¸ºä¸‹ä¸€ä¸ªç»˜åˆ¶çš„åƒç´ ï¼ˆXè½´+1ï¼ŒYè½´ä¸å˜ï¼‰ï¼Œå¹¶é€’æ¨å‡º \\(d_{i+1}\\)ï¼š $$ Î”é‡ç‚¹ \\ \\ d_{i+1} = d_i+4x_i+6 $$\nè‹¥ \\(d_i\\geq0\\) ï¼Œé€‰æ‹© \\(L_i\\) ç‚¹ä¸ºä¸‹ä¸€ä¸ªç»˜åˆ¶çš„åƒç´ ï¼ˆXè½´+1ï¼ŒYè½´-1ï¼‰ï¼Œå¹¶é€’æ¨å‡º \\(d_{i+1}\\)ï¼š $$ Î”é‡ç‚¹ \\ \\ d_{i+1} = d_i+4(x_i-y_i)+10 $$\né€’æ¨å‡º1/8åœ†å¼§åï¼Œå³å¯åˆ©ç”¨åœ†çš„å¯¹ç§°æ€§è·å¾—æ•´ä¸ªåœ†çš„ç‚¹ã€‚\næ³¨æ„ï¼Œå½“ç»˜åˆ¶çš„åœ†åœ†å¿ƒä¸ä¸º(0,0)æ—¶ï¼Œå…ˆè®¾åœ†å¿ƒä¸º(0,0)ï¼Œç„¶åå°†è®¡ç®—å‡ºçš„ç»˜åˆ¶ç‚¹çš„åæ ‡åŠ ä¸ŠåŸæ¥çš„åœ†å¿ƒä½ç½®å³å¯ã€‚\nä¾‹ï¼š ä½¿ç”¨Bresenhamç®—æ³•ç”»åœ†å¿ƒ(0,0)ï¼ŒåŠå¾„R=5çš„åœ†ï¼Œå†™å‡º1/8åœ†å¼§çš„åˆ¤å®šè¿‡ç¨‹ï¼š\næ ¹æ®åœ†å¿ƒå’ŒåŠå¾„å¯çŸ¥ï¼Œç¬¬ä¸€ä¸ªç‚¹ä¸º \\((0,5)\\)\n\\(d_1 = 3 - 2R = -7\\)\nX Y \\(d_i\\) æ“ä½œ 0 5 -7 \\(d_i \u0026lt; 0\\)ï¼Œyä¸å˜ 1 5 -1 \\(d_i \u0026lt; 0\\)ï¼Œyä¸å˜ 2 5 9 \\(d_i \\geq 0\\)ï¼Œyå€¼-1 3 4 7 å®Œæˆ ä¸­ç‚¹ç”»åœ†ç®—æ³• # ä¸­ç‚¹ç”»åœ†ç®—æ³•ä¸Bresenhamç”»åœ†ç®—æ³•ç±»ä¼¼ï¼Œåˆ©ç”¨åœ†çš„å¯¹ç§°æ€§ï¼Œåªéœ€è¦è®¨è®º1/8åœ†å¼§ã€‚\nä¸­ç‚¹ç”»åœ†ç®—æ³•\rå‡è®¾Pä¸ºå½“å‰ç‚¹äº®è±¡ç´ ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªç‚¹äº®çš„è±¡ç´ å¯èƒ½æ˜¯ \\(T(x_p+1, y_p)\\) æˆ– \\(S(x_p+1, y_p - 1)\\)\nå¦‚æœå¿½ç•¥åœ†å¿ƒä½ç½®ï¼Œé‚£ä¹ˆæ ¹æ®åœ†çš„æ–¹ç¨‹ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ªå‡½æ•°\\(F(x,y)\\)ï¼š $$ F(x,y)=x^2+y^2-r^2 $$\nå°†é‡ç‚¹Mçš„ä»£å…¥å‡½æ•°Fï¼Œå¯æ¨æ–­å‡ºï¼š\nè‹¥F(M)\u0026lt;0ï¼ŒMåœ¨åœ†å†…ï¼Œæ­¤æ—¶ä¸‹ä¸€ä¸ªç‚¹å–Tï¼› è‹¥F(M)â‰¥0ï¼ŒMåœ¨åœ†ä¸Šæˆ–åœ†å¤–ï¼Œæ­¤æ—¶ä¸‹ä¸€ä¸ªç‚¹å–Sã€‚ é‚£ä¹ˆå¯ä»¥é€šè¿‡è®¡ç®—åˆ¤åˆ«å¼ \\(d_i=F(M)\\) æ¥å¯¹ä¸‹ä¸€ä¸ªç»˜åˆ¶åƒç´ è¿›è¡Œé€‰æ‹©\ndçš„åˆå€¼ä¸ºï¼š $$ \\begin{split} Î”é‡ç‚¹\\ \\ d_0\u0026amp;=F(0+1,r-0.5) \\\\ \u0026amp;=1+(r-0.5)^2-r^2 \\\\ \u0026amp;=1.25-r \\end{split} $$\nå¦‚æœ \\(d_i\u0026lt;0\\)ï¼Œåˆ™é€‰æ‹©Tä¸ºä¸‹ä¸€ä¸ªç»˜åˆ¶çš„åƒç´ ï¼ˆXè½´+1ï¼ŒYè½´ä¸å˜ï¼‰ï¼Œå¹¶é€’æ¨å‡º \\(d_{i+1}\\): $$ \\begin{split} Î”é‡ç‚¹\\ \\ ğ‘‘_{i+1}=ğ¹(ğ‘€)\u0026amp;=ğ¹(ğ‘¥_i+2,ğ‘¦_iâˆ’0.5) \\\\ \u0026amp;=(ğ‘¥_i+2)^2+(ğ‘¦_iâˆ’0.5)^2âˆ’ğ‘Ÿ^2 \\\\ \u0026amp;=d_i+2ğ‘¥_i+3 \\end{split} $$\nå¦‚æœ \\(d_i \\geq 0\\)ï¼Œåˆ™é€‰æ‹©Sä¸ºä¸‹ä¸€ä¸ªç»˜åˆ¶çš„åƒç´ ï¼ˆXè½´+1ï¼ŒYè½´-1ï¼‰ï¼Œå¹¶é€’æ¨å‡º \\(d_{i+1}\\): $$ \\begin{split} Î”é‡ç‚¹\\ \\ ğ‘‘_{i+1}\u0026amp;=ğ¹(ğ‘¥_i+2,ğ‘¦_iâˆ’1.5) \\\\ \u0026amp;=(ğ‘¥_i+2)^2+(ğ‘¦_iâˆ’1.5)^2âˆ’ğ‘Ÿ^2 \\\\ \u0026amp;=ğ‘‘_i+(2ğ‘¥_i+3)+(âˆ’2ğ‘¦_i+2)\\\\ \u0026amp;=ğ‘‘_i+(2ğ‘¥_iâˆ’2ğ‘¦_i+5) \\end{split} $$\né€’æ¨å‡º1/8åœ†å¼§åï¼Œå³å¯åˆ©ç”¨åœ†çš„å¯¹ç§°æ€§è·å¾—æ•´ä¸ªåœ†çš„ç‚¹ã€‚\næ³¨æ„ï¼Œå½“ç»˜åˆ¶çš„åœ†åœ†å¿ƒä¸ä¸º(0,0)æ—¶ï¼Œå…ˆè®¾åœ†å¿ƒä¸º(0,0)ï¼Œç„¶åå°†è®¡ç®—å‡ºçš„ç»˜åˆ¶ç‚¹çš„åæ ‡åŠ ä¸ŠåŸæ¥çš„åœ†å¿ƒä½ç½®å³å¯ã€‚\nä¾‹ï¼šä½¿ç”¨ä¸­ç‚¹ç”»åœ†ç®—æ³•ç”»åœ†å¿ƒ(1,2)ï¼ŒåŠå¾„R=5çš„åœ†ï¼š\nè®¾åœ†å¿ƒä¸º(0,0)\næ ¹æ®åœ†å¿ƒå’ŒåŠå¾„å¯çŸ¥ï¼Œç¬¬ä¸€ä¸ªç‚¹ä¸º \\((0,5)\\)\nX Y \\(d_i\\) æ“ä½œ 0 5 -4.25 \\(d_i \u0026lt; 0\\)ï¼Œyä¸å˜ 1 5 -1.25 \\(d_i \u0026lt; 0\\)ï¼Œyä¸å˜ 2 5 3.75 \\(d_i \\geq 0\\)ï¼Œyå€¼-1 3 4 4.75 å®Œæˆ ","date":"2023å¹´6æœˆ16æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E4%B8%89%E7%AB%A0--2.-%E5%9C%86%E7%94%9F%E6%88%90%E7%AE%97%E6%B3%95/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬ä¸‰ç«  -- 2. åœ†ç”Ÿæˆç®—æ³•"},{"content":"\ræ•°å€¼å¾®åˆ†æ³•(DDA) # DDAç®—æ³•æ˜¯æ ¹æ®ç›´çº¿çš„å¾®åˆ†æ–¹ç¨‹æ¥è®¡ç®—Î”xæˆ–Î”yç”Ÿæˆç›´çº¿çš„æ‰«æè½¬æ¢ç®—æ³•ã€‚åœ¨ä¸€ä¸ªåæ ‡è½´ä¸Šä»¥å•ä½é—´éš”å¯¹çº¿æ®µå–æ ·, ä»¥å†³å®šå¦ä¸€ä¸ªåæ ‡è½´æ–¹å‘ä¸Šæœ€é è¿‘ç†æƒ³çº¿æ®µçš„æ•´æ•°å€¼ã€‚\nè®¾\\((x_0, y_0)\\)ä¸ºç›´çº¿æ®µçš„å§‹ç‚¹, \\((x_n, y_n)\\)ä¸ºç›´çº¿æ®µçš„ç»ˆç‚¹ï¼Œä¸”ç«¯ç‚¹åæ ‡å‡ä¸ºæ•´æ•°, åˆ™ç›´çº¿çš„å¾®åˆ†æ–¹ç¨‹ä¸º\n$$ \\frac{dy}{dx} = \\frac{Î”y}{Î”x} = \\frac{y_n - y_0}{x_n - y_0} = kï¼Œ(kå³ä¸ºç›´çº¿çš„æ–œç‡) $$\nå½“ \\(|k| \\leq 1\\) æ—¶ï¼Œåº”å½“å–xæ–¹å‘ä¸ºæ­¥é•¿æ–¹å‘ï¼Œæ¯æ¬¡æ­¥è¿›ä¸€ä¸ªå•ä½ï¼Œåˆ™æœ‰ï¼š $$ x_{x+1} = x_i \\pm 1 $$\n$$ y_{y+1} = x_i \\pm k $$\nå½“ \\(|k| \u0026gt; 1\\) æ—¶ï¼Œåº”å½“å–yæ–¹å‘ä¸ºæ­¥é•¿æ–¹å‘ï¼Œåˆ™æœ‰ï¼š $$ x_{i+1} = x_i \\pm \\frac{1}{k} $$ $$ y_{i+1} = y_i \\pm 1 $$\næ€»ç»“ é¦–å…ˆæ±‚å‡ºç›´çº¿æ–œç‡k:\\(\\frac{Î”y}{Î”x}\\)ï¼Œæ ¹æ®kçš„å¤§å°å†³å®šç”»çº¿çš„æ­¥è¿›æ–¹å‘ï¼š\nå¦‚æœ \\(|k|\\leq1\\)ï¼Œåˆ™ç”»çº¿æ—¶ä»¥Xè½´ä¸ºæ­¥è¿›æ–¹å‘ï¼Œæ¯æ¬¡xæ­¥è¿›1ï¼Œyæ­¥è¿›k å¦‚æœ \\(|k| \u0026gt; 1\\)ï¼Œé‚£ä¹ˆç”»çº¿æ—¶ä»¥Yè½´ä¸ºæ­¥è¿›æ–¹å‘ï¼Œæ¯æ¬¡xæ­¥è¿›\\(\\frac{1}{k}\\)ï¼Œyæ­¥è¿›1 å…·ä½“æ­¥è¿›çš„æ–¹å‘ä¸ºæ­£åŠè½´è¿˜æ˜¯è´ŸåŠè½´è¦å–å†³äºç›´çº¿çš„æ–œç‡ï¼Œåœ¨åšé¢˜æ—¶åªéœ€è¦çŸ¥é“æœç€ç›®æ ‡ç‚¹\\((x_n,y_n)\\)æ­¥è¿›å°±è¡Œäº†ã€‚\nvoid LineDDA(int x1, int y1, int x2, int y2) { int dm=0; if (abs(x2-x1)\u0026gt;= abs(y2-y1)) //absæ˜¯æ±‚ç»å¯¹å€¼çš„å‡½æ•° dm=abs(x2-x1); //xä¸ºè®¡é•¿æ–¹å‘ else dm=abs(y2-y1); //yä¸ºè®¡é•¿æ–¹å‘ float dx=(float)(x2-x1)/dm; //å½“xä¸ºè®¡é•¿æ–¹å‘æ—¶ï¼Œdxçš„å€¼ä¸º1 float dy=(float)(y2-y1)/dm; //å½“yä¸ºè®¡é•¿æ–¹å‘æ—¶ï¼Œdyçš„å€¼ä¸º1 float x=x1; //å–æ•´æ“ä½œ float y=y1; //å–æ•´æ“ä½œ for (int i=0; i\u0026lt; dm; i++) { setpixel( (int)(x+0.5), (int)(y+0.5));//åœ¨å±å¹•ä¸Šç»˜åˆ¶è¯¥ç‚¹ x+=dx; y+=dy; } } Bresenhamç®—æ³• # åœ¨å°†ç›´çº¿å…‰æ …åŒ–æ—¶ï¼Œå‡è®¾ç›´çº¿çš„æ–œç‡ \\(k \\geq 0\\)ï¼Œèµ·ç‚¹ä¸º \\(P_0 (x_0,y_0)\\)ï¼Œç»ˆç‚¹ä¸º \\(P_n (x_n,y_n)\\)ã€‚\nä»èµ·ç‚¹\\(P_0\\)å¼€å§‹ï¼Œæ¯æ¬¡åœ¨æ°´å¹³æ–¹å‘ä¸Šæœç€ç»ˆç‚¹\\(P_n\\)ç§»åŠ¨ä¸€ä¸ªåƒç´ ï¼Œç”±äºå—åˆ°æ–œç‡ k çš„å½±å“ï¼Œç›´çº¿æ¯ä¸ªåƒç´ çš„ä¸‹ä¸€ä¸ªè¦ç»˜åˆ¶çš„åƒç´ ç‚¹è¦ä¹ˆæ˜¯å³è¾¹çš„ç‚¹Sï¼Œè¦ä¹ˆæ˜¯å³ä¸Šçš„ç‚¹Tï¼š\nå³æˆ–æ˜¯å³ä¸Š\rBresenhamç”»çº¿ç®—æ³•å³æ˜¯ä½¿ç”¨äº†è¿™ä¸ªåˆ¤åˆ«æ–¹å¼ï¼š\nç”±ä¸Šå›¾æ‰€ç¤ºï¼Œå¯çŸ¥Sçš„åæ ‡ä¸º\\((x_{i+1},y_i)\\)ï¼ŒTçš„åæ ‡ä¸º\\((x_{i+1},y_{i+1})\\)\nå¹¶ä¸”ç›´çº¿æ–¹ç¨‹å¯ä»¥è¡¨ç¤ºä¸º $$ y = kx+b $$\nå› æ­¤æœ‰ï¼š $$ \\begin{cases} s \u0026amp;= y-y_i=k(x_i+1)+b-y_i \\\\ t \u0026amp;= y_i+1-y=Y_i+1-k(x_i+1)-b \\end{cases} $$\nå¦‚æœ \\(t \\leq s\\)ï¼Œåˆ™ä»£è¡¨ç›´çº¿é ä¸Šæ–¹çš„ç‚¹è¿‘ä¸€ç‚¹ï¼Œåˆ™ä¸‹ä¸€ä¸ªç»˜åˆ¶çš„åƒç´ ç‚¹åº”å½“é€‰æ‹©å³ä¸Šæ–¹çš„ï¼Œ\nå¦‚æœ \\(t \u0026gt; s\\)ï¼Œåˆ™ä»£è¡¨ç›´çº¿é ä¸‹æ–¹çš„ç‚¹è¿‘ä¸€ç‚¹ï¼Œåˆ™ä¸‹ä¸€ä¸ªç»˜åˆ¶çš„åƒç´ ç‚¹åº”å½“é€‰æ‹©å³æ–¹çš„ã€‚\næ³¨æ„è¿™åªé€‚ç”¨äºç›´çº¿çš„æ–œç‡\\(k \\geq 0\\)çš„æƒ…å†µ\nç„¶åä»£å…¥ \\(k = \\frac{dy}{dx}\\)ï¼Œæœ‰\n$$ \\begin{split} dx(s-t)\u0026amp;=2dy(x_i+1)+2bdx-2y_idx-dx \\\\ \u0026amp;=2(x_idy-y_idx)+(2dy+2bdx-dx) \\end{split} $$\nå› ä¸º dx \u0026gt; 0ï¼Œæ‰€ä»¥å¯ä»¥ä»¥ dx(s-t) çš„æ­£è´Ÿä½œä¸ºé€‰æ‹©Sæˆ–Tçš„ä¾æ®ï¼Œæ‰€ä»¥è®¾ \\(d_i=dx(s-t)\\)\nå°†ä¸‹æ ‡åŠ ä¸€ï¼Œæœ‰\n$$ \\begin{split} d_{i+1} \u0026amp;= 2(x_{i+1}dy-y_{i+1}dx)+(2dy+2bdx-dx) \\\\ \u0026amp;= d_i+2dy(x_{i+1}-x_i)-2dx(y_{i+1}-y_i) \\end{split} $$\nå› ä¸ºåœ¨æ°´å¹³æ–¹å‘ä¸Šç§»åŠ¨ï¼Œæ‰€ä»¥ \\(x_{i+1}-x_i=1\\)ï¼Œä»£å…¥å¾— $$ d_{i+1}=d_i+2dy-2dx(y_{i+1}-y_i) $$ è¿™æ ·å°±è·å¾—äº†ä¸€ä¸ªé€’æ¨å…¬å¼ï¼Œä¸‹ä¸€ä¸ª\\(d_{i+1}\\)å¯ä»¥ç”±å‰ä¸€ä¸ª\\(d_i\\)é€’æ¨å¾—åˆ°\né€šè¿‡è®¡ç®—å½“å‰ç‚¹çš„$d_i$ï¼Œå¯ä»¥åˆ¤æ–­å‘ç»ˆç‚¹\\(P_n\\)ç§»åŠ¨æ—¶ï¼Œä¸‹ä¸€ä¸ªç»˜åˆ¶çš„åƒç´ ç‚¹åº”å½“é€‰æ‹©å³ä¸Šæ–¹è¿˜æ˜¯å³æ–¹çš„ã€‚\nå¦‚æœ \\(d_i \\geq 0\\) ï¼Œå³ \\(t \\leq s\\)ï¼Œä¸‹ä¸€ä¸ªç‚¹é€‰æ‹©å³ä¸Šæ–¹çš„ï¼Œé€‰æ‹©å³ä¸Šæ–¹çš„ç‚¹æ»¡è¶³äº† \\(y_{i+1}-y_i=1\\)ï¼Œæ‰€ä»¥å°† \\(d_i\\) æ”¹ä¸º $$ Î”é‡ç‚¹\\ \\ d_{i+1}=d_i+2(dy-dx) $$\nå¦‚æœ \\(d_i\u0026lt;0\\) ï¼Œå³ \\(s\u0026lt;t\\) ä¸‹ä¸€ä¸ªç‚¹åº”å½“é€‰æ‹©å³æ–¹çš„ï¼Œæ­¤æ—¶æ»¡è¶³äº† \\(y_{i+1}=y_i\\)ï¼Œåˆ™æœ‰ $$ Î”é‡ç‚¹\\ \\ d_{i+1}=d_i+2dy $$\nåœ¨å¼€å§‹ç»˜åˆ¶æ—¶ï¼Œéœ€è¦å…ˆçŸ¥é“ \\(d_i\\) çš„åˆå€¼ \\(d_0\\)ï¼Œå› ä¸ºåœ¨å¼€å§‹ç»˜åˆ¶æ—¶ï¼Œi=1ï¼Œ\\(b=y_1-kx_1\\)ï¼Œå¯ä»£å…¥ä¸Šæ–‡ \\(d_i\\)çš„å…¬å¼å¾—å‡ºï¼š $$ \\begin{split} Î”é‡ç‚¹\\ \\ d_0 \u0026amp;=dx(s-t) \\\\ \u0026amp;= 2(x_idy-y_idx) + (2dy + 2bdx-dx) \\\\ \u0026amp;= 2dy-dx \\end{split} $$ ä»èµ·ç‚¹ \\(P_0\\) å¼€å§‹å‘ç»ˆç‚¹ \\(P_n\\) ç§»åŠ¨ï¼Œæ¯æ¬¡åœ¨Xè½´ä¸Šæ­¥è¿›ä¸€ä¸ªåƒç´ ï¼Œå¹¶æ±‚å‡ºå½“å‰çš„ \\(d_i\\) ï¼Œå³å¯çŸ¥é“ä¸‹ä¸€ä¸ªç‚¹æ‰€åœ¨æ–¹ä½ï¼ˆå³æˆ–å³ä¸Šï¼‰ã€‚\næ³¨æ„ï¼Œä¸Šé¢è®¨è®ºçš„æ˜¯ç›´çº¿æ–œç‡ \\(0 \\leq k \\leq 1\\)çš„æƒ…å†µï¼Œå¯¹äºä¸€èˆ¬æƒ…å†µå¯åšå¦‚ä¸‹å¤„ç†ï¼š\nå½“ \\(|k|\u0026gt;1\\) æ—¶ï¼Œå°†xã€yå’Œdxã€dyå¯¹æ¢ï¼Œå³ä»¥Yè½´åšå¢é•¿æ–¹å‘ï¼Œyæ€»æ˜¯å¢é•¿1ï¼ˆæˆ–å‡å°‘1ï¼Œå–å†³äºdxï¼Œdyçš„ç¬¦å·ï¼‰\næ‰€ä»¥xçš„æ“ä½œå–å†³äº \\(d_i\\) çš„ç¬¦å·ï¼š \\(d_i \\geq 0\\) æ—¶ï¼Œxå¢åŠ 1ï¼ˆæˆ–å‡å°‘1ï¼‰ï¼› \\(d_i \u0026lt; 0\\) æ—¶ï¼Œxä¸å˜ã€‚ éœ€è¦æ ¹æ®dxå’Œdyçš„ç¬¦å·æ¥åˆ¤æ–­xæˆ–yæ¯æ¬¡æ­¥è¿›åº”å½“åŠ ä¸€è¿˜æ˜¯å‡ä¸€ï¼Œå¦‚æœ dx(æˆ–dy) \u0026lt; 0 ï¼Œé‚£ä¹ˆæ¯æ¬¡xè½´æ­¥è¿›ï¼ˆæˆ–yè½´æ­¥è¿›ï¼‰å°±åº”å½“å‡ä¸€ï¼Œåœ¨åšé¢˜æ—¶ï¼Œåªéœ€è¦çŸ¥é“æœç»ˆç‚¹æ–¹å‘æ­¥è¿›å°±è¡Œäº†ã€‚ æ€»ç»“\næ±‚å‡ºdyå’Œdxçš„å€¼ï¼Œå¹¶è®¡ç®—æ–œç‡k\nåˆ¤æ–­æ­¥è¿›æ–¹å‘ï¼š\n\\(|k|\\leq 1\\)æ—¶ï¼ŒXè½´ä¸ºæ­¥è¿›æ–¹å‘ \\(|k|\u0026gt;1\\)ï¼ŒYè½´ä¸ºæ­¥è¿›æ–¹å‘ å½“\\(dx \u0026gt; 0\\) æ—¶ï¼ŒæœXæ­£åŠè½´æ­¥è¿›ï¼Œåä¹‹åˆ™è´ŸåŠè½´ å½“\\(dy \u0026gt; 0\\) æ—¶ï¼ŒæœYæ­£åŠè½´æ­¥è¿›ï¼Œåä¹‹åˆ™è´ŸåŠè½´ è®¾å½“å‰ç›´çº¿æ–œç‡ \\(|k| \\leq 1\\)ï¼Œå¹¶ä¸” dx,dy å‡å¤§äº0ã€‚\nå¼€å§‹ç»˜åˆ¶ç›´çº¿ï¼Œä»åŸç‚¹å¼€å§‹ æ±‚åˆ¤åˆ«å¼ \\(d_i\\) çš„å€¼ï¼Œåˆå€¼ \\(d_1\\) ä¸º \\(2dy-dx\\)ï¼Œ\næ¯æ¬¡æœæ­¥è¿›æ–¹å‘è½´ç§»åŠ¨ï¼Œæ­¤æ—¶æ˜¯Xè½´ï¼Œåˆ™xå€¼+1\næ ¹æ® \\(d_i\\) çš„å€¼åˆ¤æ–­å¦ä¸€ä¸ªè½´ï¼ˆæ­¤æ—¶æ˜¯Yè½´ï¼‰çš„çŠ¶æ€ï¼š\nå¦‚æœ \\(d_i \\geq 0\\) ï¼Œåˆ™yçš„å€¼+1 å¦‚æœ \\(d_i \u0026lt; 0\\) ï¼Œåˆ™yä¸å˜ ä¸‹ä¸€æ¬¡æ­¥è¿›æ‰€ç”¨çš„ \\(d_{i+1}\\) è¦ç”±æœ¬æ¬¡çš„ \\(d_i\\) é€’æ¨å¾—åˆ°ï¼Œæ‰€ä»¥è®¡ç®— \\(d_{i+1}\\)ï¼š\nå¦‚æœå½“å‰çš„ \\(d_i \\geq 0\\) ï¼Œ\\(d_{i+1}=d_i+2(dy-dx)\\) å¦‚æœå½“å‰çš„ \\(d_i \u0026lt; 0\\) ï¼Œ\\(d_{i+1}=d_i+2dy\\) æ³¨æ„ï¼Œåœ¨åšé¢˜æ—¶è¦æ ¹æ®ç»ˆç‚¹çš„æ–¹å‘æ¥åˆ¤æ–­æ¯æ¬¡æ­¥è¿›æ˜¯æœç€æ­£åŠè½´ï¼ˆ+1ï¼‰è¿˜æ˜¯è´ŸåŠè½´ï¼ˆ-1ï¼‰ ç„¶åæŒ‰ç…§ä¸Šé¢çš„é¡ºåºæŒç»­æ­¥è¿›ï¼Œç›´åˆ°æŠµè¾¾ç»ˆç‚¹\nä¾‹ï¼š ä»ç‚¹ A(0,0) åˆ° B(5,4) ç”¨ Bresenham ç®—æ³•ç”»ä¸€ç›´çº¿ï¼Œå†™å‡ºç»˜åˆ¶æµç¨‹ï¼š\ndx = 5 - 0 = 5\ndy = 4 - 0 = 4\nk = dy / dx = 0.8\nå³æœXè½´æ­¥è¿›ï¼Œxå’Œyéƒ½æœæ­£åŠè½´ç§»åŠ¨ æ¯æ¬¡æ­¥è¿›é€‰æ‹©çš„åƒç´ ä»¥åŠ $d_i$ å€¼å¦‚ä¸‹è¡¨ï¼š\nX Y $d_i$ æ“ä½œ 0 0 3 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 1 1 1 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 2 2 -1 \\(d_i \u0026lt; 0\\)ï¼Œyå€¼ä¸å˜ 3 2 7 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 4 3 5 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 5 4 3 æŠµè¾¾ç»ˆç‚¹ void Bres_Line(int x1, int y1, int x2, int y2) { setpixel(x1,y1); int dx=abs(x2-x1),dy=abs(y2-y1); if ( dx==0 \u0026amp;\u0026amp; dy==0) return; int flag=0; if (dx\u0026lt;dy) //ä¸‹é¢å°†æ–œç‡å˜æ¢è‡³0â‰¤|k|â‰¤1åŒºé—´ { flag=1; swap_value(\u0026amp;x1, \u0026amp;y1); swap_value(\u0026amp;x2, \u0026amp;y2); swap_value(\u0026amp;dx, \u0026amp;dy); } int tx=(x2-x1) \u0026gt;0 ? 1:-1,ty=(y2-y1)\u0026gt;0 ? 1: -1; int curx=x1,cury=y1; int dS=2*dy,dT=2*(dy-dx),d=dS-dx; while (curx!=x2) { if (d\u0026lt;0) d+=dS; else cury+=ty, d+=dT; curx+=tx; if (flag) setpixel(cury, curx); else setpixel(curx, cury); } } ä¸­ç‚¹ç”»çº¿ç®—æ³• # ä¸­ç‚¹ç”»çº¿ç®—æ³•ä¸Bresenhamç®—æ³•ç±»ä¼¼ï¼Œä¸¤è€…çš„è§„åˆ™æœ‰æ‰€ä¸åŒï¼Œä½†æ˜¯æ€»ä½“æ€æƒ³æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”æ•ˆç‡ä¹Ÿå®Œå…¨ç›¸åŒã€‚\nä¸­ç‚¹ç”»çº¿ç®—æ³•\rå‡å®šç›´çº¿æ–œç‡ 0\u0026lt;k\u0026lt;1 ï¼Œä¸”å·²ç¡®å®šå½“å‰å¤„ç†è¿‡çš„åƒç´ ç‚¹P(xp,yp)ï¼Œåˆ™ä¸‹ä¸€ä¸ªä¸ç›´çº¿æœ€æ¥è¿‘çš„åƒç´ åªèƒ½æ˜¯P1æˆ–P2ã€‚è®¾Mä¸ºP1ä¸P2çš„ä¸­ç‚¹ï¼ŒQä¸ºäº¤ç‚¹ã€‚ç°ç¡®å®šä¸‹ä¸€ä¸ªè¦ç”»çš„åƒç´ çš„ä½ç½®ã€‚\nå¦‚æœMåœ¨Qä¸‹æ–¹ï¼Œåˆ™P2ç¦»ç›´çº¿è¿‘ï¼Œå–P2ï¼› å¦‚æœMåœ¨Qä¸Šæ–¹ï¼Œåˆ™P1ç¦»ç›´çº¿è¿‘ï¼Œå–P1ã€‚ Mä¸Qé‡åˆï¼ŒP1ã€P2ä»»å–ä¸€ç‚¹ã€‚ æ ¹æ®ç›´çº¿æ–¹ç¨‹ $$ \\begin{split} ğ¹(ğ‘¥,ğ‘¦)\u0026amp;=ğ‘ğ‘¥+ğ‘ğ‘¦+ğ‘=0 \\\\ ğ‘\u0026amp;=ğ‘¦_0âˆ’ğ‘¦_1\\\\ ğ‘\u0026amp;=ğ‘¥_1âˆ’ğ‘¥_0\\\\ ğ‘\u0026amp;=ğ‘¥_0 ğ‘¦_1âˆ’ğ‘¥_1 ğ‘¦_0 \\end{split} $$\nå¯çŸ¥å¯¹äºç›´çº¿ä¸Šçš„ç‚¹ï¼Œå°†åæ ‡ä»£å…¥å F(x,y) å°†ç­‰äº0ï¼›\nå¯¹äºç›´çº¿ä¸Šæ–¹çš„ç‚¹ï¼ŒF(x,y) \u0026gt; 0ï¼› å¯¹äºç›´çº¿ä¸‹æ–¹çš„ç‚¹ï¼ŒF(x,y) \u0026lt; 0ã€‚ å› æ­¤ï¼Œå¦‚æœè¦åˆ¤æ–­ä¸Šå›¾ä¸­çš„Mç‚¹åœ¨Qç‚¹çš„ä¸Šæ–¹è¿˜æ˜¯ä¸‹æ–¹ï¼Œåªéœ€è¦æŠŠMç‚¹ä»£å…¥æ–¹ç¨‹ï¼Œå¹¶åˆ¤æ–­ç¬¦å·å³å¯ã€‚Mç‚¹æ˜¯P1å’ŒP2çš„ä¸­ç‚¹ï¼Œæ‰€ä»¥å®ƒçš„åæ ‡ä¸º\\((x_p+1,y_p+0.5)\\)ã€‚\nä»£å…¥åˆ°ç›´çº¿æ–¹ç¨‹ä¸­ï¼Œå¯æ„é€ åˆ¤åˆ«å¼ï¼š $$ \\begin{split} ğ‘‘\u0026amp;=ğ¹(ğ‘¥_ğ‘+1, ğ‘¦_ğ‘+0.5) \\\\ \u0026amp;=ğ‘(ğ‘¥_ğ‘+1)+ğ‘(ğ‘¦_ğ‘+0.5)+ğ‘ \\end{split} $$\nå½“ \\(d_i \\geq 0\\) æ—¶ï¼Œå³Mç‚¹åœ¨Qç‚¹ä¸Šæ–¹ï¼Œé‚£åº”è¯¥å–P1ç‚¹ã€‚å¹¶ä¸”ï¼Œå¯ä»¥é€šè¿‡å½“å‰ \\(d_i\\) çš„å€¼é€’æ¨å‡º \\(d_{i+1}\\) çš„å€¼ï¼š $$ \\begin{split} Î”é‡ç‚¹\\ \\ d_{i+1}\u0026amp;=F(x_p+2, y_p+0.5) \\\\ \u0026amp;=a(x_p+2)+b(y_p+0.5)+c \\\\ \u0026amp;=a(x_p+1)+b(y_p+0.5)+c+a \\\\ \u0026amp;= d+a \\end{split} $$\nè€Œå½“ \\(d_i \u0026lt; 0\\) æ—¶ï¼Œå³Mç‚¹åœ¨Qç‚¹ä¸‹æ–¹ï¼Œåˆ™åº”å½“å–P2ç‚¹ï¼Œè®¡ç®—\\(d_{i+1}\\) çš„å€¼ï¼š $$ \\begin{split} Î”é‡ç‚¹\\ \\ d_{i+1}\u0026amp;=F(x_p+2, y_p+1.5) \\\\ \u0026amp;=a(x_p+2)+ b(y_p+1.5)+c \\\\ \u0026amp;=a(x_p+1)+b(y_p+0.5)+c+a+b \\\\ \u0026amp;=d+a+b \\end{split} $$\nç”»çº¿ä»(x0, y0)å¼€å§‹ï¼Œæ‰€ä»¥ \\(d_i\\) çš„åˆå€¼åº”è¯¥æ˜¯ï¼š $$ \\begin{split} Î”é‡ç‚¹ \\ \\ d_0\u0026amp;=F(x_0+1,y_0+0.5) \\\\ \u0026amp;=a(x_0+1)+b(y_0+0.5)+c \\\\ \u0026amp;=F(x_0,y_0)+a+0.5b \\\\ \u0026amp;=a+0.5b \\end{split} $$\nç”¨åŒæ ·çš„æ¨å¯¼è¿‡ç¨‹ï¼Œå½“ç›´çº¿æ–œç‡-1\u0026lt;k\u0026lt;0æ—¶ï¼š\nå½“dâ‰¥0ï¼Œæ­¤æ—¶ \\(d_{i+1}=d-a\\) å½“d\u0026lt;0ï¼Œæ­¤æ—¶ \\(d_{i+1}=d-a+b\\) å½“æ–œç‡|k|\u0026gt;1æ—¶ï¼Œå°†x,yåæ ‡äº’æ¢ä»¥å®Œæˆé€’æ¨è¿‡ç¨‹ã€‚åœ¨ç”»ç‚¹æ—¶å†å°†x,yåæ ‡äº’æ¢ã€‚\næ€»ç»“\næ ¹æ®èµ·ç‚¹å’Œç»ˆç‚¹çš„åæ ‡ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç‚¹å¼ \\((y-y_1)/(x-x_1)=(y_2-y_1)/(x_2-x_1)\\) æ±‚å‡ºå…¶ç›´çº¿æ–¹ç¨‹ \\(ax + by + c = 0\\) è®¡ç®— \\(d_i\\) åˆå€¼ \\(d_0 = a + 0.5b\\)ï¼Œè®¾å½“å‰ç›´çº¿æ–œç‡ 0 \u0026lt; k \u0026lt; 1ï¼Œå¼€å§‹åœ¨Xæ­£æ–¹å‘æ­¥è¿›ï¼Œæ¯æ¬¡1ä¸ªåƒç´ ç‚¹ æ ¹æ® \\(d_i\\) çš„å€¼åˆ¤æ–­ y çš„å˜åŒ– è‹¥ \\(d_i \u0026lt; 0\\)ï¼Œyçš„å€¼+1 è‹¥ \\(d_i \\geq 0\\)ï¼Œyä¸å˜ è®¡ç®— \\(d_{i+1}\\)ï¼š è‹¥ \\(d_i \u0026lt; 0\\)ï¼Œ\\(d_{i+1} = d_i+a\\) è‹¥ \\(d_i \\geq 0\\)ï¼Œ\\(d_{i+1} = d_i+a+b\\) å¦‚æœç›´çº¿æ–œç‡-1\u0026lt;k\u0026lt;0ï¼Œå°†\\(d_{i+1}\\)çš„åˆ¤åˆ«å¼æ›´æ”¹ä¸ºï¼š è‹¥ \\(d_i \u0026lt; 0\\)ï¼Œ\\(d_{i+1} = d_i-a\\) è‹¥ \\(d_i \\geq 0\\)ï¼Œ\\(d_{i+1} = d_i-a+b\\) å¦‚æœç›´çº¿æ–œç‡|k|\u0026gt;1ï¼Œå°†x,yåæ ‡äº’æ¢ä»¥å®Œæˆé€’æ¨è¿‡ç¨‹ã€‚åœ¨ç”»ç‚¹æ—¶å†å°†x,yåæ ‡äº’æ¢ã€‚ ä¾‹ï¼š ä»ç‚¹ A(0,0) åˆ° B(5,4) ç”¨ä¸­ç‚¹ç”»çº¿ç®—æ³•ç”»ä¸€ç›´çº¿ï¼Œå†™å‡ºç»˜åˆ¶æµç¨‹ï¼š\nç›´çº¿æ–¹ç¨‹ä¸ºï¼š\\(4x-5y=0\\) a = 4, b = -5\n\\(d_1\\) = a + 0.5b = 1.5\næ¯æ¬¡æ­¥è¿›é€‰æ‹©çš„åƒç´ ä»¥åŠ \\(d_i\\) å€¼å¦‚ä¸‹è¡¨ï¼š\nX Y \\(d_i\\) æ“ä½œ 0 0 1.5 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 1 1 0.5 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 2 2 -0.5 \\(d_i \u0026lt; 0\\)ï¼Œyå€¼ä¸å˜ 3 2 3.5 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 4 3 2.5 \\(d_i \\geq 0\\)ï¼Œyå€¼+1 5 4 1.5 æŠµè¾¾ç»ˆç‚¹ void Mid_Line(int x1, int y1, int x2, int y2) { setpixel(x1,y1); int b=abs(x2-x1),a=-abs(y2-y1); if ( dx==0 \u0026amp;\u0026amp; dy==0) return; int flag=0; if (dx\u0026lt;dy) //ä¸‹é¢å°†æ–œç‡å˜æ¢è‡³0â‰¤|k|â‰¤1åŒºé—´ { flag=1; swap_value(\u0026amp;x1, \u0026amp;y1); swap_value(\u0026amp;x2, \u0026amp;y2); swap_value(\u0026amp;dx, \u0026amp;dy); } int tx=(x2-x1) \u0026gt;0 ? 1:-1,ty=(y2-y1)\u0026gt;0 ? 1: -1; int curx=x1,cury=y1; int d=a+b\u0026gt;\u0026gt;1; while (curx!=x2) { if (d\u0026gt;=0) d+=a; else cury+=ty, d+=a+b; curx+=tx; if (flag) setpixel(cury, curx); else setpixel(curx, cury); } } ","date":"2023å¹´6æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E4%B8%89%E7%AB%A0--1.-%E7%9B%B4%E7%BA%BF%E7%94%9F%E6%88%90%E7%AE%97%E6%B3%95/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬ä¸‰ç«  -- 1. ç›´çº¿ç”Ÿæˆç®—æ³•"},{"content":"","date":"2023å¹´6æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/categories/.net/","section":"Categories","summary":"","title":".NET"},{"content":"","date":"2023å¹´6æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/c#/","section":"Tags","summary":"","title":"C#"},{"content":"è¯¦è§ å®˜æ–¹æ–‡æ¡£\nSpan\u0026lt;T\u0026gt; # Spanæ˜¯ä¸€ç§\rå¼•ç”¨ç»“æ„ä½“(ref struct)ï¼Œå®ƒæä¾›ä»»æ„å†…å­˜çš„è¿ç»­åŒºåŸŸçš„ç±»å‹å®‰å…¨å’Œå†…å­˜å®‰å…¨è¡¨ç¤ºå½¢å¼ã€‚Spané€šå¸¸ç”¨äºå……å½“æ•°ç»„ï¼Œä½†ä¸æ•°ç»„ä¸åŒçš„æ˜¯ï¼ŒSpan å®ä¾‹å¯ä»¥æŒ‡å‘å †æ ˆä¸Šæ‰˜ç®¡çš„å†…å­˜ã€æœ¬æœºå†…å­˜æˆ–æ‰˜ç®¡çš„å†…å­˜ã€‚\n// åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ç”¨SpanæŒ‡å‘è¿™ä¸ªæ•°ç»„ã€‚ // æ³¨æ„è¿™é‡Œçš„Spanä»…æ˜¯æŒ‡å‘äº†arrayçš„åœ°å€ï¼Œå¹¶æ²¡æœ‰åœ¨å †ä¸Šåˆ›å»ºå†…å­˜ã€‚ var array = new int[]{1,2,3,4,5}; var arraySpan = new Span\u0026lt;int\u0026gt;(array); for (int ctr = 0; ctr \u0026lt; arraySpan.Length; ctr++)//ä½¿ç”¨Lengthè·å–è¿™ä¸²å†…å­˜çš„é•¿åº¦ï¼Œå•ä½æ˜¯int arraySpan[ctr] = 0; //ä½¿ç”¨[]è¿ç®—ç¬¦å¯¹ç‰¹å®šä½ç½®çš„å†…å­˜è¿›è¡Œè®¿é—® foreach (var num in array) Console.Write(num); // è¾“å‡ºï¼š00000 ä¸Šé¢çš„ä¾‹å­å£°æ˜äº†ä¸€ä¸ªå†…å®¹ä¸º {1,2,3,4,5} çš„intæ•°ç»„ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªSpan\u0026lt;int\u0026gt;æŒ‡å‘è¯¥æ•°ç»„ã€‚æ­¤æ—¶Spanèµ·åˆ°äº†ç±»ä¼¼äºæŒ‡é’ˆçš„ä½œç”¨ï¼Œå¯¹ä¸€æ®µè¿ç»­çš„å†…å­˜è¿›è¡Œç›´æ¥è®¿é—®ã€‚\nSpan\u0026lt;T\u0026gt;å’Œå†…å­˜ # Span\u0026lt;T\u0026gt;ä¸ä»…å¯ä»¥æŒ‡å‘æŸä¸ªæ•°ç»„ï¼ˆå³.NETè¿è¡Œæ—¶æ‰˜ç®¡çš„å†…å­˜ï¼‰ï¼Œè¿˜å¯ä»¥æŒ‡å‘æœ¬åœ°å†…å­˜æˆ–æ˜¯å †æ ˆï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š\nä½¿ç”¨Marshalç±»åˆ†é…ä¸€å—æœ¬åœ°å†…å­˜ï¼ˆå¹¶é.NETè¿è¡Œæ—¶ä¸­çš„å†…å­˜ï¼‰ï¼Œå¹¶ä½¿ç”¨Span\u0026lt;byte\u0026gt;æŒ‡å‘å®ƒï¼š\n// åˆ›å»ºä¸€å—æœ¬æœºå†…å­˜ï¼Œå¹¶ç”¨SpanæŒ‡å‘å®ƒï¼Œå¯¹é.NETè¿è¡Œæ—¶æ‰˜ç®¡å†…å­˜è¿›è¡Œæ“ä½œæ˜¯ä¸å®‰å…¨ä»£ç ï¼Œä½¿ç”¨unsafeå— var native = Marshal.AllocHGlobal(100); Span\u0026lt;byte\u0026gt; nativeSpan; unsafe { nativeSpan = new Span\u0026lt;byte\u0026gt;(native.ToPointer(), 100); //å°†SpanæŒ‡å‘åˆ†é…çš„æœ¬æœºå†…å­˜ } byte data = 0; for (int ctr = 0; ctr \u0026lt; nativeSpan.Length; ctr++) nativeSpan[ctr] = data++; // ç›´æ¥å¯¹å†…å­˜è¿›è¡Œæ“ä½œ int nativeSum = 0; foreach (var value in nativeSpan) nativeSum += value; Console.WriteLine($\u0026#34;The sum is {nativeSum}\u0026#34;); Marshal.FreeHGlobal(native); //é‡Šæ”¾å†…å­˜ // Output: The sum is 4950 ä½¿ç”¨\rstackallocå…³é”®å­—åœ¨å †æ ˆä¸Šåˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶ç”¨SpanæŒ‡å‘å®ƒï¼š\nSpan\u0026lt;int\u0026gt; arraySpan = stackalloc int[5]; // ä½¿ç”¨stackallocå…³é”®å­—åœ¨å †æ ˆä¸Šåˆ†é…ä¸€ä¸ªintæ•°ç»„ var n = 0; for (int ctr = 0; ctr \u0026lt; arraySpan.Length; ctr++) arraySpan[ctr] = n++; // è®¿é—®æ•°ç»„å†…çš„å…ƒç´  foreach (var num in arraySpan) Console.Write(num); // è¾“å‡ºï¼š01234 Span\u0026lt;T\u0026gt;å’Œåˆ‡ç‰‡ # ä½¿ç”¨Span\u0026lt;T\u0026gt;çš„æ„é€ å‡½æ•°ï¼Œæˆ–æ˜¯Span\u0026lt;T\u0026gt;å¯¹è±¡çš„Sliceæ–¹æ³•ï¼Œå¯ä»¥å¯¹è¿ç»­å†…å­˜çš„ä¸­çš„ä¸€éƒ¨åˆ†åŒºåŸŸè¿›è¡Œæ“ä½œï¼š\nvar array = new int[]{1,2,3,4,5}; var arraySpan = new Span\u0026lt;int\u0026gt;(array, 1,3); //æŒ‡å‘ array[1]~array[3]çš„å†…å­˜ for (int ctr = 0; ctr \u0026lt; arraySpan.Length; ctr++) arraySpan[ctr] = 0; foreach (var num in array) Console.Write(num); // è¾“å‡ºï¼š10005 Span\u0026lt;T\u0026gt;çš„åˆ‡ç‰‡æ“ä½œå¸¸ç”¨äºå­—ç¬¦ä¸²ï¼Œå› ä¸ºC#å­—ç¬¦ä¸²çš„\rä¸å¯å˜æ€§ï¼Œå¯¹å­—ç¬¦ä¸²çš„ä¿®æ”¹æ“ä½œï¼ˆå¦‚åˆ†å‰²ã€æ‹¼æ¥ã€ä¿®æ”¹å†…å®¹ã€æå–å­ä¸²ï¼‰å¹¶ä¸æ˜¯ç›´æ¥åœ¨åŸæœ‰å­—ç¬¦ä¸²ä¸Šè¿›è¡Œæ“ä½œï¼Œè€Œæ˜¯ä¼šè¿”å›æ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚å› æ­¤é¢‘ç¹å¯¹å­—ç¬¦ä¸²çš„ä¿®æ”¹æ“ä½œä¼šäº§ç”Ÿå¤§é‡å†—ä½™å†…å­˜ç»™\råƒåœ¾å›æ”¶æœŸ(GC)å¢åŠ å‹åŠ›ï¼Œä»è€Œå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ã€‚\npublic static (int year, int month, int day) StringToDate(string str) { var year = str.Substring(0,4); var month = str.Substring(4,2); var day = str.Substring(6,2); return (int.Parse(year), int.Parse(month), int.Parse(day)); } ä¸Šè¿°çš„ä»£ç å¯¹ä¸€æ®µ yyyyMMdd æ ¼å¼çš„æ—¥æœŸå­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²å¤„ç†ï¼Œå¹¶è¿”å›åŒ…å«æ•´å‹ (å¹´ï¼Œæœˆï¼Œæ—¥) çš„å…ƒç»„ã€‚\né€šè¿‡SubStringæ–¹æ³•åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¹¶ç”¨int.Parseæ–¹æ³•è½¬æ¢ä¸ºæ•´å½¢ã€‚\nè¿™ä¸ªæ–¹æ³•å¤šæ¬¡å¯¹å­—ç¬¦ä¸²è¿›è¡Œæå–å­ä¸²çš„æ“ä½œï¼Œç”±äºå­—ç¬¦ä¸²ä¸å¯å˜çš„ç‰¹æ€§ï¼Œæ¯æ¬¡æå–å­ä¸²æ—¶éƒ½ä¼šäº§ç”Ÿæ–°çš„å­—ç¬¦ä¸²å®ä¾‹ï¼Œåœ¨å†…å­˜åˆ†æå™¨ä¸­å¯ä»¥çœ‹å‡ºäº§ç”Ÿäº†ä¸‰ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼š\nSubStringäº§ç”Ÿçš„æ–°å­—ç¬¦ä¸²å¯¹è±¡\ræ‰€ä»¥ï¼Œå¦‚æœæœ‰å¤§é‡ä¸ä¸Šè¿°ç±»ä¼¼çš„å­—ç¬¦ä¸²å¤„ç†æ“ä½œè¢«æ‰§è¡Œï¼Œå°†ä¼šäº§ç”Ÿéå¸¸å¤šçš„æ— ç”¨å†…å­˜ï¼Œè€ŒGCå›æ”¶è¿™äº›å†…å­˜æ—¶ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå¤§å¹…å½±å“ã€‚æ‰€ä»¥å¯¹äºå¤§é‡çš„å­—ç¬¦ä¸²å¤„ç†æ“ä½œï¼Œå¾€å¾€ä¼šé€‰æ‹©ä½¿ç”¨\rStringBuilderç±»æ¥é¿å…äº§ç”Ÿè¿‡å¤šåƒåœ¾ã€‚\nä½†å› ä¸ºstringå¯¹è±¡ä¹Ÿæ˜¯ä¸€æ®µè¿ç»­çš„å†…å­˜ï¼Œæ­¤æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨Span\u0026lt;char\u0026gt;æ¥å¯¹ç›´æ¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œï¼š\npublic static (int year, int month, int day) StringToDate(ReadOnlySpan\u0026lt;char\u0026gt; str) { var year = str.Slice(0,4); var month = str.Slice(4,2); var day = str.Slice(6,2); return (int.Parse(year), int.Parse(month), int.Parse(day)); } æ–¹æ³•å°†è¾“å…¥çš„å­—ç¬¦ä¸²éšå¼è½¬æ¢ä¸ºReadOnlySpan\u0026lt;char\u0026gt;ï¼Œå¹¶ç”¨Sliceæ–¹æ³•å¯¹è¿™æ®µå†…å­˜è¿›è¡Œåˆ‡ç‰‡ï¼Œå°†åˆ‡ç‰‡çš„ç»“æœè½¬æ¢ä¸ºintç±»å‹ã€‚\nSpan\u0026lt;T\u0026gt;çš„æ˜¯å¯¹è¯¥æ®µå†…å­˜çš„ç›´æ¥æ“ä½œï¼Œæ‰€ä»¥ä¸åƒSubStringï¼ŒSliceæ–¹æ³•å¹¶ä¸ä¼šåœ¨å †ä¸Šåˆ†é…ä»»ä½•çš„å†…å­˜ï¼Œä»…ä»…æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘äº†è¯¥æ®µå†…å­˜çš„Span\u0026lt;T\u0026gt;å¯¹è±¡è€Œå·²ã€‚\nå¯ä»¥çœ‹åˆ°å†…å­˜ä¸­æ²¡æœ‰äº§ç”Ÿå¤šä½™çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼š\nSliceæ–¹æ³•å¹¶ä¸ä¼šäº§ç”Ÿæ–°çš„å­—ç¬¦ä¸²\rç›´æ¥å¯¹å¯¹è±¡çš„å†…å­˜è¿›è¡Œæ“ä½œé¿å…äº§ç”Ÿåƒåœ¾ï¼Œè¿™å¯¹å¤§é‡çš„å­—ç¬¦ä¸²å¤„ç†æ“ä½œæœ‰éå¸¸å¯è§‚çš„æ€§èƒ½ä¼˜åŒ–ã€‚\nç¼ºé™· # è™½ç„¶ä½¿ç”¨Span\u0026lt;T\u0026gt;å¯ä»¥å¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„æå‡ï¼Œä½†å› ä¸ºå®ƒæ˜¯\rå¼•ç”¨ç»“æ„ä½“ç±»å‹ï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥æœ‰è¾ƒå¤šçš„é™åˆ¶ï¼Œæ¯”å¦‚ï¼š\nref struct ä¸èƒ½æ˜¯æ•°ç»„çš„å…ƒç´ ç±»å‹ã€‚ ref struct ä¸èƒ½æ˜¯ç±»æˆ–é ref struct çš„å­—æ®µçš„å£°æ˜ç±»å‹ã€‚ ref struct ä¸èƒ½å®ç°æ¥å£ã€‚ ref struct ä¸èƒ½è¢«è£…ç®±ä¸º System.ValueType æˆ– System.Objectã€‚ ref struct ä¸èƒ½æ˜¯ç±»å‹å‚æ•°ã€‚ ref struct å˜é‡ä¸èƒ½ç”± Lambda è¡¨è¾¾å¼æˆ–æœ¬åœ°å‡½æ•°æ•è·ã€‚ ref struct å˜é‡ä¸èƒ½åœ¨ async æ–¹æ³•ä¸­ä½¿ç”¨ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥åœ¨åŒæ­¥æ–¹æ³•ä¸­ä½¿ç”¨ ref struct å˜é‡ï¼Œä¾‹å¦‚ï¼Œåœ¨è¿”å› Task æˆ– Task çš„æ–¹æ³•ä¸­ã€‚ ref struct å˜é‡ä¸èƒ½åœ¨è¿­ä»£å™¨ä¸­ä½¿ç”¨ã€‚ è¿™äº›é™åˆ¶å†³å®šäº†Span\u0026lt;T\u0026gt;ä¸èƒ½åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ä½¿ç”¨ï¼Œä½†å¦‚æœåœ¨ç¼–å†™æŸäº›æ–¹æ³•æ—¶ï¼Œå¯¹æ€§èƒ½æˆ–æ˜¯å†…å­˜è¦æ±‚ååˆ†è‹›åˆ»ï¼Œé‚£ä¹ˆä½¿ç”¨Span\u0026lt;T\u0026gt;æ˜¯ä¸ªå¾ˆä¸é”™çš„é€‰æ‹©ã€‚\n","date":"2023å¹´6æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/csharpspan%E7%9A%84%E4%BD%BF%E7%94%A8/","section":"Posts","summary":"","title":"C# Span\u003c T \u003eçš„ä½¿ç”¨"},{"content":"","date":"2023å¹´6æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/c#%E5%9F%BA%E7%A1%80/","section":"Tags","summary":"","title":"C#åŸºç¡€"},{"content":"\rä¸€ä¸ªäº¤äº’å¼è®¡ç®—æœºå›¾å½¢ç³»ç»Ÿåº”å…·æœ‰è®¡ç®—ã€å­˜å‚¨ã€å¯¹è¯ã€è¾“å…¥å’Œè¾“å‡ºç­‰5ä¸ªæ–¹é¢çš„åŠŸèƒ½ å›¾å½¢ç³»ç»Ÿåˆ†ä¸ºå›¾å½¢ç¡¬ä»¶å’Œå›¾å½¢è½¯ä»¶ã€‚ å›¾å½¢æ˜¾ç¤ºè®¾å¤‡ä¸»è¦æœ‰å½©è‰²é˜´æå°„çº¿ç®¡CRTå’Œæ¶²æ™¶æ˜¾ç¤ºå™¨LCDã€‚ å›¾å½¢æ˜¾ç¤ºæ–¹å¼éšæœºæ‰«æï¼ˆç”»çº¿è®¾å¤‡ï¼‰å’Œå…‰æ …æ‰«æï¼ˆç”»ç‚¹è®¾å¤‡ï¼‰ã€‚ å…‰æ …æ‰«ææ˜¾ç¤ºç³»ç»Ÿä¸»è¦åŒ…æ‹¬ï¼šæ˜¾ç¤ºå™¨ï¼Œå¸§ç¼“å†²å™¨å’Œè§†é¢‘æ§åˆ¶å™¨ã€‚ è®¡ç®— é¢œè‰²æ•°K å’Œ å¸§ç¼“å­˜å™¨(æ˜¾å­˜)V(å•ä½bit) çš„å¤§å°ä¹‹é—´çš„å…³ç³»ï¼Œåˆ†è¾¨ç‡ä¸ºm*nï¼Œå…¬å¼ä¸ºï¼š $$ ğ‘‰ \\geq mÃ—nÃ—log_2 K $$ ","date":"2023å¹´6æœˆ14æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E4%BA%8C%E7%AB%A0/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬äºŒç« "},{"content":"\rnullæ£€æŸ¥ # object? obj = null; if (obj == null) { Console.WriteLine(\u0026#34;object is null\u0026#34;); } ä¸Šè¿°çš„ä»£ç æ˜¯C#æœ€åŸºæœ¬ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„nullæ£€æŸ¥ï¼Œä½†åœ¨ç°ä»£C#è¯­è¨€ä¸­ï¼Œè¿™ç§åšæ³•å¹¶ä¸æ˜¯æœ€å¥½çš„ã€‚\nè¢«é‡è½½çš„==è¿ç®—ç¬¦ # ä½¿ç”¨==æˆ–æ˜¯!=è¿ç®—ç¬¦è¿›è¡Œnullæ£€æŸ¥æ—¶ï¼Œå¦‚æœé‡åˆ°å¯¹è±¡ç±»å‹çš„==å’Œ!=è¿ç®—ç¬¦è¢«é‡è½½çš„æƒ…å†µï¼Œå¯èƒ½å¾—åˆ°æ„æ–™ä¹‹å¤–çš„ç»“æœï¼š\nclass User { public string Name { get; set; } public static bool operator ==(User left, User right) =\u0026gt; left.Name == right.Name; public static bool operator !=(User left, User right) =\u0026gt; !(left == right); } static void Main(string[] args) { var user1 = new User { Name = \u0026#34;Azusa\u0026#34; }; var user2 = new User { Name = \u0026#34;Hina\u0026#34; }; Console.WriteLine(user1 != null); //æ­¤æ—¶ä¼šæŠ›å‡ºç©ºå¼•ç”¨å¼‚å¸¸ï¼Œå› ä¸ºåœ¨ != è¿ç®—ç¬¦ä¸­å¼•ç”¨äº† null çš„ Name å±æ€§ } è¿™æ ·çš„è¡Œä¸ºå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºä¸­éšè—çš„æ¼æ´ï¼Œæ¯”å¦‚ä¸Šè¿°çš„æƒ…å†µåªæœ‰åœ¨è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸æ‰èƒ½å¯Ÿè§‰ã€‚ï¼ˆå¦‚æœä½¿ç”¨äº†C# 8.0çš„ç©ºå¼•ç”¨ç±»å‹ï¼Œåˆ™ä¼šæœ‰ç¼–è¯‘å™¨è­¦å‘Šã€‚å®é™…ä¸Šåœ¨ä¸»æµçš„IDEä¸­ï¼Œé‡è½½å‰åçš„==è¿ç®—ç¬¦æ˜¾ç¤ºåœ¨ç¼–è¾‘å™¨ä¸­çš„é¢œè‰²æ˜¯ä¸ä¸€è‡´çš„ï¼Œä¸è¿‡è¿™ä¸æ˜¯å¾ˆå®¹æ˜“å¯Ÿè§‰åˆ°ï¼‰\nReferenceEquals # å¦‚æœè¦ç¡®ä¿æˆ‘ä»¬çš„æ„å›¾æ˜¯â€œæ£€æŸ¥å¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ä¸ºç©ºâ€ï¼Œè€Œä¸æ˜¯é€šè¿‡==æˆ–!=è¿ç®—ç¬¦æ¥æ£€æŸ¥ï¼Œåˆ™éœ€è¦ä½¿ç”¨Object.ReferenceEquals()å‡½æ•°ï¼š\nif (ReferenceEquals(user1,null)) ... ä½¿ç”¨ReferenceEqualså‡½æ•°ä¿è¯äº†nullæ£€æŸ¥ä¸ä¼šè¢«å½±å“ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°çœŸçš„å°±æ˜¯æ£€æŸ¥ä¸¤å‚æ•°çš„å¼•ç”¨æ˜¯å¦ç›¸ç­‰ï¼Œä¸”ä¸ä¼šè¢«é‡è½½ã€‚\næœ‰è¶£çš„æ˜¯ï¼Œå½“è½¬åˆ°Object.ReferenceEquals()å‡½æ•°çš„å®ç°æ—¶ï¼Œå‘ç°å†…éƒ¨è¿˜æ˜¯è°ƒç”¨äº†==è¿ç®—ç¬¦ï¼š\n[NonVersionable] public static bool ReferenceEquals(object? objA, object? objB) { return objA == objB; } ä½†å› ä¸ºæ¥å—çš„ä¸¤ä¸ªå‚æ•°éƒ½è¢«è½¬æ¢ä¸ºäº†å¯ç©ºçš„objectç±»å‹ï¼Œæ‰€ä»¥è°ƒç”¨çš„==è¿ç®—ç¬¦ä¾ç„¶æ˜¯æ²¡è¢«é‡è½½çš„ï¼Œobjectç±»å‹ä¸­å®šä¹‰çš„==è¿ç®—ç¬¦ã€‚\næ—¢ç„¶å¦‚æ­¤ï¼Œåœ¨ä½¿ç”¨==è¿›è¡Œnullæ£€æŸ¥æ—¶ï¼Œå¯ä»¥åŠ ä¸€æ­¥è½¬æ¢ï¼Œæ¥é˜²æ­¢è¿ç®—ç¬¦è¢«é‡è½½çš„æƒ…å†µã€‚\nif ((object?)user1 == null) { Console.WriteLine(\u0026#34;object is null\u0026#34;); } ä½†è¿™æ ·çš„ä»£ç ä¸å¤Ÿç¾è§‚ã€‚\næ¨¡å¼åŒ¹é… # C# 7.0å‡ºç°äº†æ¨¡å¼åŒ¹é…åï¼Œnullæ£€æŸ¥å‡ºç°äº†æ–°çš„æ–¹æ³•ã€‚ä½¿ç”¨isè¿ç®—ç¬¦è¿›è¡Œ\rå¸¸é‡æ¨¡å¼åŒ¹é…æ—¶å¯ä»¥æ¥æ”¶nullå€¼ï¼Œæ‰€ä»¥nullæ£€æŸ¥å˜æˆäº†è¿™æ ·ï¼š\nif (user1 is null) { Console.WriteLine(\u0026#34;object is null\u0026#34;); } å¦‚æœä½¿ç”¨çš„C#æ˜¯9.0ç‰ˆæœ¬ä¹‹åï¼Œåˆ™å¯ä»¥åŠ ä¸Šnotè¿ç®—ç¬¦æ¥å®ç°énullæ£€æŸ¥ï¼š\nif (user1 is not null) { Console.WriteLine(\u0026#34;object is not null\u0026#34;); } è¿™æ ·çš„ä»£ç çœ‹èµ·æ¥æ›´ç›´è§‚äº†ã€‚å®é™…ä¸Šï¼Œè¿™ä¹Ÿæ˜¯å¾®è½¯å®˜æ–¹æ¨èçš„åšæ³•ï¼š\rnullæ£€æŸ¥\nåœ¨C#å†…éƒ¨ï¼Œå®é™…ä¸Šä½¿ç”¨isè¿›è¡Œnullæ£€æŸ¥æ—¶ï¼Œä¹Ÿæ˜¯å…ˆæŠŠå¯¹è±¡è½¬æ¢ä¸ºäº†objectç±»å‹ã€‚\næ€»ç»“ # æ‰€ä»¥ï¼Œåœ¨è¿›è¡Œnullæ£€æŸ¥æ—¶ï¼Œæ¨¡å¼åŒ¹é…obj is nullæ˜¯æœ€æ¨èçš„åšæ³•ï¼Œä½†å¦‚æœè¯­è¨€ç‰ˆæœ¬ä¸æ»¡è¶³(\u0026lt;7.0)ï¼Œè¿›è¡Œnullæ£€æŸ¥åˆ™è¦æ›´åŠ è°¨æ…ï¼Œobject.ReferenceEquals()å‡½æ•°æ˜¯æœ€å®‰å…¨çš„åšæ³•ï¼Œè€Œä½¿ç”¨==è¿ç®—ç¬¦è¿›è¡Œæ£€æŸ¥æ˜¯æ¯”è¾ƒå±é™©çš„ï¼Œå› ä¸ºè¿ç®—ç¬¦å¯èƒ½è¢«é‡è½½ï¼Œå¾—åˆ°æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚\n","date":"2023å¹´6æœˆ14æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/csharp%E6%AD%A3%E7%A1%AE%E7%9A%84null%E6%A3%80%E6%9F%A5/","section":"Posts","summary":"","title":"C# æ­£ç¡®çš„nullæ£€æŸ¥"},{"content":"\rç¬¬ä¸€ç«  # å›¾å½¢ä¸å›¾åƒçš„åŒºåˆ« # å†…å®¹ å›¾å½¢ å›¾åƒ åŸºæœ¬å…ƒç´  ç‚¹ã€çº¿ã€é¢ç­‰å‡ ä½•å…ƒç´ ï¼Œæ¯”å¦‚ç›´çº¿ï¼Œåœ†ï¼Œå¤šè¾¹å½¢ã€‚ã€‚ã€‚ åƒç´  å­˜å‚¨æ•°æ® å„ä¸ªçŸ¢é‡çš„å‚æ•° å„ä¸ªåƒç´ çš„ç°åº¦æˆ–é¢œè‰² å¤„ç†æ–¹å¼ æ—‹è½¬ï¼Œæ‰­æ›²æˆ–æ‹‰ä¼¸ç­‰ å¯¹æ¯”åº¦å¢å¼ºï¼Œè¾¹ç¼˜æ£€æµ‹ç­‰ ç¼©æ”¾ç»“æœ ä¸ä¼šå¤±çœŸï¼Œé€‚åº”ä¸åŒåˆ†è¾¨ç‡ æ”¾å¤§ä¼šå¤±çœŸ å…¶ä»– å›¾å½¢ä¸æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œæ˜¯æ ¹æ®å®¢è§‚äº‹ç‰©è€Œä¸»è§‚å½¢æˆ å¯¹å®¢è§‚äº‹ç‰©çš„çœŸå®æè¿° å®ä¾‹ å·¥ç¨‹å›¾çº¸ ç…§ç‰‡ åº”ç”¨é¢†åŸŸ è®¡ç®—æœºè¾…åŠ©è®¾è®¡ å›¾åƒå¤„ç† è®¡ç®—æœºå›¾å½¢å­¦æ¦‚å¿µ # ç ”ç©¶é€šè¿‡è®¡ç®—æœºå°†ä¿¡æ¯ã€æ•°æ®è½¬æ¢ä¸ºå›¾å½¢ï¼Œå¹¶åœ¨ä¸“é—¨æ˜¾ç¤ºè®¾å¤‡ä¸Šæ˜¾ç¤ºçš„åŸç†ã€æ–¹æ³•å’ŒæŠ€æœ¯çš„å­¦ç§‘ã€‚\nOpenGLä¸­åŸºæœ¬çš„å›¾å…ƒï¼Œå¸¸ç”¨çš„å‡½æ•° # åŸºæœ¬å‡½æ•° # glutInit(int *argc,char **argv)// ä½¿ç”¨å¤–éƒ¨å‚æ•°åˆå§‹åŒ–GLUT glutInitDisplayMode(unsigned int mode) // ä½¿ç”¨GLUTçš„æšä¸¾å€¼åˆå§‹åŒ–æ˜¾ç¤ºæ¨¡å¼ï¼ŒæŒ‡å®šç¼“å†²åŒºæ¨¡å¼å’Œé¢œè‰²æ ¼å¼ï¼Œä½¿ç”¨æŒ‰ä½æˆ–æ¥åŒæ—¶è®¾ç½® glutInitWindowPosition(int x,int y) //æŒ‡å®šäº†çª—å£å·¦ä¸Šè§’çš„å±å¹•ä½ç½® glutInitWindowSize(int width,int size) //æŒ‡å®šäº†çª—å£çš„å¤§å°ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰ glutCreateWindow(char *string) //åˆ›å»ºä¸€ä¸ªæ”¯æŒOpenGLæ¸²æŸ“ç¯å¢ƒçš„çª—å£ã€‚åœ¨è°ƒç”¨glutMainLoop()å‡½æ•°ä¹‹å‰ï¼Œè¿™ä¸ªçª—å£å¹¶æ²¡æœ‰æ˜¾ç¤ºã€‚ glutDisplayFunc(void(*func)(void)) //OpenGLç»˜åˆ¶å›è°ƒå‡½æ•°ï¼Œå°†ç»˜åˆ¶å‡½æ•°ä½œä¸ºå‚æ•° glutMainLoop(void) //å¼€å§‹OpenGLç»˜åˆ¶å¾ªç¯ è¾“å…¥äº‹ä»¶å¤„ç† # glutReshapeFunc(void(*func)int w,int h) //æ³¨å†Œå½“å‰çª—å£å¤§å°å˜åŒ–æ—¶çš„å›è°ƒå‡½æ•° glutKeyboardFunc(void(*func)(unsigned char key,int x,int y)) //æ³¨å†Œå½“å‰çª—å£çš„é”®ç›˜å›è°ƒå‡½æ•° glutMouseFunc(void (*func) (int button, int state, int x, int y)); glutMouseFuncä¸ºæ³¨å†Œå½“å‰çª—å£çš„é¼ æ ‡å›è°ƒå‡½æ•°ï¼Œfuncä¸ºæ³¨å†Œçš„é¼ æ ‡å›è°ƒå‡½æ•°,è¿™ä¸ªå‡½æ•°å®Œæˆé¼ æ ‡äº‹ä»¶çš„å¤„ç†ï¼Œbuttonä¸ºé¼ æ ‡çš„æŒ‰é”®,ä¸ºä»¥ä¸‹å®šä¹‰çš„å¸¸é‡ï¼š\nGLUT_LEFT_BUTTON é¼ æ ‡å·¦é”® GLUT_MIDDLE_BUTTON é¼ æ ‡ä¸­é”® GLUT_RIGHT_BUTTON é¼ æ ‡å³é”® stateä¸ºé¼ æ ‡æŒ‰é”®çš„åŠ¨ä½œï¼š\nGLUT_UP é¼ æ ‡é‡Šæ”¾ GLUT_DOWN é¼ æ ‡æŒ‰ä¸‹ ç»˜åˆ¶å‡½æ•° # æ¸…é™¤çª—å£ ä¸‹é¢ä¸¤è¡Œä»£ç æŠŠä¸€ä¸ªRGBAæ¨¡å¼çš„çª—å£æ¸…é™¤ä¸ºé»‘è‰²\nglClearColor(0.0, 0.0, 0.0, 0.0); glClear(GL_COLOR_BUFFER_BIT); æŒ‡å®šç»˜åˆ¶é¢œè‰² åœ¨ç»˜åˆ¶å‰ä½¿ç”¨ä¸‹åˆ—å‡½æ•°æŒ‡å®šç»˜åˆ¶é¢œè‰²\nglColor3f(float r, float g, float b); //ä¸‰ä¸ªå‚æ•°çš„èŒƒå›´ä¸º0-1 glColor3ub(unsigned char r, unsigned char g, unsigned char b) // ä¸‰ä¸ªå‚æ•°çš„èŒƒå›´ä¸º0-255 å®Œæˆç»˜åˆ¶\nglFlush() å¦‚æœä½¿ç”¨åŒç¼“å†²åŒºæ¨¡å¼ï¼Œåˆ™éœ€è¦äº¤æ¢ç¼“å†²åŒº\nglutSwapBuffers() ç»˜åˆ¶\nä½¿ç”¨glBegin(unsigned int mode)å‡½æ•°æŒ‡å®šå›¾å…ƒå¹¶å¼€å§‹ç»˜åˆ¶\nä½¿ç”¨glVertex..å‡½æ•°ç»˜åˆ¶é¡¶ç‚¹ï¼Œæ»¡è¶³äº†é¡¶ç‚¹çš„æ•°é‡åˆ™ä¼šè‡ªåŠ¨æ ¹æ®é¡¶ç‚¹ç”Ÿæˆå›¾å…ƒå¯¹åº”çš„å›¾å½¢\nä½¿ç”¨glEnd()å‡½æ•°ç»“æŸç»˜åˆ¶\nOpenGLå‡ ä½•å›¾å…ƒ\næ¨¡å¼ å›¾å…ƒç±»å‹ GL_POINTS å°†æ¯ä¸ªé¡¶ç‚¹ç»˜åˆ¶ä¸ºç‚¹ GL_LINES å°†æ¯ä¸¤ä¸ªé¡¶ç‚¹ç»˜åˆ¶ä¸ºä¸€æ¡çº¿ GL_LINE_STRIP å°†æŒ‡å®šçš„é¡¶ç‚¹ç”¨äºåˆ›å»ºçº¿æ¡ã€‚ç¬¬ä¸€ä¸ªé¡¶ç‚¹ä¹‹åçš„æ¯ä¸ªé¡¶ç‚¹æŒ‡å®šçš„æ˜¯çº¿æ¡å»¶ä¼¸åˆ°çš„ä¸‹ä¸€ä¸ªç‚¹ GL_LINE_LOOP ä¸GL_LINE_STRIPç±»ä¼¼ï¼Œä½†æ˜¯ç»˜åˆ¶å®Œåèµ·å§‹é¡¶ç‚¹ä¼šå’Œç»ˆç»“é¡¶ç‚¹è¿æ¥ GL_TRIANGLES å°†æ¯ä¸‰ä¸ªé¡¶ç‚¹ç»˜åˆ¶ä¸ºä¸€ä¸ªä¸‰è§’å½¢ GL_TRIANGLE_STRIP å°†æŒ‡å®šçš„é¡¶ç‚¹ç”¨äºåˆ›å»ºä¸‰è§’æ¡ã€‚æŒ‡å®šå‰ä¸‰ä¸ªé¡¶ç‚¹ä¹‹åï¼Œåç»§çš„æ¯ä¸ªé¡¶ç‚¹ä¸å®ƒå‰é¢ä¸¤ä¸ªé¡¶ç‚¹ä¸€èµ·ç”¨æ¥æ„é€ ä¸‹ä¸€ä¸ªä¸‰è§’å½¢ã€‚æ¯ä¸ªé¡¶ç‚¹ä¸‰å…ƒç»„ï¼ˆåœ¨æœ€åˆçš„ç»„ä¹‹åï¼‰ä¼šè‡ªåŠ¨é‡æ–°æ’åˆ—ä»¥ç¡®ä¿ä¸‰è§’å½¢ç»•æ³•çš„ä¸€è‡´æ€§ GL_TRIANGLE_FAN å°†æŒ‡å®šçš„é¡¶ç‚¹ç”¨äºæ„é€ ä¸‰è§’æ‰‡å½¢ã€‚ç¬¬ä¸€ä¸ªé¡¶ç‚¹å……å½“åŸç‚¹ï¼Œç¬¬ä¸‰ä¸ªé¡¶ç‚¹ä¹‹åçš„æ¯ä¸ªé¡¶ç‚¹ä¸å®ƒçš„å‰ä¸€ä¸ªé¡¶ç‚¹è¿˜æœ‰åŸç‚¹ä¸€èµ·ç»„åˆ GL_QUADS å°†æ¯å››ä¸ªé¡¶ç‚¹ç»˜åˆ¶ä¸ºä¸€ä¸ªå››è¾¹å½¢ GL_QUADS_STRIP å°†æŒ‡å®šçš„é¡¶ç‚¹ç”¨äºæ„é€ å››æ¡å½¢è¾¹ã€‚åœ¨ç¬¬ä¸€å¯¹é¡¶ç‚¹ä¹‹åï¼Œæ¯å¯¹é¡¶ç‚¹å®šä¹‰ä¸€ä¸ªå››è¾¹å½¢ã€‚å’ŒGL_QUADSçš„é¡¶ç‚¹é¡ºåºä¸ä¸€æ ·ï¼Œæ¯å¯¹é¡¶ç‚¹ä»¥æŒ‡å®šé¡ºåºçš„é€†åºä½¿ç”¨ï¼Œä»¥ä¾¿ä¿è¯ç»•æ³•çš„ä¸€è‡´ GL_POLYGON å°†æŒ‡å®šçš„é¡¶ç‚¹ç”¨äºæ„é€ ä¸€ä¸ªå‡¸å¤šè¾¹å½¢ã€‚å¤šè¾¹å½¢çš„è¾¹ç¼˜å†³ä¸èƒ½ç›¸äº¤ã€‚æœ€åä¸€ä¸ªé¡¶ç‚¹ä¼šè‡ªåŠ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªé¡¶ç‚¹ä»¥ç¡®ä¿å¤šè¾¹å½¢æ˜¯å°é—­çš„ å›¾å…ƒç¤ºä¾‹\r","date":"2023å¹´6æœˆ13æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%A4%8D%E4%B9%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80-%E7%AC%AC%E4%B8%80%E7%AB%A0/","section":"Posts","summary":"","title":"å¤ä¹  è®¡ç®—æœºå›¾å½¢å­¦åŸºç¡€ ç¬¬ä¸€ç« "},{"content":" æœ¬æ–‡å†…å®¹å‚è€ƒ\rå¾®è½¯å®˜æ–¹æ–‡æ¡£\nâ€œæ¨¡å¼åŒ¹é…â€æ˜¯ä¸€ç§æµ‹è¯•è¡¨è¾¾å¼æ˜¯å¦å…·æœ‰ç‰¹å®šç‰¹å¾çš„æ–¹æ³•ã€‚åœ¨ä»£ç ä¸­ä½¿ç”¨æ¨¡å¼åŒ¹é…å¯ä»¥æœ‰æ•ˆæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç å¯è¯»æ€§ã€‚C#ä»7.0å¼€å§‹æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œå¹¶æ”¯æŒä»¥ä¸‹åŒ¹é…æ–¹å¼ï¼š\nå£°æ˜æ¨¡å¼ï¼šç”¨äºæ£€æŸ¥è¡¨è¾¾å¼çš„è¿è¡Œæ—¶ç±»å‹ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™å°†è¡¨è¾¾å¼ç»“æœåˆ†é…ç»™å£°æ˜çš„å˜é‡ã€‚ ç±»å‹æ¨¡å¼ï¼šç”¨äºæ£€æŸ¥è¡¨è¾¾å¼çš„è¿è¡Œæ—¶ç±»å‹ã€‚ åœ¨ C# 9.0 ä¸­å¼•å…¥ã€‚ å¸¸é‡æ¨¡å¼ï¼šç”¨äºæµ‹è¯•è¡¨è¾¾å¼ç»“æœæ˜¯å¦ç­‰äºæŒ‡å®šå¸¸é‡ã€‚ å…³ç³»æ¨¡å¼ï¼šç”¨äºå°†è¡¨è¾¾å¼ç»“æœä¸æŒ‡å®šå¸¸é‡è¿›è¡Œæ¯”è¾ƒã€‚ åœ¨ C# 9.0 ä¸­å¼•å…¥ã€‚ é€»è¾‘æ¨¡å¼ï¼šç”¨äºæµ‹è¯•è¡¨è¾¾å¼æ˜¯å¦ä¸æ¨¡å¼çš„é€»è¾‘ç»„åˆåŒ¹é…ã€‚ åœ¨ C# 9.0 ä¸­å¼•å…¥ã€‚ å±æ€§æ¨¡å¼ï¼šç”¨äºæµ‹è¯•è¡¨è¾¾å¼çš„å±æ€§æˆ–å­—æ®µæ˜¯å¦ä¸åµŒå¥—æ¨¡å¼åŒ¹é…ã€‚ ä½ç½®æ¨¡å¼ï¼šç”¨äºè§£æ„è¡¨è¾¾å¼ç»“æœå¹¶æµ‹è¯•ç»“æœå€¼æ˜¯å¦ä¸åµŒå¥—æ¨¡å¼åŒ¹é…ã€‚ var æ¨¡å¼ï¼šç”¨äºåŒ¹é…ä»»ä½•è¡¨è¾¾å¼å¹¶å°†å…¶ç»“æœåˆ†é…ç»™å£°æ˜çš„å˜é‡ã€‚ å¼ƒå…ƒæ¨¡å¼ï¼šç”¨äºåŒ¹é…ä»»ä½•è¡¨è¾¾å¼ã€‚ åˆ—è¡¨æ¨¡å¼ï¼šæµ‹è¯•åºåˆ—å…ƒç´ æ˜¯å¦ä¸ç›¸åº”çš„åµŒå¥—æ¨¡å¼åŒ¹é…ã€‚ åœ¨ C# 11 ä¸­å¼•å…¥ã€‚ åœ¨C#ä»£ç ä¸­ï¼Œå¯ä»¥ä½¿ç”¨is,or,not,andå’Œswitchè¡¨è¾¾å¼è¿›è¡Œæ¨¡æ¿åŒ¹é…ï¼Œè¯¦è§ï¼š\næ¨¡å¼åŒ¹é… - æ¨¡å¼ä¸­çš„ is å’Œ switch è¡¨è¾¾å¼ï¼Œä»¥åŠ andã€or å’Œ not è¿ç®—ç¬¦\nå£°æ˜å’Œç±»å‹æ¨¡å¼ # æ¡ä»¶è¯­å¥ # æ£€æŸ¥å¯¹è±¡çš„ç±»å‹æ˜¯å¦ä¸ç»™å®šçš„ä¸€è‡´ï¼ˆC# 9.0ä»¥ä¸Šï¼‰ï¼š\nobject greeting = \u0026#34;Hello, World!\u0026#34;; if (greeting is string) // å¦‚æœgreetingæ˜¯stringç±»å‹ { Console.WriteLine((string)greeting); } å£°æ˜æ¨¡å¼ï¼ŒåŒ¹é…æ—¶è¿›è¡Œå£°æ˜ï¼Œçœå»äº†ä¸€æ­¥ç±»å‹è½¬æ¢ï¼š\nif (greeting is string message) // å¦‚æœgreetingç±»å‹ä¸ºstringï¼Œåˆ™å°†å…¶ä»¥stringç±»å‹èµ‹å€¼åˆ°messageä¸Š { Console.WriteLine(message); } (å…¶å®æ˜¯åšäº†è¿™ä¸€æ­¥è½¬æ¢\nvar message = greeting as string; if (message is not null) ... å¯ä»¥å¯¹å…¶è¿›è¡Œnullæ£€æŸ¥ï¼Œåœ¨è¿›è¡Œä¸Šè¿°çš„ç±»å‹åŒ¹é…ä¹Ÿä¼šè‡ªåŠ¨è¿›è¡Œnullæ£€æŸ¥\nstring? str = \u0026#34;hello world!\u0026#34;; if (str is not null) { Console.WriteLine(str); } ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è¿›è¡Œnullæ£€æŸ¥å¯ä»¥æœ‰æ•ˆé¿å…==å’Œ!=è¿ç®—ç¬¦è¢«å¯¹è±¡çš„ç±»å‹é‡è½½è€Œè¿”å›ä¸æ­£ç¡®å€¼çš„æƒ…å†µ\nåŠ ä¸Šä¸æˆ–è¡¨è¾¾å¼ï¼š\nobject a = 1; object b = 1.22f; if (a is int and b is float) ...//true if (a is float or b is float) ...//true æ³¨æ„ï¼Œå¦‚æœå¯¹è±¡æ´¾ç”Ÿï¼Œå®ç°ï¼Œæˆ–æ˜¯å­˜åœ¨ä»»ä½•åˆ°åŒ¹é…ç±»å‹çš„\réšå¼å¼•ç”¨è½¬æ¢ï¼Œè¡¨è¾¾å¼éƒ½ä¼šä¸ºtrue\nvar list = new List\u0026lt;int\u0026gt;{1,2,3}; if (list is IEnumerable) // listå®ç°IEnumerableæ¥å£ { Console.WriteLine(\u0026#34;list is Enumerable!\u0026#34;); } Switchè¡¨è¾¾å¼ # ä½¿ç”¨\rswitch å…³é”®å­—çš„æ¨¡å¼åŒ¹é…è¡¨è¾¾å¼\nC#å°†Switchè¯­å¥èåˆè¿›äº†æ¨¡æ¿åŒ¹é…ï¼Œä¸Šè¿°çš„ç±»å‹åŒ¹é…å¯ä»¥ä½¿ç”¨Switchè¡¨è¾¾å¼æ¥å®ç°ï¼š\nobject obj = DateTime.Now; string type = obj switch { int =\u0026gt; \u0026#34;int\u0026#34;, string =\u0026gt; \u0026#34;string\u0026#34;, float =\u0026gt; \u0026#34;float\u0026#34;, DateTime =\u0026gt; \u0026#34;DateTime\u0026#34;, null =\u0026gt; \u0026#34;null\u0026#34;, _ =\u0026gt; \u0026#34;Unknown Type\u0026#34; }; Console.WriteLine(\u0026#34;object type is \u0026#34; + type); å¹¶éswitchè¡¨è¾¾å¼ï¼Œæ­£å¸¸çš„switchè¯­å¥ä¹Ÿæ˜¯å¯è¡Œçš„\nstring type; switch (obj) { case int: type = \u0026#34;int\u0026#34;; break; case string: type = \u0026#34;string\u0026#34;; break; case float: type = \u0026#34;float\u0026#34;; break; case DateTime: type = \u0026#34;DateTime\u0026#34;; break; case null: type = \u0026#34;null\u0026#34;; break; default: type = \u0026#34;Unknown type\u0026#34;; break; } ä½†å¾ˆæ˜¾ç„¶switchè¡¨è¾¾å¼æ›´åŠ ç²¾ç»ƒ\nå¸¸é‡æ¨¡å¼ # æ¨¡æ¿åŒ¹é…å¯ä»¥å¯¹å¸¸é‡å€¼è¿›è¡ŒåŒ¹é…\nstring str = \u0026#34;hello\u0026#34;; if (str is \u0026#34;hello\u0026#34;) { Console.WriteLine(\u0026#34;str is \\\u0026#34;hello\\\u0026#34;\u0026#34;); } å…³ç³»æ¨¡å¼ # ä» C# 9.0 å¼€å§‹ï¼Œå¯ä½¿ç”¨å…³ç³»æ¨¡å¼å°†è¡¨è¾¾å¼ç»“æœä¸å¸¸é‡è¿›è¡Œæ¯”è¾ƒ\nint i = Random.Shared.Next(10); if (i is \u0026gt; 5) { Console.WriteLine(\u0026#34;i \u0026gt; 5\u0026#34;); } æ„Ÿè§‰æœ‰ç‚¹è ¢ï¼Ÿç”¨ä¸Šswitchå°±ä¸ä¸€æ ·äº†\nConsole.WriteLine(Classify(13)); // output: Too high Console.WriteLine(Classify(double.NaN)); // output: Unknown Console.WriteLine(Classify(2.4)); // output: Acceptable static string Classify(double measurement) =\u0026gt; measurement switch { \u0026lt; -4.0 =\u0026gt; \u0026#34;Too low\u0026#34;, \u0026gt; 10.0 =\u0026gt; \u0026#34;Too high\u0026#34;, double.NaN =\u0026gt; \u0026#34;Unknown\u0026#34;, _ =\u0026gt; \u0026#34;Acceptable\u0026#34;, }; \u0026ldquo;åœ¨å…³ç³»æ¨¡å¼ä¸­ï¼Œå¯ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦\u0026lt;ã€\u0026gt;ã€\u0026lt;= æˆ– \u0026gt;= ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚ å…³ç³»æ¨¡å¼çš„å³ä¾§éƒ¨åˆ†å¿…é¡»æ˜¯å¸¸æ•°è¡¨è¾¾å¼ã€‚ å¸¸æ•°è¡¨è¾¾å¼å¯ä»¥æ˜¯ integerã€floating-pointã€char æˆ– enum ç±»å‹ã€‚\u0026rdquo;\né€»è¾‘æ¨¡å¼ # C# 9.0 ä»¥ä¸Šï¼Œå¯ä»¥ä½¿ç”¨and,or,notå…³é”®å­—æ¥åˆ›é€ \u0026rsquo;ä¸\u0026rsquo;ï¼Œ\u0026lsquo;æˆ–\u0026rsquo;ï¼Œ\u0026lsquo;é\u0026rsquo;çš„é€»è¾‘\nif (input is not null) { // ... } è¿è¡Œçš„ä¼˜å…ˆçº§ä¹Ÿæ˜¯ not \u0026gt; and \u0026gt; orï¼Œå¹¶ä¸”ä»å³å¼€å§‹æ‰«æ\næ‹¬å·æ¨¡å¼ # ä½¿ç”¨æ‹¬å·å¼ºè°ƒæˆ–æ”¹å˜æ¨¡å¼åŒ¹é…ä¼˜å…ˆçº§ï¼š\nif (input is not (float or double)) { return; } å±æ€§æ¨¡å¼ # å°†å¯¹è±¡çš„å±æ€§æˆ–æ˜¯å­—æ®µè¿›è¡ŒåŒ¹é…ï¼š\nstatic bool IsConferenceDay(DateTime date) =\u0026gt; date is { Year: 2020, Month: 5, Day: 19 or 20 or 21 }; å±æ€§æ¨¡å¼å¯ä»¥ç”¨ä¸€ä¸²ä¼˜é›…çš„æ¨¡å¼åŒ¹é…ä»£æ›¿å¤æ‚çš„æ¡ä»¶è¯­å¥ï¼Œè¿˜èƒ½ç»“åˆå£°æ˜æ¨¡å¼å’Œç±»å‹æ¨¡å¼ï¼š\nstatic string TakeFive(object input) =\u0026gt; input switch { string { Length: \u0026gt;= 5 } s =\u0026gt; s.Substring(0, 5), //ç»“åˆäº†å£°æ˜æ¨¡å¼ï¼Œç±»å‹æ¨¡å¼ï¼Œé€»è¾‘æ¨¡å¼ï¼Œå¸¸é‡æ¨¡å¼å’Œå±æ€§æ¨¡å¼ string s =\u0026gt; s, ICollection\u0026lt;char\u0026gt; { Count: \u0026gt;= 5 } symbols =\u0026gt; new string(symbols.Take(5).ToArray()), ICollection\u0026lt;char\u0026gt; symbols =\u0026gt; new string(symbols.ToArray()), null =\u0026gt; throw new ArgumentNullException(nameof(input)), _ =\u0026gt; throw new ArgumentException(\u0026#34;Not supported input type.\u0026#34;), }; å±æ€§æ¨¡å¼æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œå¯¹äºåŒ¹é…çš„å±æ€§ç±»å‹ï¼Œè¿˜å¯ä»¥ç»§ç»­è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼š\npublic record Point(int X, int Y); public record Segment(Point Start, Point End); static bool IsAnyEndOnXAxis(Segment segment) =\u0026gt; segment is { Start: { Y: 0 } } or { End: { Y: 0 } }; å¯¹å±æ€§åµŒå¥—è¿›è¡Œæ¨¡å¼åŒ¹é…æœ‰äº›éº»çƒ¦ï¼ŒC# 10.0 ä»¥ä¸Šå¯ä»¥ä½¿ç”¨\u0026quot;æ‰©å±•å±æ€§æ¨¡å¼\u0026quot;ï¼Œå³æˆå‘˜è¿ç®—ç¬¦æ¥å¯¹å±æ€§è¿›è¡ŒåŒ¹é…ï¼Œå¯å°†ä¸Šè¿°ç¤ºä¾‹ä¸­çš„æ–¹æ³•é‡æ„ä¸ºä»¥ä¸‹ç­‰æ•ˆä»£ç ï¼š\nstatic bool IsAnyEndOnXAxis(Segment segment) =\u0026gt; segment is { Start.Y: 0 } or { End.Y: 0 }; â€œä¼˜é›…ï¼Œå®åœ¨å¤ªä¼˜é›…äº†\u0026quot;ï¼ˆæŒ‡å±æ€§æ¨¡å¼\nä½ç½®æ¨¡å¼ # ä½ç½®æ¨¡å¼å¯ä»¥åŒ¹é…\rå…ƒç»„ä¸­çš„å…ƒç´ ï¼š\nvar location = (5, 10); if (location is (5, 10)) ... ä½ç½®æ¨¡å¼ä¹Ÿå¯ä»¥å’Œå…¶ä»–å„ç§æ¨¡å¼ç»“åˆï¼š\nif (location is (\u0026gt;5, \u0026lt;10)) ... è¿™ä½¿å¾—switchè¡¨è¾¾å¼å¯ä»¥ç»“åˆå…ƒç»„ä¸€æ¬¡åŒ¹é…ä»»æ„ä¸ªå¯¹è±¡ï¼š\nstatic int[] Encode(int x, int y) =\u0026gt; (x, y) switch { (\u0026lt; left, \u0026gt; top) =\u0026gt; new[] { 1, 0, 0, 1 }, (\u0026lt; left, \u0026lt; bottom) =\u0026gt; new[] { 0, 1, 0, 1 }, (\u0026gt; right, \u0026gt; top) =\u0026gt; new[] { 1, 0, 1, 0 }, (\u0026gt; right, \u0026lt; bottom) =\u0026gt; new[] { 0, 1, 1, 0 }, (_, \u0026gt; top) =\u0026gt; new[] { 1, 0, 0, 0 }, (_, \u0026lt; bottom) =\u0026gt; new[] { 0, 1, 0, 0 }, (\u0026lt; left, _) =\u0026gt; new[] { 0, 0, 0, 1 }, (\u0026gt; right, _) =\u0026gt; new[] { 0, 0, 1, 0 }, _ =\u0026gt; new[] { 0, 0, 0, 0 } }; å¦‚æœå¯¹è±¡å£°æ˜äº†\rè§£æ„å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥å¯¹å…¶ä½¿ç”¨ä½ç½®åŒ¹é…ï¼š\npublic readonly struct Point { public int X { get; } public int Y { get; } public Point(int x, int y) =\u0026gt; (X, Y) = (x, y); public void Deconstruct(out int x, out int y) =\u0026gt; (x, y) = (X, Y); // å£°æ˜è§£æ„å‡½æ•° static string Classify(Point point) =\u0026gt; point switch //å¯¹å¯¹è±¡è§£æ„å‡ºçš„å…ƒç»„è¿›è¡ŒåŒ¹é… { (0, 0) =\u0026gt; \u0026#34;Origin\u0026#34;, //ä½¿ç”¨ä½ç½®æ¨¡å¼åŒ¹é…pointå¯¹è±¡è§£æ„å‡ºçš„å…ƒç»„ (1, 0) =\u0026gt; \u0026#34;positive X basis end\u0026#34;, (0, 1) =\u0026gt; \u0026#34;positive Y basis end\u0026#34;, _ =\u0026gt; \u0026#34;Just a point\u0026#34;, }; } ç»“åˆå…³ç³»æ¨¡å¼ï¼Œä½¿ç”¨å…ƒç»„å†…å…ƒç´ çš„åç§°ï¼š\nvar numbers = new List\u0026lt;int\u0026gt; { 1, 2, 3 }; if (SumAndCount(numbers) is (Sum: var sum, Count: \u0026gt; 0)) //è¿”å›å…ƒç»„å¯ä»¥ä½¿ç”¨å…³ç³»æ¨¡å¼è®¿é—®å…¶å…ƒç´  { Console.WriteLine($\u0026#34;Sum of [{string.Join(\u0026#34; \u0026#34;, numbers)}] is {sum}\u0026#34;); // output: Sum of [1 2 3] is 6 } static (double Sum, int Count) SumAndCount(IEnumerable\u0026lt;int\u0026gt; numbers) { int sum = 0; int count = 0; foreach (int number in numbers) { sum += number; count++; } return (sum, count); } varæ¨¡å¼ # å¯ä½¿ç”¨ var æ¨¡å¼æ¥åŒ¹é…ä»»ä½•è¡¨è¾¾å¼ï¼ˆåŒ…æ‹¬ nullï¼‰ï¼Œå¹¶å°†å…¶ç»“æœåˆ†é…ç»™æ–°çš„å±€éƒ¨å˜é‡\nstatic bool IsAcceptable(int id, int absLimit) =\u0026gt; SimulateDataFetch(id) is var results \u0026amp;\u0026amp; results.Min() \u0026gt;= -absLimit \u0026amp;\u0026amp; results.Max() \u0026lt;= absLimit; static int[] SimulateDataFetch(int id) { var rand = new Random(); return Enumerable .Range(start: 0, count: 5) .Select(s =\u0026gt; rand.Next(minValue: -10, maxValue: 11)) .ToArray(); } éœ€è¦å¸ƒå°”è¡¨è¾¾å¼ä¸­çš„ä¸´æ—¶å˜é‡æ¥ä¿å­˜ä¸­é—´è®¡ç®—çš„ç»“æœæ—¶ï¼Œvar æ¨¡å¼å¾ˆæœ‰ç”¨ã€‚ å½“éœ€è¦åœ¨ switch è¡¨è¾¾å¼æˆ–è¯­å¥çš„ when å¤§å°å†™ä¸´ç•Œå­å¥ä¸­æ‰§è¡Œæ›´å¤šæ£€æŸ¥æ—¶ï¼Œä¹Ÿå¯ä½¿ç”¨ var æ¨¡å¼ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\npublic record Point(int X, int Y); static Point Transform(Point point) =\u0026gt; point switch { var (x, y) when x \u0026lt; y =\u0026gt; new Point(-x, y), var (x, y) when x \u0026gt; y =\u0026gt; new Point(x, -y), var (x, y) =\u0026gt; new Point(x, y), }; static void TestTransform() { Console.WriteLine(Transform(new Point(1, 2))); // output: Point { X = -1, Y = 2 } Console.WriteLine(Transform(new Point(5, 2))); // output: Point { X = 5, Y = -2 } } å¼ƒå…ƒæ¨¡å¼ # ç”¨_ç¬¦å·æ¥åœ¨\rswitchè¡¨è¾¾å¼ä¸­å……å½“defaultå¼€å…³\nåˆ—è¡¨æ¨¡å¼ # ä»C# 11å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨åˆ—è¡¨æ¨¡å¼åŒ¹é…åˆ—è¡¨ä¸­çš„å†…å®¹ï¼š\nint[] numbers = { 1, 2, 3 }; Console.WriteLine(numbers is [1, 2, 3]); // True Console.WriteLine(numbers is [1, 2, 4]); // False Console.WriteLine(numbers is [1, 2, 3, 4]); // False Console.WriteLine(numbers is [0 or 1, \u0026lt;= 2, \u0026gt;= 3]); // True å¦‚å‰é¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼Œå½“æ¯ä¸ªåµŒå¥—æ¨¡å¼ä¸è¾“å…¥åºåˆ—çš„ç›¸åº”å…ƒç´ åŒ¹é…æ—¶ï¼Œåˆ—è¡¨æ¨¡å¼å°±ä¼šåŒ¹é…ã€‚ å¯ä½¿ç”¨åˆ—è¡¨æ¨¡å¼ä¸­çš„ä»»ä½•æ¨¡å¼ã€‚ è‹¥è¦åŒ¹é…ä»»ä½•å…ƒç´ ï¼Œè¯·ä½¿ç”¨å¼ƒå…ƒæ¨¡å¼ï¼Œæˆ–è€…ï¼Œå¦‚æœè¿˜æƒ³æ•è·å…ƒç´ ï¼Œè¯·ä½¿ç”¨ var æ¨¡å¼ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\nList\u0026lt;int\u0026gt; numbers = new() { 1, 2, 3 }; if (numbers is [var first, _, _]) //æ•è·ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸¢å¼ƒåä¸¤ä¸ªå…ƒç´  { Console.WriteLine($\u0026#34;The first element of a three-item list is {first}.\u0026#34;); } å¦‚æœæ— éœ€åŒ¹é…æ•´ä¸ªåºåˆ—ï¼Œè€Œæ˜¯åªéœ€è¦åŒ¹é…åˆ—è¡¨çš„å¤´å°¾ï¼Œå¯ä»¥ä½¿ç”¨åˆ‡ç‰‡æ¨¡å¼..ï¼š\nConsole.WriteLine(new[] { 1, 2, 3, 4, 5 } is [\u0026gt; 0, \u0026gt; 0, ..]); // True åŒ¹é…å‰ä¸¤ä¸ª Console.WriteLine(new[] { 1, 1 } is [_, _, ..]); // True åŒ¹é…å‰ä¸¤ä¸ªå¹¶å¼ƒå…ƒ Console.WriteLine(new[] { 1 } is [1, 2, ..]); // False æ•°é‡ä¸ä¸€è‡´ï¼ŒåŒ¹é…é”™è¯¯ Console.WriteLine(new[] { 1, 2, 3, 4 } is [.., \u0026gt; 0, \u0026gt; 0]); // True åŒ¹é…æœ€åä¸¤ä¸ª Console.WriteLine(new[] { 2, 4 } is [.., \u0026gt; 0, 2, 4]); // False åŒ¹é…æœ€åä¸‰ä¸ª Console.WriteLine(new[] { 2, 4 } is [.., 2, 4]); // True Console.WriteLine(new[] { 1, 2, 3, 4 } is [\u0026gt;= 0, .., 2 or 4]); // True åŒ¹é…ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª Console.WriteLine(new[] { 1, 0, 0, 1 } is [1, 0, .., 0, 1]); // True åŒ¹é…å‰ä¸¤ä¸ªå’Œæœ€åä¸¤ä¸ª Console.WriteLine(new[] { 1, 0, 1 } is [1, 0, .., 0, 1]); // False åµŒå¥—å…¶ä»–æ¨¡å¼ï¼š\nvoid Validate(int[] numbers) { var result = numbers is [\u0026lt; 0, .. { Length: 2 or 4 }, \u0026gt; 0] ? \u0026#34;valid\u0026#34; : \u0026#34;not valid\u0026#34;; Console.WriteLine(result); } Validate(new[] { -1, 0, 1 }); // output: not valid Validate(new[] { -1, 0, 0, 1 }); // output: valid ","date":"2023å¹´6æœˆ13æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/csharp%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E6%A6%82%E8%BF%B0/","section":"Posts","summary":"","title":"C#æ¨¡å¼åŒ¹é…æ¦‚è¿°"},{"content":" æœ¬æ–‡ç« å°†ä¸¾ä¾‹ä»‹ç»ç»å¤§å¤šæ•°C# 10çš„æ–°ç‰¹æ€§ï¼Œåœ¨.NET 6ä»¥ä¸Šçš„é¡¹ç›®æ”¯æŒè¿™äº›ç‰¹æ€§ã€‚\næœ‰äº›é¢„è§ˆç‰¹æ€§éœ€è¦åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶(.csproj)ä¸­é…ç½®\u0026lt;LangVersion\u0026gt;preview\u0026lt;LangVersion/\u0026gt;æ‰å¯ç”Ÿæ•ˆ\nC#10æ–°å¢åŠŸèƒ½\nå…¨å±€Using # åœ¨ä»»ä½•ä¸€ä¸ªC#ç±»ä¸­ä½¿ç”¨globalå…³é”®å­—ä¿®é¥°usingæŒ‡ä»¤ï¼Œè¯¥usingæŒ‡ä»¤å°†ä¼šåº”ç”¨äºæ•´ä¸ªé¡¹ç›®\nglobalUsing.cs\n//è¿™äº›usingå°†ä¼šåº”ç”¨åˆ°æ•´ä¸ªé¡¹ç›® global using System.Collection.Generic; global using Newtonsoft.Json; ... æ–‡ä»¶èŒƒå›´çš„å‘½åç©ºé—´ # åœ¨C#æ–‡ä»¶ä¸­æŒ‡å®šå‘½åç©ºé—´æ—¶å¯ä»¥ä¸ç”¨èŠ±æ‹¬å·{}äº†ï¼Œè¯¥å‘½åç©ºé—´å°†ä¼šåº”ç”¨äºæ•´ä¸ªæ–‡ä»¶èŒƒå›´ã€‚ä½†ç›¸åçš„ï¼Œä½ æ— æ³•åœ¨ä¸€ä¸ªcsä¸­å®šä¹‰å¤šä¸ªå‘½åç©ºé—´ä¸­çš„å†…å®¹ï¼ˆä¸€èˆ¬æ¥è¯´ä¹Ÿä¸ä¼šè¿™æ ·åšï¼‰ã€‚\nusing System.IdentityModel.Tokens.Jwt; using System.Security.Claims; using Microsoft.IdentityModel.Tokens; namespace Azusa.Shared.Security;//ä¸ä½¿ç”¨{}æŒ‡å®šèŒƒå›´ï¼Œæ•´ä¸ªæ–‡ä»¶éƒ½å°†è¢«å®šä¹‰åˆ°è¯¥å‘½åç©ºé—´ä¸­ã€‚ public static class JwtTokenGenerator { ... } å¸¸é‡å†…æ’å­—ç¬¦ä¸² # ä½ å¯ä»¥åœ¨const stringä¸­ä½¿ç”¨å†…æ’å­—ç¬¦ä¸²äº†ï¼Œä½ å¯ä»¥å°†ç”¨åœ¨æŸäº›åªæ¥å—å¸¸é‡å­—ç¬¦ä¸²çš„åœ°æ–¹ã€‚\n... private const string BaseUrl = \u0026#34;localhost:7890\u0026#34;; public const string SignInUrl = $\u0026#34;{BaseUrl}/SignIn\u0026#34;;//ä½ å¯ä»¥ä½¿ç”¨$å†…æ’å¸¸é‡å­—ç¬¦ä¸²äº† ... [HttpGet(SignInUrl)]//åœ¨è¿™ç§åœ°æ–¹é€‚åˆä½¿ç”¨å¸¸é‡å­—ç¬¦ä¸²ï¼ æ³›å‹ç‰¹æ€§ï¼ˆæ³¨è§£ï¼‰ # C#ç‰¹æ€§ä¹Ÿæ”¯æŒæ³›å‹äº†ï¼Œä¼ é€’ç±»å‹å‚æ•°æ›´åŠ æ–¹ä¾¿ï¼Œä¸éœ€è¦typeofäº†ã€‚\npublic class UnitOfWorkAttribute\u0026lt;TDbContext\u0026gt; : Attribute where TDbContext : DbContext { ... } Lambdaè¡¨è¾¾å¼æ”¹è¿› # varå…³é”®å­—å¯ä»¥æ¨æ–­lambdaè¡¨è¾¾å¼çš„è¿”å›å€¼äº†\nvar func = () =\u0026gt; \u0026#34;Nice\u0026#34;;//ç°åœ¨ç¼–è¯‘å™¨å¯ä»¥æ¨æ–­å‡ºè¿™ä¸ªlambdaæ˜¯Func\u0026lt;string\u0026gt;äº† var func1 = () =\u0026gt; null;//ä¸è¿‡è¿™æ ·æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºnullæ²¡æœ‰ç±»å‹ var func2 = string? () =\u0026gt; null;//ä½†æ˜¯å¯ä»¥æ˜¾å¼æŒ‡å®šä¸€ä¸‹ ç‰¹æ€§ä¹Ÿå¯ä»¥æ”¯æŒåœ¨lambdaä¸Šæ ‡æ³¨äº†\nvar func3 = [UnitOfWorkAttribute\u0026lt;MyDbContext\u0026gt;()](long id) =\u0026gt; myDbCtx.Books.Find(id); æ¨¡å¼åŒ¹é…å±æ€§æ‰©å±• # åœ¨æ¨¡å¼åŒ¹é…çš„æ—¶å€™å¯ä»¥åŒ¹é…å¯¹è±¡çš„å±æ€§ï¼Œå¹¶ä¸”ç”¨æˆå‘˜è¿ç®—ç¬¦.æ¥åŒ¹é…å±æ€§å¯¹è±¡çš„å±æ€§\nif (book is Book{PubTime.Month:12})//ç”¨æˆå‘˜è¿ç®—ç¬¦æ¥è¯»å–å¯¹è±¡å±æ€§çš„å±æ€§ { ... } //ä»¥å‰å¾—è¿™æ · if (book is Book { PubTime: { Month: 12 } }) { } è®°å½•(record)ç»“æ„ä½“ # recordç±»å‹ä¹Ÿå¯ä»¥å£°æ˜ä¸ºç»“æ„ä½“äº†ï¼Œä¹Ÿæ˜¯å€¼ç±»å‹ã€‚\npublic record struct Color(short Red, short Green, short Blue); ç»“æ„ä½“çš„ä¼˜åŒ– # åœ¨C#10ä»¥å‰ï¼Œç»“æ„ä½“çš„æ˜¾å¼æ„é€ å‡½æ•°å¿…é¡»å¾—ç»™æ‰€æœ‰å­—æ®µå’Œè‡ªåŠ¨å±æ€§èµ‹å€¼ æ¯”å¦‚è¿™æ ·ä¸€ä¸ªç»“æ„ä½“\npublic struct Color { public short Red { get; set; } public short Green { get; set; } public short Blue { get; set; } ... } æ„é€ å‡½æ•°è¦ä¹ˆä¸å†™ï¼ˆéšå¼æ— å‚ï¼‰ï¼Œè¦ä¹ˆå†™å…¨ï¼ˆæ˜¾å¼ï¼Œå¹¶ä¸”æ‰€æœ‰è‡ªåŠ¨å±æ€§å’Œå­—æ®µéƒ½å¾—èµ‹å€¼ï¼‰\nï¼ˆå¾ˆè¿·æƒ‘çš„æ“ä½œï¼Œä¸çŸ¥ä¸ºä½•è¦è¿™æ ·è®¾å®šï¼‰\n... public Color(short red, short green, short blue)//å­—æ®µå’Œè‡ªåŠ¨å±æ€§éƒ½å¾—èµ‹å€¼ { Red = red; Green = green; Blue = blue; } ... C#10ä»¥åï¼Œå°†æ¥å—èµ‹å€¼ä¸å®Œå…¨çš„æ˜¾å¼æ„é€ å‡½æ•°\npublic Color(short red, short green) { Red = red; Green = green; } å¹¶ä¸”ï¼ŒC#10çš„ç»“æ„ä½“ä¹Ÿæ”¯æŒwithå…³é”®å­—\nvar color = new Color(122, 255, 255); var color1 = color with { Green = 12 }; åœ¨åŒä¸€ææ„ä¸­è¿›è¡Œèµ‹å€¼å’Œå£°æ˜ # å¯ä»¥é€šè¿‡ææ„å¯¹è±¡æ¥ç»™å˜é‡èµ‹å€¼ï¼Œæˆ–æ˜¯\n(int x, int y) = point;//ææ„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸¤ä¸ªå˜é‡ï¼Œæ³¨æ„è¿™ä¸æ˜¯å…ƒç»„ int x1 = 0; int y1 = 0; (x1, y1) = point;//ææ„å¯¹è±¡ç»™ç°æœ‰å˜é‡èµ‹å€¼ åœ¨C#10ä»¥å‰åˆå§‹åŒ–å’Œèµ‹å€¼ä¸èƒ½åŒæ—¶è¿›è¡Œ\nint x = 0; (x, int y) = point;//C#10ä»¥å‰ä¼šé”™è¯¯ ä½†ç°åœ¨ä¸ä¼š\n","date":"2023å¹´4æœˆ12æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/csharp10%E6%96%B0%E7%89%B9%E6%80%A7/","section":"Posts","summary":"","title":"C#10æ–°å¢åŠŸèƒ½"},{"content":"\ré©¾é©¶è¯ # å¸¸è§„ # å¹´é¾„è¦æ±‚ï¼š c1,c2: 18+æ— ä¸Šé™ c6:20-60 è´§è½¦ï¼š20+ æœ‰æ•ˆæœŸï¼š 6å¹´-\u0026gt;10å¹´-\u0026gt;é•¿æœŸ ä½“æ£€ï¼š ä¸­å¤§å‹å…¬äº¤ç‰µå¼•è½¦æ¯å¹´ä½“æ£€ ä»»ä½•é™æ—¶é¢˜ç›®ï¼š æœ‰90æ—¥é€‰æ‹©90æ—¥ï¼Œå¦åˆ™é€‰æ‹©30æ—¥ é©¾é©¶è¯å‘¨æœŸï¼š 12æœˆ é©¾é©¶è¯å®ä¹ æœŸï¼š 12æœˆ æœ‰æ•ˆæœŸï¼š å‡†è€ƒè¯3å¹´å†…ï¼Œå®ä¹ æœŸéœ€è¦3å¹´é©¾é¾„å¸æœºé™ªåŒï¼Œå»¶æœŸå®¡éªŒ3å¹´ è¯ä»¶ç›¸å…³ï¼š # è½¦â€œç™»è®°â€ï¼Œè¯éšæ„\né©¾é©¶è¯é—å¤±æŸæ¯è¡¥é¢†ï¼Œä»»æ„åœ°ç‚¹å‡å¯ è¯ä»¶å¸¦æœ‰â€œè½¦â€å­—éœ€è¦åœ¨ç™»è®°åœ°å¤„ç† è½¦è¾†å˜åŒ–é™¤é˜²æ’æ†ï¼Œéƒ½éœ€è¦ç™»è®° ä¸å¾—ç”³è¯·é©¾é©¶è¯æ—¶é—´ # å‡1éª—3æ¯’3é†‰5é€ƒé€¸çŠ¯ç½ªç»ˆç”Ÿ\næ»¡åˆ†æ•™è‚² # ç°åœºå­¦ä¹ è‡³å°‘2å¤©ï¼Œç½‘ç»œå­¦ä¹ è‡³å°‘3å¤©ï¼Œæ€»è®¡è‡³å°‘7å¤© æ‰£æ»¡æ¯12åˆ†å­¦ä¹ 7å¤©ï¼Œå°è½¦æœ€å¤š60å¤© æ‰£æ»¡12åˆ†é‡å­¦ç§‘ç›®1ï¼Œ24-35é‡å­¦ç§‘ç›®1ç§‘ç›®3ï¼Œ36+é‡å­¦ç§‘ç›®123 å­¦ä¹ å‡åˆ† # å®ä¹ æœŸå†…ä¸å¯ä»¥å‚ä¸ é…’é©¾å¤„ç½šä¸‰ä¸ªå‘¨æœŸå†…ä¸èƒ½å‚ä¸ ä¸¤æ¬¡ä»¥ä¸Šæ»¡åˆ†æ•™è‚²ä¸èƒ½å‚ä¸ æ¯æ¬¡å‚ä¸æœ€å¤šå‡å…­åˆ† ç½‘ç»œå­¦ä¹ 30åˆ†é’Ÿå‡1åˆ†ï¼Œç°åœºå­¦ä¹ 1å°æ—¶å‡2åˆ†ï¼Œå…¬ç›Šæ´»åŠ¨1å°æ—¶å‡1åˆ† è¯ä»¶è½¦è¾†æ‰£ç•™ # ç¼ºå°‘ é©¾é©¶è¯|è¡Œé©¶è¯|ä¿é™©æ ‡è¯†|æ£€éªŒåˆæ ¼æ ‡è¯†|è½¦ç‰Œ æ‰£ç•™\nåˆ‘æ³• # é‡å¤§äº‹æ•…è‡´äººæ­»äº¡ - 3å¹´ è‡´äººæ­»äº¡é€ƒé€¸ - 3-7å¹´ å› é€ƒé€¸è‡´äººæ­»äº¡ - 7å¹´+ ç»„ç»‡ä½œå¼Šå½¢æˆçŠ¯ç½ª - 3-7å¹´ å…¶ä»–æ‹˜å½¹ é€‰æ‹©é¢˜ï¼šæœ‰æ‹˜å½¹åˆ™å¯¹ï¼Œæœ‰åˆ‘ç»“å°¾åˆ™é”™\näº‹æ•…å¤„ç† # æœ‰äº‰è®®åˆ™æŠ¥è­¦ æ— äº‰è®®åˆ™æ’¤ç¦»ï¼Œä¸æ’¤ç¦»ç½šæ¬¾200 æ•‘æ´ # éª¨æŠ˜è¦å›ºå®šï¼Œä¸è¦ç§»åŠ¨ å¤±è¡€å…ˆæ­¢è¡€ï¼Œæ­¢è¡€æŒ‰å‹è¿‘å¿ƒç«¯ ç‡ƒçƒ§å–·å†·æ°´ï¼Œå…¶ä»–ä¼šæ„ŸæŸ“ é¡ºåºé€šè¡Œ # å¸¸è§„ # å³è½¬è®©å·¦è½¬ï¼Œå·¦è½¬è®©ç›´è¡Œ è¶…è½¦ä»å·¦ä¾§ ç‰¹æ®Šè·¯æ®µä¸èƒ½è¶…è½¦ æœ‰ç‰¹æ®Šè½¦è¾†ä¸èƒ½è¶…è½¦ ä¸èµ°å…¬äº¤è½¦é“ ä¼šè½¦æ—¶ # å±±ä½“å¤–ä¾§å…ˆè¡Œ ç¯å²›å†…å…ˆè¡Œ æ— éšœç¢å…ˆè¡Œ ä¸»è·¯è½¦å…ˆè¡Œ ä¸‹å¡è½¦å…ˆè¡Œ æ ¡è½¦ # ä¸¤è½¦é“åœè½¦ç­‰å¾… ä¸‰è½¦é“å˜æœ€å·¦é“è¶…è½¦ è½¦è¾†æ•…éšœ # å¼€å±é™©è­¦æŠ¥é—ªå…‰ç¯ é˜²æ­¢è­¦æŠ¥æ ‡å¿— 50 - 100mï¼Œé«˜é€Ÿè·¯150m+ åœè½¦è·ç¦» # è·¯å£5ç«™3ï¼Œé¢˜ä¸­å¸¦æœ‰â€œè·¯/å£â€ï¼ˆè·¯å£ï¼Œé“å£ï¼Œå±é™©ç‹­çª„è·¯æ®µï¼‰åˆ™50mï¼Œå¸¦æœ‰â€œç«™â€ï¼ˆè½¦ç«™ï¼ŒåŠ æ²¹ç«™ï¼‰åˆ™30m\nç¯å…‰ # é›¾ç¯ï¼šé™¤äº†é›¾å¤©ä½¿ç”¨ï¼Œå…¶ä»–éƒ½é”™ å±é™©è­¦æŠ¥é—ªå…‰ç¯ï¼šåœè½¦ï¼Œæ•…éšœï¼Œé›¾å¤©ï¼Œç‰µå¼•æ•…éšœè½¦ å·¦å³è½¬å‘ï¼šè½¬å¼¯ï¼Œå˜é“ï¼Œåœè½¦æ—¶æ‰“å³è½¬å‘ï¼Œé—¸é“è¿›é“è·¯æ‰“å·¦è½¬å‘ è¿œå…‰ç¯ï¼šç…§æ˜ä¸è¶³ é—ªçƒï¼šè¶…è½¦ï¼Œé€šè¿‡è·¯å£ï¼Œé€šè¿‡äººè¡Œé“ï¼Œæ€¥å¼¯é“è·¯ å…¶ä»–æƒ…å†µå‡ä¸ºè¿‘å…‰ç¯ åˆ‡æ¢è¿œè¿‘ç¯å…‰è·ç¦»ä¸º150m é€Ÿåº¦å’Œè·ç¦» # ç‰¹æ®Šé“è·¯ # æ— æ ‡è¯†æƒ…å†µï¼Œç‰¹æ®Šé“è·¯å…¨éƒ¨ä¸º30km/h æ™®é€šé“è·¯ # æ— çº¿ï¼šâ€œåŸ3å…¬4â€ï¼Œæœ‰çº¿ï¼šâ€œåŸ5å…¬7â€\næœ‰ä¸­å¿ƒçº¿ï¼šåŸå¸‚50ï¼Œå…¬è·¯70 æ— ä¸­å¿ƒçº¿ï¼šåŸå¸‚30ï¼Œå…¬è·¯40 é«˜é€Ÿè¡Œé©¶èƒ½è§åº¦ # èƒ½è§åº¦200mï¼šè½¦é€Ÿå°äº60ï¼Œè¡Œè½¦è·ç¦»100m èƒ½è§åº¦100mï¼šè½¦é€Ÿå°äº40ï¼Œè¡Œè½¦è·ç¦»50m èƒ½è§åº¦å°äº50mï¼šè½¦é€Ÿå°äº20ï¼Œå°½å¿«ç¦»å¼€ é«˜é€Ÿé€Ÿåº¦ # 100km/hï¼šè·ç¦»100m \u0026lt;100km/hï¼šè·ç¦»50m é«˜é€Ÿé™é€Ÿ # æœ‰æ ‡è¯†ä¼˜å…ˆæŒ‰æ ‡è¯†\n3è½¦é“ï¼šå·¦11-12ï¼Œä¸­9-11ï¼Œå³6-9 2è½¦é“ï¼šå·¦10-12ï¼Œå³6-10 åœè½¦ # åœè½¦ # å•æ¡æ–œæ ï¼šç¦æ­¢é•¿æ—¶é—´åœè½¦ å‰ï¼šç¦æ­¢åœè½¦ åœ°é¢æ ‡è¯† # è·¯æ²¿ä¸Šé»„çº¿ï¼šè™šçº¿ç¦æ­¢é•¿æ—¶é—´åœè½¦ï¼Œå®çº¿ç¦æ­¢åœè½¦ è®¡åˆ† # æ‰£åˆ†å€¼ä»…ä¸º3åˆ†çš„å¹‚\nè¶…é€Ÿ # æ™®é€šé“è·¯ # è¶…é€Ÿ20%-50%ï¼Œæ‰£3åˆ† è¶…é€Ÿ50%+ï¼Œæ‰£6åˆ† é«˜é€Ÿå…¬è·¯ç¿»å€ # è¶…é€Ÿ20%-50%ï¼Œæ‰£6åˆ† è¶…é€Ÿ50%+ï¼Œå£12åˆ† å…¶ä»– # å¤§å‹è½¦åœ¨é«˜é€Ÿä»¥å¤–è¶…é€Ÿ10%-20%ï¼Œæ‰£1åˆ† é«˜é€Ÿä½äºæœ€ä½æ—¶é€Ÿï¼Œæ‰£3åˆ† è¶…å‘˜ # å¤§å‹æ±½è½¦ # è¶…å‡ºæ ¸å®šäººæ•°20%ä»¥ä¸‹ï¼Œæ‰£6åˆ† è¶…å‡ºæ ¸å®šäººæ•°20%ä»¥ä¸Šï¼Œæ‰£12åˆ† ä¸ƒåº§ä»¥ä¸Šè½½å®¢æ±½è½¦ # è¶…å‡ºæ ¸å®šäººæ•°50%ä»¥ä¸‹ï¼Œæ‰£6åˆ† è¶…å‡ºæ ¸å®šäººæ•°50%-100%ï¼Œæ‰£9åˆ† è¶…å‡ºæ ¸å®šäººæ•°100%ä»¥ä¸Šï¼Œæ‰£12åˆ† å…¶ä»–è½½å®¢æ±½è½¦ # è¶…å‡ºæ ¸å®šäººæ•°20%-50%ï¼Œæ‰£3åˆ† è¶…å‡ºæ ¸å®šäººæ•°50%-100%ï¼Œæ‰£6åˆ† è¶…å‡ºæ ¸å®šäººæ•°100%ä»¥ä¸Šï¼Œæ‰£12åˆ† è¶…è½½ # è¶…è½½30%ä»¥ä¸‹ï¼Œæ‰£1åˆ† è¶…è½½30%-50%ä»¥ä¸‹ï¼Œæ‰£3åˆ† è¶…è½½50%ä»¥ä¸Šï¼Œæ‰£6åˆ† å®‰å…¨æ£€éªŒ # æ ¡è½¦ï¼Œå¤§å‹è½¦æœªå®šæœŸå®‰å…¨æ£€æŸ¥ï¼Œæ‰£3åˆ† å…¶ä»–è½¦è¾†æ‰£1åˆ† é“è·¯è¡Œé©¶ # æ™®é€šé“è·¯ # ä¸æŒ‰è§„å®šå›è½¦ï¼Œæ‰å¤´ï¼Œé€†è¡Œï¼š3åˆ† ä¸è§„é¿è¡Œäººï¼š3åˆ† ä¸è§„é¿æ ¡è½¦ï¼š3åˆ† å€Ÿé“å é“ï¼š3åˆ† é—¯çº¢ç¯ï¼š6åˆ† é«˜é€Ÿå…¬è·¯ # ä¸æŒ‰è§„å®šè½¦é“è¡Œé©¶ï¼š3åˆ† å€’è½¦ï¼Œé€†è¡Œï¼š12åˆ† è¿æ³•åœè½¦ï¼š9åˆ† å ç”¨åº”æ€¥è½¦é“ï¼š6åˆ† è½¦ç‰Œ # ä¸æŒ‰è§„å®šå®‰è£…è½¦ç‰Œå·ï¼ˆå¹¶éä¼ªé€ é®æŒ¡ï¼‰ï¼š3åˆ† æ•…æ„é®æŒ¡ï¼Œä¼ªé€ è½¦ç‰Œå·ï¼š9åˆ† é©¾é©¶è¯ # é©¾é©¶è¯è¢«æš‚æ‰£æœŸé—´é©¾é©¶æœºåŠ¨è½¦ï¼š6åˆ† é©¾é©¶è½¦å‹ä¸ç¬¦ï¼š9åˆ† ç–²åŠ³é©¾é©¶ # è½½è´§æ±½è½¦ï¼š6åˆ† è½½å®¢æ±½è½¦ï¼š9åˆ† å…¶ä»–1åˆ†è€ƒç‚¹ # è¿åæ ‡çº¿ ä¸æŒ‰è§„å®šä½¿ç”¨ç¯å…‰ æœªç³»å®‰å…¨å¸¦ è½½è´§è½¦é•¿å®½é«˜è¶…å‡ºè§„å®š æ“…è‡ªæ”¹è£… å…¶ä»–3åˆ†è€ƒç‚¹ # æ¥å¬æ‰‹æœº æ•…éšœï¼Œäº‹æ•…åæ²¡æœ‰æ‘†æ”¾æ ‡è¯†å’Œä½¿ç”¨ç¯å…‰ æ²¡æœ‰å¯¹æ ¡è½¦å®‰å…¨éšæ‚£æ£€æŸ¥ å…¶ä»–6åˆ†è€ƒç‚¹ # äº‹æ•…é€ƒé€¸ï¼Œæ— æ­»äº¡ï¼Œè½»ä¼¤ ","date":"2023å¹´3æœˆ19æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E7%A7%91%E7%9B%AE%E4%B8%80%E5%85%B3%E9%94%AE%E8%AF%8D%E8%AE%B0%E5%BD%95/","section":"Posts","summary":"","title":"ç§‘ç›®ä¸€å…³é”®è¯è®°å½•"},{"content":"","date":"2023å¹´3æœˆ19æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/categories/%E5%85%B6%E4%BB%96/","section":"Categories","summary":"","title":"å…¶ä»–"},{"content":"","date":"2023å¹´3æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/oop/","section":"Tags","summary":"","title":"OOP"},{"content":" åœ¨é˜…è¯»å‰ä½ éœ€è¦å…ˆæŒæ¡C#ç±»çš„è¯­æ³•å¹¶äº†è§£ç±»ä¸å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µã€‚\næ¦‚å¿µ # é¡¾åæ€ä¹‰é¢å‘å¯¹è±¡ç¼–ç¨‹å³æ˜¯å°†çœŸå®äº‹ç‰©åœ¨ä»£ç ä¸­æŠ½è±¡åœ°è¡¨è¾¾å‡ºæ¥ï¼Œä»¥ç°å®ä¸–ç•Œä¸­è§£å†³é—®é¢˜çš„æ€è·¯æ¥è§£å†³ç¨‹åºä¸Šçš„é—®é¢˜ã€‚åœ¨C#ä¸­ï¼Œäº‹ç‰©çš„ç±»å‹å³ä¸ºç±»(class)ï¼Œç±»ä¸­å®šä¹‰äº†è¯¥äº‹ç‰©çš„æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ï¼Œæ¯ä¸ªäº‹ç‰©å¯¹åº”ç€ä¸€ä¸ªå¯¹è±¡(object)ã€‚é¢å‘ç€å¯¹è±¡ç¼–ç¨‹å³ä¸ºOOP(Object-Oriented Programing)ã€‚\nOOPæœ€å¤§çš„ç‰¹ç‚¹å³â€œé¢å‘å¯¹è±¡â€ï¼Œæ•´ä¸ªç¼–ç¨‹çš„æµç¨‹éƒ½æ˜¯å›´ç»•ç€ç±»ä¸å¯¹è±¡çš„ã€‚\nä¸¾ä¾‹è¯´æ˜ï¼š ä»¥ç»å…¸çš„é“¶è¡Œå­˜å–æ¬¾ä¾‹å­æ¥è®²ï¼Œå‡å®šä¸€ä¸ªæ–‡ä»¶ä¸­ä¿å­˜ç€ä½ é“¶è¡Œçš„ä½™é¢ï¼Œå½“ä½ éœ€è¦ç¼–å†™ä¸€ä¸ªç¨‹åºå¯¹è¯¥æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œæä¾›å­˜å–æ¬¾çš„åŠŸèƒ½æ—¶ï¼Œä¼ ç»Ÿé¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„æµç¨‹åº”è¯¥æ˜¯ï¼š\næ‰“å¼€æ–‡ä»¶ï¼Œè¯»å–ä½™é¢å¹¶åˆ›å»ºä¸€ä¸ªå˜é‡æ¥ç¼“å­˜ã€‚ è‹¥è¦å­˜æ¬¾ï¼Œåˆ™è¾“å…¥é‡‘é¢ åœ¨ä½™é¢å˜é‡ä¸ŠåŠ ä¸Šè¾“å…¥çš„é‡‘é¢ å°†ä½™é¢å†™å…¥åˆ°æ–‡ä»¶ è‹¥è¦å–æ¬¾ï¼Œåˆ™è¾“å…¥é‡‘é¢ åœ¨ä½™é¢å˜é‡ä¸Šå‡å»è¾“å…¥çš„é‡‘é¢ å°†ä½™é¢å†™å…¥åˆ°æ–‡ä»¶ é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æµç¨‹åº”è¯¥æ˜¯ï¼š\nå®šä¹‰ä¸€ä¸ªATMç±»ï¼Œæ‹¥æœ‰ä½™é¢å­—æ®µï¼Œå­˜æ¬¾æ–¹æ³•ï¼Œå–æ¬¾æ–¹æ³• å®Œå–„ç±»æ–¹æ³•ï¼Œå­˜æ¬¾æ–¹æ³•å°†è¾“å…¥çš„é‡‘é¢åŠ åˆ°ä½™é¢å­—æ®µä¸Šï¼Œç„¶åå†™å…¥æ–‡ä»¶ã€‚å–æ¬¾æ–¹æ³•å°†ä½™é¢å‡å»è¾“å…¥çš„é‡‘é¢ï¼Œç„¶åå†™å…¥æ–‡ä»¶ æ‰“å¼€æ–‡ä»¶ï¼Œè¯»å–ä½™é¢å¹¶åˆ›å»ºä¸€ä¸ªATMå¯¹è±¡ï¼Œä½¿ç”¨ä½™é¢åˆå§‹åŒ–è¯¥å¯¹è±¡ã€‚ è‹¥è¦å­˜æ¬¾ï¼Œåˆ™è°ƒç”¨ATMå¯¹è±¡çš„å­˜æ¬¾æ–¹æ³• è‹¥è¦å–æ¬¾ï¼Œåˆ™è°ƒç”¨ATMå¯¹è±¡çš„å–æ¬¾æ–¹æ³• OOPçš„ä¼˜ç‚¹ï¼š\né¢å‘å¯¹è±¡ç¼–ç¨‹æ‰€ä½œçš„æµç¨‹æ˜æ˜¾æ›´ç¬¦åˆäººç±»å®é™…æ€è€ƒæ–¹å¼ï¼Œè¿™æ ·èƒ½æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œä½¿ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚ ç±»ä¸å¯¹è±¡çš„å°è£…å¢å¼ºäº†ä»£ç çš„å¤ç”¨æ€§ï¼Œå‡å°‘é‡å¤çš„å·¥ä½œå’Œå¼€å‘ã€‚ é¢å‘å¯¹è±¡å¢å¼ºäº†ç¨‹åºçš„æ¨¡å—åŒ–ç¨‹åº¦ï¼Œå‡å°‘æ¨¡å—ä¹‹é—´çš„è€¦åˆæ€§ï¼Œæé«˜ç¨‹åºçµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚ ç±»çš„å¤šæ€æ€§å®ç°äº†ä¸åŒå¯¹è±¡å¯¹åŒä¸€äº‹ä»¶çš„ä¸åŒå“åº”ï¼Œå¢å¼ºäº†ç¨‹åºçš„å¤šæ ·æ€§ã€‚ é¢å‘å¯¹è±¡çš„ç‰¹å¾ # æŠ½è±¡ # å®šä¹‰ # æŠ½è±¡æŒ‡å°†åŒç±»å¯¹è±¡ä¸­æå–å‡ºå…±æ€§çš„ç‰¹æ€§ï¼Œç„¶åå½¢æˆä¸€ä¸ªç±»(class)\nåœ¨C#ä¸­ï¼Œç±»ä¸ç±»ç›´æ¥åªèƒ½å•ä¸€ç»§æ‰¿ï¼Œä¸èƒ½ç»§æ‰¿å¤šä¸ªç±»ã€‚\nä¾‹å­ # ä¸‹é¢çš„ä»£ç æä¾›äº†ä¸€ä¸ªç±»çš„ç¤ºä¾‹ï¼Œå°†ä¸€ä¸ªå§“åå±æ€§å’Œæ›´æ”¹å§“åçš„æ–¹æ³•å°è£…åˆ°ä¸€ä¸ªPersonç±»ä¸­ï¼š\npublic class Person { //å§“åå±æ€§ public string Name { get; } //æ–¹æ³• public void ChangeName(string name) { Name = name; } } åœ¨ç¼–ç¨‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ç±»ä½œä¸ºä¸€ä¸ªPersonå¯¹è±¡ï¼Œå¹¶å¯ä»¥è¯»å–å’Œæ›´æ”¹å…¶å§“å\næŠ½è±¡çš„å¥½å¤„ # æŠ½è±¡åŒ–æ¨¡æ‹Ÿäº†ç°å®ä¸–ç•Œçš„äº‹ç‰©å’Œè¡Œä¸ºï¼Œæé«˜äº†ä»£ç å¯è¯»æ€§ã€‚ å¢å¼ºäº†ä»£ç æ¨¡å—åŒ–ç¨‹åº¦ é™ä½äº†ä»£ç çš„è€¦åˆå’Œå¤æ‚åº¦ å°è£… # å®šä¹‰ # å°è£…æŒ‡éšè—ç±»/å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€å’ŒåŠŸèƒ½ï¼Œä»…é€šè¿‡ä¸€ç»„å…¬å…±çš„æˆå‘˜æ¥è¿›è¡Œè®¿é—®\nå¯¹ç±»ä¸­çš„æˆå‘˜æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ä»¥æŒ‡å®šæˆå‘˜çš„è®¿é—®çº§åˆ«ã€‚\nC#ä¸­è®¿é—®ä¿®é¥°ç¬¦æœ‰å››ç§:\nprivate:ç§æœ‰ï¼Œåªæœ‰å½“å‰ç±»å†…éƒ¨çš„æ‰èƒ½è®¿é—®\npublic:å…±æœ‰ï¼Œå…¬å¼€è®¿é—®ï¼Œç±»çš„å†…å¤–éƒ½å¯ä»¥è®¿é—®\nprotected:ä¿æŠ¤ï¼Œåªæœ‰ç»§æ‰¿è‡ªè¯¥ç±»çš„ç±»å¯ä»¥è®¿é—®\ninternal:å†…éƒ¨ï¼Œç±»çš„å†…å¤–éƒ½å¯ä»¥è®¿é—®ï¼Œä½†ä»…é™å½“å‰ç¨‹åºé›†\nå…¶ä¸­ï¼Œinternalä¿®é¥°ç¬¦å¯ä»¥ä¸å…¶ä»–ä¸‰ä¸ªå åŠ ä½¿ç”¨ï¼Œå¦‚internal publicå³æ˜¯åœ¨å½“å‰ç¨‹åºé›†ä¸­çš„ç±»å†…å¤–éƒ½å¯ä»¥è®¿é—®ã€‚\nä¸æŒ‡å®šè®¿é—®ä¿®é¥°ç¬¦çš„ç±»é»˜è®¤ä¸ºprivate\nä¾‹å­ # ä¸‹é¢çš„ä»£ç ä¸¾å‡ºäº†è®¿é—®ä¿®é¥°ç¬¦çš„ä¾‹å­ï¼š\npublic class Person { //ç§æœ‰ä¿®é¥°ç¬¦ private string name; public string GetName() { //åœ¨ç±»çš„å†…éƒ¨å¯ä»¥è®¿é—® return name; } } public class Program { static void Main(string[] args) { Person p = new Person(); p.name; } } ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦é™åˆ¶äº†ç±»ä¸­æˆå‘˜çš„è®¿é—®çº§åˆ«ï¼Œå®ç°éšè—æˆå‘˜çš„æ•ˆæœï¼Œè¾¾åˆ°å°è£…çš„ç›®çš„ã€‚\nå°è£…çš„å¥½å¤„ # ç±»çš„å°è£…å¯ä»¥ä¿æŠ¤ç±»å†…éƒ¨çš„æ•°æ®å’Œä»£ç ä¸è¢«å¤–éƒ¨è®¿é—®ï¼Œæé«˜ä»£ç çš„å®‰å…¨æ€§ å°è£…éšè—äº†ç±»ä¸­æ–¹æ³•/å±æ€§çš„å®ç°ç»†èŠ‚ï¼Œåªå‘å¤–æš´éœ²ç®€å•çš„æˆå‘˜ï¼Œå¤–éƒ¨è°ƒç”¨æ—¶åªéœ€è¦çŸ¥é“è¯¥æˆå‘˜æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Œè€Œæ— éœ€çŸ¥é“å¦‚ä½•å®ç°çš„ï¼Œç®€åŒ–äº†æ“ä½œã€‚ åœ¨ä¿®æ”¹ä¸€ä¸ªç±»çš„ä»£ç æ—¶ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–ç±»ï¼Œé™¤éä¿®æ”¹çš„æ˜¯å…¬å…±æˆå‘˜å¹¶ä¸”è¯¥æˆå‘˜è¢«å…¶ä»–ç±»æ‰€è°ƒç”¨ ç»§æ‰¿ # å®šä¹‰ # æ ¹æ®ç°æœ‰æŠ½è±¡åˆ›å»ºæ–°çš„æŠ½è±¡ï¼Œè¯´äººè¯å°±æ˜¯åœ¨åŸæœ‰ç±»çš„åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ï¼Œä¿ç•™åŸæœ‰ç±»çš„æ‰€æœ‰èƒ½åŠ›ï¼Œåœ¨æ–°çš„ä¸€ä¸ªç±»ä¸Šåˆ›å»ºæ–°çš„åŠŸèƒ½ï¼Œæ­¤æ“ä½œè¢«ç§°ä¸º â€œç»§æ‰¿â€ï¼ŒåŸæœ‰çš„ç±»è¢«ç§°ä¸º â€œçˆ¶ç±»â€ æˆ– â€œåŸºç±»â€ ï¼Œç»§æ‰¿çˆ¶ç±»çš„æ–°ç±»è¢«ç§°ä¸º â€œå­ç±»â€ æˆ– â€œæ´¾ç”Ÿç±»â€ ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»çš„è¡Œä¸ºè¢«ç§°ä¸º â€œæ´¾ç”Ÿâ€ï¼Œå¯ä»¥è¯´ â€œå­ç±»â€ç»§æ‰¿è‡ªâ€œçˆ¶ç±»â€ï¼Œè€Œâ€œçˆ¶ç±»â€æ´¾ç”Ÿå‡ºâ€œå­ç±»â€ã€‚\nä¸€èˆ¬ï¼Œå®šä¹‰å¤æ‚ä¸”å¤šç§ç±»å¯¹è±¡æ—¶ï¼Œä¼šæŠŠå®ƒä»¬å…±æ€§çš„ç‰¹å¾é›†æˆåˆ°ä¸€ä¸ªçˆ¶ç±»ä¸­ï¼Œå°†å®ƒä»¬ç‹¬æœ‰çš„ç‰¹å¾åˆ’åˆ†åˆ°å­ç±»ã€‚\nåœ¨C#ä¸­ï¼Œç±»åªèƒ½æœ‰ä¸€ä¸ªåŸºç±»ï¼Œä¸èƒ½å¤šé‡ç»§æ‰¿ã€‚\nä¾‹å­ # ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†ç±»çš„ç»§æ‰¿å…³ç³»ï¼š\n//åŸºç±» public class Person { public string Name { get; } public void ChangeName(string name) { Name = name; } } //æ´¾ç”Ÿç±»ï¼Œç»§æ‰¿äº†Personç±» public class Employee : Person { public string Company { get; } public void ChangeCompany(string company) { Company = company; } } //æ´¾ç”Ÿç±»ï¼Œç»§æ‰¿äº†Personç±» public class Student : Person { public string School { get; set; } } ä¸Šè¿°ä»£ç çš„Employeeç±»ç»§æ‰¿è‡ªPersonç±»ï¼ŒStudnetç±»ä¹Ÿç»§æ‰¿è‡ªäº†Personç±»ï¼Œå®ƒä»¬éƒ½ä¼šç»§æ‰¿Personç±»çš„Nameå±æ€§å’ŒChangeNameæ–¹æ³•ï¼Œä½†å®ƒä»¬ä¹Ÿæœ‰è‡ªå·±ç‹¬æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚\nbaseå…³é”®å­— # åœ¨å­ç±»ä¸­ä½¿ç”¨baseå…³é”®å­—å¯ä»¥è®¿é—®åˆ°çˆ¶ç±»çš„å…¬å¼€æˆ–ä¿æŠ¤å†…å®¹\npublic class Employee : Person { ... public string GetName() { //ä½¿ç”¨baseå…³é”®å­—è®¿é—®çˆ¶ç±»çš„å…¬å¼€å±æ€§ return base.Name; } //ä½¿ç”¨baseå…³é”®å­—è®¿é—®çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¦‚æœçˆ¶ç±»çš„æ„é€ å‡½æ•°æœ‰å‚æ•°ï¼Œå¯ä»¥åœ¨è¿™é‡Œä¼ é€’ public Employee() : base() {} } sealedå…³é”®å­— # å¦‚æœä¸æƒ³è®©æŸä¸ªç±»è¢«ç»§æ‰¿ï¼Œåœ¨å£°æ˜ç±»æ—¶æ·»åŠ sealedå…³é”®å­—ï¼Œå®ƒé˜»æ­¢å…¶ä»–ç±»ç»§æ‰¿è¯¥ç±»ã€‚\n//å…¶ä»–ç±»è‹¥å°è¯•ç»§æ‰¿Bossç±»å°†ä¼šæœ‰ç¼–è¯‘é”™è¯¯ public sealed class Boss : Person { ... } ç»§æ‰¿çš„å¥½å¤„ # ä¼˜åŒ–ç±»ä¹‹é—´çš„å…³ç³»ï¼Œå‡å°‘å†—ä½™ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œå‡å°‘é”™è¯¯çš„å¯èƒ½ã€‚ æä¾› â€œå¤šæ€æ€§â€ å¤šæ€ # å®šä¹‰ # å¤šæ€ä¹Ÿæ˜¯é¢å‘å¯¹è±¡çš„æ ¸å¿ƒï¼Œå®ƒæŒ‡è·¨å¤šä¸ªæŠ½è±¡ä»¥ä¸åŒæ–¹å¼å®ç°ç»§æ‰¿å±æ€§æˆ–æ–¹æ³•çš„èƒ½åŠ›ã€‚å¤šæ€çš„å®ç°ä¾èµ–äºç»§æ‰¿ï¼Œæ‰€ä»¥å¿…é¡»è¦å®šä¹‰å¤šä¸ªç±»å¹¶æœ‰ç»§æ‰¿å…³ç³»ï¼Œæ´¾ç”Ÿç±»å¯ä»¥å„è‡ªå¯¹çˆ¶ç±»çš„æ–¹æ³•å®ç°è¿›è¡Œä¿®æ”¹ï¼Œåœ¨è°ƒç”¨æ—¶è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼Œå¤§å¤§å¢åŠ ç¼–ç¨‹çš„çµæ´»åº¦ã€‚åœ¨ä½¿ç”¨ç±»æ—¶ï¼Œä½¿ç”¨å¤šä¸ªæ´¾ç”Ÿç±»å®ä¾‹åŒ–å‡ºå¤šä¸ªå¯¹è±¡ï¼Œå¯¹è¿™äº›å¯¹è±¡è°ƒç”¨åŒæ ·çš„åŸºç±»æ–¹æ³•ï¼Œä½†å´è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼Œè¿™ä¾¿æ˜¯å¤šæ€ã€‚\nä¸‹é¢æ˜¯å®ç°å¤šæ€å¿…è¦çš„ä¸€äº›æ¦‚å¿µï¼š\næŠ½è±¡ç±» # å°†å¯¹è±¡æˆ–å·²æœ‰çš„ç±»æ›´åŠ æŠ½è±¡åŒ–æˆä¸ºä¸€ä¸ªæ–°çš„ç±»ï¼Œä»¥è‡³äºæ— æ³•å…·ä½“åŒ–ï¼ˆæ— æ³•åˆ›å»ºå‡ºè¯¥ç±»çš„å¯¹è±¡ï¼Œå› ä¸ºè¿‡äºæŠ½è±¡è€Œç¼ºå°‘æŸäº›åˆ›å»ºç±»æ‰€å¿…è¦çš„æ•°æ®æˆ–æ–¹æ³•ï¼‰ã€‚è¿™æ ·çš„ç±»è¢«ç§°ä¸ºæŠ½è±¡ç±»ï¼Œåœ¨ç±»ä¿®é¥°ç¬¦classå‰åŠ ä¸Šabstractä¿®é¥°ç¬¦å°†å®šä¹‰çš„ç±»è½¬æ¢ä¸ºæŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½ç§°ä¸ºå…¶ä»–ç±»çš„åŸºç±»ã€‚\næŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ä¸èƒ½å¤Ÿä½¿ç”¨newå®ä¾‹åŒ–ï¼Œæ„é€ å‡½æ•°ä»…ä¾›å­ç±»ä½¿ç”¨ã€‚ è™šæ–¹æ³• # æœ‰æ—¶å°†å·²æœ‰ç±»çš„æå–æˆåŸºç±»åï¼Œä¼šé‡åˆ°éƒ¨åˆ†å­ç±»å¯¹ä¸æŸäº›æ–¹æ³•çš„å®ç°æ–¹å¼ä¸ä¸€è‡´ã€‚åœ¨ç±»ä¸­å®šä¹‰æ–¹æ³•æ—¶åŠ ä¸Švirtualå…³é”®å­—ï¼Œå¯è®©å­ç±»ä½¿ç”¨overrideå…³é”®å­—é‡å†™åŸºç±»æ–¹æ³•çš„å®ç°ã€‚\nä¸¾ä¸€ä¸ªç°å®ä¸­çš„ä¾‹å­ï¼šä»¥å‰çš„æ‰€æœ‰è½¿è½¦éƒ½æ˜¯ç”±ç‡ƒæ²¹é©±åŠ¨çš„ï¼Œå®ƒä»¬æœ‰ç€â€œç§»åŠ¨â€è¡Œä¸ºï¼Œå¹¶ä¸”è¯¥éƒ½æ˜¯ä»¥\u0026quot;ç‡ƒæ²¹é©±åŠ¨\u0026quot;ã€‚ä½†éšç€æ—¶ä»£å˜åŒ–ï¼Œå‡ºç°äº†ç”µåŠ›é©±åŠ¨çš„è½¿è½¦ï¼Œå³ä½¿é©±åŠ¨åŸç†ä¸ä¸€æ ·äº†ï¼Œä½†å®ƒä»¬è¿˜æ˜¯æœ‰ç€â€œç§»åŠ¨â€è¡Œä¸ºã€‚\nä»ç¼–ç¨‹æ–¹é¢æ¥çœ‹ï¼Œè½¿è½¦ç±»Caræœ‰ç€Moveæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯â€œç”±ç‡ƒæ²¹é©±åŠ¨çš„â€ï¼Œä½†å‡ºç°äº†æ–°çš„ç±»ElectricCarç”µåŠ¨è½¦ç±»ï¼Œå®ƒç»§æ‰¿è‡ªCarç±»ï¼Œä½†æ˜¯å®ƒå¯¹Moveæ–¹æ³•çš„å®ç°å´ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯â€œç”µåŠ›é©±åŠ¨çš„â€ã€‚æ­¤æ—¶ï¼Œå¯ä»¥å°†Carç±»ä¸­çš„Moveæ–¹æ³•æ ‡è®°ä¸ºè™šæ–¹æ³•virtualï¼Œç„¶ååœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™è¯¥æ–¹æ³•ã€‚\nä¸‹é¢çš„ç±»å®šä¹‰äº†ä¸€ä¸ªè½¿è½¦ç±»ï¼Œæœ‰ç€ç”¨ç‡ƒæ²¹é©±åŠ¨çš„Moveæ–¹æ³•ï¼š\npublic class Car { //ä½¿ç”¨virtualå…³é”®å­—å®šä¹‰è™šæ–¹æ³• public virtual void Move() { //ç”¨ç‡ƒæ²¹é©±åŠ¨ ... } } æœ‰ä¸€ä¸ªç±»ElectricCarç»§æ‰¿äº†Carç±»ï¼Œå¹¶é‡å†™äº†çˆ¶ç±»çš„Moveæ–¹æ³•ï¼š\npublic class ElectricCar : Car { //ä½¿ç”¨overrideå…³é”®å­—é‡å†™çˆ¶ç±»çš„è™šæ–¹æ³• public override void Move() { //ç”¨ç”µåŠ›é©±åŠ¨ ... } } æ­¤æ—¶ä½¿ç”¨Carç±»å’ŒElectricCarç±»åˆ†åˆ«å®ä¾‹åŒ–å‡ºå¯¹è±¡ï¼Œè°ƒç”¨Moveæ–¹æ³•ï¼Œå®ƒä»¬è¡¨ç°å‡ºçš„è¡Œä¸ºå°†ä¸ä¸€è‡´ã€‚\n... Car c = new Car(); //ç‡ƒæ²¹é©±åŠ¨ c.Move(); ElectricCar ec = new ElectricCar(); //ç”µåŠ›é©±åŠ¨ï¼Œè¯¥æ´¾ç”Ÿç±»é‡å†™äº†Moveæ–¹æ³• ec.Move(); ... åœ¨ç±»ä¸­ä½¿ç”¨virtualå…³é”®å­—åœ¨æ–¹æ³•å‰æ ‡æ³¨ï¼Œæ¥å£°æ˜ä¸€ä¸ªè™šæ–¹æ³•ã€‚ åœ¨æ´¾ç”Ÿç±»ä¸­ä½¿ç”¨overrideå…³é”®å­—å¯¹çˆ¶ç±»ä¸­çš„è™šæ–¹æ³•è¿›è¡Œé‡å†™ï¼Œä¿®æ”¹æ–¹æ³•çš„å®ç°è¿‡ç¨‹ã€‚ å¦‚æœä¸æƒ³å®Œå…¨é‡å†™è™šæ–¹æ³•ï¼Œåªæ˜¯æƒ³è¦åœ¨çˆ¶ç±»çš„æ–¹æ³•åŸºç¡€ä¸Šæ·»åŠ ä»£ç ï¼Œå¯ä»¥åœ¨é‡å†™æ—¶ç”¨baseå…³é”®å­—è°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚ sealedå…³é”®å­—ä¹Ÿé€‚ç”¨äºè™šæ–¹æ³•ï¼Œå®ƒé˜»æ­¢æ´¾ç”Ÿç±»é‡å†™æ–¹æ³•ã€‚ æŠ½è±¡æ–¹æ³• # æŠ½è±¡æ–¹æ³•ç±»ä¼¼äºè™šæ–¹æ³•ï¼Œå­ç±»å¯ä»¥é‡å†™æ–¹æ³•çš„å®ç°ã€‚ä½†æ˜¯æœ‰æ—¶å­ç±»å¯¹æ–¹æ³•çš„å®ç°å„ä¸ç›¸åŒï¼Œæ— æ³•ç»Ÿä¸€å‡ºä¸€ä¸ªçˆ¶ç±»çš„å®ç°æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¾¿è¢«æŠ½è±¡åŒ–æˆä¸ºä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚\næŠ½è±¡æ–¹æ³•åœ¨ç±»çš„æ–¹æ³•å‰ä½¿ç”¨abstractå…³é”®å­—å®šä¹‰ï¼ŒæŠ½è±¡æ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“ï¼Œä»…å®šä¹‰äº†æ–¹æ³•åï¼Œè¿”å›å€¼å’Œå‚æ•°ã€‚åœ¨å­ç±»åŒæ ·ä½¿ç”¨overrideå¯¹çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•è¿›è¡Œé‡å†™ã€‚\nå®šä¹‰äº†æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»ä¸ºæŠ½è±¡ç±»ï¼Œå› ä¸ºè¿™ä¸ªç±»æœ‰æ–¹æ³•æ²¡æœ‰è¢«å®ç°ï¼Œæ— æ³•å®ä¾‹åŒ–ã€‚\nè‹¥ä¸€ä¸ªç±»çš„åŸºç±»æ˜¯å¸¦æœ‰æŠ½è±¡æ–¹æ³•çš„æŠ½è±¡ç±»ï¼Œé™¤éè¯¥æ´¾ç”Ÿç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸ç„¶å°±å¿…é¡»é‡å†™æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ã€‚\nå†ä¸¾ä¸€ä¸ªä¾‹å­ï¼šä¸‰è§’å½¢å’ŒçŸ©å½¢éƒ½å±äºâ€œå½¢çŠ¶â€ï¼Œéƒ½å¯ä»¥æ±‚å‡ºå…¶é¢ç§¯ï¼Œä½†å®ƒä»¬è®¡ç®—é¢ç§¯çš„å…¬å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚\nä»ç¼–ç¨‹æ–¹é¢æ¥çœ‹ï¼Œä¸‰è§’å½¢å’ŒçŸ©å½¢å¯ä»¥æå–å‡ºä¸€ä¸ªçˆ¶ç±»Shapeï¼ˆå½¢çŠ¶ï¼‰ç±»ï¼ŒShapeç±»ä¸­æœ‰ä¸€è™šæ–¹æ³•Areaç”¨äºè®¡ç®—å½¢çŠ¶çš„é¢ç§¯ã€‚ä¸‰è§’å½¢Triangleç±»å’ŒçŸ©å½¢Rectangleç±»éƒ½ç»§æ‰¿è‡ªShapeï¼Œå¹¶ä¸”é‡å†™äº†Areaæ–¹æ³•ã€‚\nä½†è¿™æ ·è®¾è®¡çš„é—®é¢˜æ˜¯ï¼ŒShapeç±»è¿‡äºæŠ½è±¡ï¼Œåˆ›å»ºæˆå¯¹è±¡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè€Œä¸”æ— æ³•å®ç°Areaæ–¹æ³•ï¼Œåªèƒ½ç•™ç©ºã€‚\næ­¤æ—¶å°±å¯ä»¥å°†Shapeç±»çš„Areaæ–¹æ³•æ ‡è®°ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå¹¶ä¸”å°†Shapeç±»æ ‡è®°ä¸ºæŠ½è±¡ç±»ã€‚æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–ï¼Œåªèƒ½ç”¨æ¥ç»§æ‰¿ï¼ŒæŠ½è±¡æ–¹æ³•ä¹Ÿä¸éœ€è¦å®ç°ï¼Œåªèƒ½ç”¨æ¥é‡å†™ã€‚\nä¸‹é¢çš„ä»£ç å¯¹æŠ½è±¡æ–¹æ³•è¿›è¡Œäº†ç¤ºä¾‹ï¼š\n//å¸¦æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»ä¸ºæŠ½è±¡ç±» public abstract class Shape { //ä½¿ç”¨abstractå…³é”®å­—å£°æ˜äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ã€‚ public abstract float Area(); } public class Triangle : Shape { //ä½¿ç”¨overrideå…³é”®å­—é‡å†™äº†çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰é‡å†™è¯¥æ–¹æ³•ï¼Œå°†ä¼šæœ‰ç¼–è¯‘é”™è¯¯ public override float Area() { ... } } public class Rectangle : Shape { public override float Area() { ... } } æŠ½è±¡æ–¹æ³•ä¸éœ€è¦æ–¹æ³•å®ç°ï¼Œåªéœ€è¦å®šä¹‰åç§°ï¼Œå‚æ•°å’Œè¿”å›å€¼å³å¯ï¼Œä½†è¯¥ç±»çš„æ´¾ç”Ÿç±»å¿…é¡»æä¾›é‡å†™è¯¥æŠ½è±¡æ–¹æ³•ã€‚ æŠ½è±¡æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ä¸èƒ½ä¸ºprivateï¼Œå› ä¸ºæŠ½è±¡æ–¹æ³•éœ€è¦å­ç±»çš„å®ç°ã€‚ è‹¥ä¸€ä¸ªç±»æ‹¥æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå®ƒå°±å¿…é¡»è¢«ä¿®é¥°ä¸ºæŠ½è±¡ç±»ï¼Œå› ä¸ºæŠ½è±¡æ–¹æ³•éœ€è¦ä¸€ä¸ªå­ç±»æä¾›å®ç°ã€‚ æ¥å£ # ç±»æŠ½è±¡çš„æé™æ˜¯åªåŒ…å«æ–¹æ³•ï¼Œç±»ä¸­æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œåªå®šä¹‰äº†è¯¥ç±»çš„è¡Œä¸ºï¼Œè¿™æ ·æŠ½è±¡åˆ°æé™çš„ç±»è¢«ç§°ä¸º â€œæ¥å£â€ã€‚è€Œç»§æ‰¿äº†è¯¥ç±»çš„ç±»ä¹Ÿä¸å«æ´¾ç”Ÿç±»äº†ï¼Œå®ƒä»¬è¢«ç§°ä¸º â€œå®ç°ç±»â€ï¼Œè€Œç»§æ‰¿è¿™ä¸€æ“ä½œåä¹Ÿå˜ä¸ºäº† â€œå®ç°â€ï¼Œå³æŸç±»å®ç°äº†æŸæ¥å£ï¼Œå®šä¹‰æ¥å£çš„å…³é”®å­—ä¸æ˜¯classï¼Œå˜ä¸ºäº†interfaceã€‚\næ¥å£ç±»ä¼¼äºæŠ½è±¡ç±»ï¼Œä½†æ¯”æŠ½è±¡ç±»æ›´åŠ æŠ½è±¡ï¼Œæ— æ³•å®šä¹‰æ•°æ®ï¼Œåªèƒ½å®šä¹‰è¡Œä¸ºï¼Œè€Œä¸”å®ç°æ¥å£çš„ç±»éƒ½å¿…é¡»å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜ã€‚\næ¥å£ä¸€èˆ¬ç”¨æ¥å®šä¹‰æŸäº›è¡Œä¸ºï¼Œè€Œä¸æ˜¯ä¸€ç±»äº‹ç‰©ï¼Œæ¯”å¦‚C#ä¸­çš„IEnumerableï¼ˆå¯æšä¸¾ï¼‰æ¥å£ã€‚æŸä¸ªç±»å®ç°äº†æ¥å£ï¼Œå°±ä»£è¡¨å®ƒèƒ½å¤Ÿå®ç°è¿™äº›è¡Œä¸ºã€‚\nåœ¨C#ä¸­ï¼Œæ¥å£åªèƒ½å®šä¹‰æ–¹æ³•ï¼Œå±æ€§ï¼Œç´¢å¼•å™¨å’Œäº‹ä»¶ã€‚ åœ¨C#ä¸­ï¼Œç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†å…è®¸å®ç°å¤šä¸ªæ¥å£ï¼Œåœ¨ç¨‹åºä¸­å¯ä»¥è®©ç±»å®ç°å¤šä¸ªæ¥å£ï¼Œä»¥è¡¨ç°å‡ºå„ç±»ä¸åŒçš„è¡Œä¸ºã€‚åœ¨å¯¹ç±»çš„åŠŸèƒ½è¿›è¡Œæ‹“å±•æ—¶ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å®ç°çš„æ¥å£æ¥è®©ç±»å®ç°ç›¸åº”çš„æ–¹æ³•ã€‚ åœ¨C#ä¸­ï¼Œæ¥å£çš„å‘½ååº”å½“ä»¥å­—æ¯Iå¼€å¤´ã€‚ ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†æ¥å£å’Œå®ç°ç±»çš„å®šä¹‰ï¼š\n//ä½¿ç”¨interfaceå…³é”®å­—å®šä¹‰æ¥å£ public interface IMoveable { //å®šä¹‰æ¥å£å±æ€§ Vector2 Position { get; } //å®šä¹‰æ¥å£æ–¹æ³•ï¼Œæ— éœ€æ–¹æ³•ä½“ void Move(int x, int y); } public class Car : IMoveable { //å®ç°æ¥å£ä¸­çš„å±æ€§å’Œæ–¹æ³• public Vector2 Position { get; } public void Move(int x, int y) { Position.x = x; Position.y = y; } } æ¥å£å®šä¹‰çš„æˆå‘˜éƒ½ä¸éœ€è¦å®ç°ï¼Œå®ç°ç±»å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰æˆå‘˜ã€‚ æ¥å£æˆå‘˜å¯ä»¥ä¸åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œé»˜è®¤ä¼šèµ‹äºˆpublicï¼Œæ¥å£æˆå‘˜çš„è®¿é—®ä¿®é¥°ç¬¦ä¸èƒ½ä¸ºprivateï¼Œå› ä¸ºç§æœ‰çš„æ¥å£æ–¹æ³•æ²¡æœ‰æ„ä¹‰ã€‚ æ–°ç‰ˆæœ¬ç‰¹æ€§\nåœ¨é«˜ç‰ˆæœ¬çš„C#ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å¯ä»¥æœ‰æ–¹æ³•ä½“ï¼Œæ¥å£ä¸­ä¹Ÿå¯ä»¥å®šä¹‰é™æ€æŠ½è±¡æˆå‘˜å’Œè™šæ‹Ÿæˆå‘˜ï¼Œå…·ä½“å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š\ræ¥å£\næ›¿æ¢ # å‘ä¸Šè½¬æ¢(upcasting)\nåœ¨å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œæ—¶ï¼Œæ´¾ç”Ÿç±»å¯¹è±¡çš„å¼•ç”¨å¯ä»¥æ›¿æ¢åŸºç±»çš„å¼•ç”¨ï¼š\nPerson p1 = new Person();//å®ä¾‹åŒ–Personå¯¹è±¡ Employee e1 = new Employee();//å®ä¾‹åŒ–Employeeå¯¹è±¡ p1 = e1;//æ›¿æ¢ ä¸Šè¿°ä»£ç æ¼”ç¤ºäº†æ›¿æ¢çš„è¿‡ç¨‹ï¼ŒEmployeeç±»æ˜¯Personç±»çš„æ´¾ç”Ÿï¼Œå°†å…¶åˆ†åˆ«å®ä¾‹åŒ–å‡ºp1å¯¹è±¡å’Œe1å¯¹è±¡ï¼Œå¹¶å°†p1å¯¹è±¡çš„å¼•ç”¨æ›¿æ¢æˆäº†e1å¯¹è±¡ã€‚\nè™½ç„¶ä¸¤å¯¹è±¡æ˜¯ä¸åŒç±»å‹çš„ï¼Œä½†è¿™æ ·çš„æ›¿æ¢æ“ä½œæ˜¯åˆæ³•çš„ï¼Œå¹¶ä¸ä¼šæœ‰é”™è¯¯æˆ–è­¦å‘Šï¼Œåƒè¿™æ ·ä½¿ç”¨æ´¾ç”Ÿç±»å¼•ç”¨æ›¿æ¢æˆåŸºç±»å¼•ç”¨çš„æ“ä½œç§°ä¸ºå‘ä¸Šè½¬æ¢(Upcasting)ã€‚å› ä¸ºEmployeeç±»ç»§æ‰¿äº†Personç±»çš„æ‰€æœ‰æ•°æ®ï¼Œæ‰€ä»¥å¯¹p1å¯¹è±¡è¿›è¡Œçš„ä»»ä½•æ“ä½œï¼Œéƒ½é€‚ç”¨äºe1å¯¹è±¡ï¼Œè€Œä¸ä¼šå¯¼è‡´ä»»ä½•é—®é¢˜ã€‚å‘ä¸Šè½¬æ¢æ˜¯å¯ä¼ é€’çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæœ‰ä¸€ä¸ªç±»ç»§æ‰¿äº†Employeeç±»ï¼Œè¯¥ç±»çš„å¯¹è±¡ä¹Ÿå¯ä»¥æ›¿æ¢p1å¯¹è±¡ï¼Œå› ä¸ºè¯¥ç±»ä¹Ÿé—´æ¥åœ°ç»§æ‰¿äº†Personç±»ã€‚\nå‘ä¸‹è½¬æ¢ ***å‘ä¸‹è½¬æ¢(Downcasting)***å’Œå‘ä¸Šè½¬æ¢ç›¸åï¼Œå³åŸºç±»çš„å¼•ç”¨æ›¿æ¢æ´¾ç”Ÿç±»çš„å¼•ç”¨ï¼š\nPerson p2 = new Person(); Employee e2 = new Employee(); e2 = (Employee)p2;//å‘ä¸‹è½¬æ¢ ä¸Šè¿°ä»£ç æ¼”ç¤ºäº†å‘ä¸‹è½¬æ¢ï¼Œå‘ä¸‹è½¬æ¢æ˜¯å¼ºåˆ¶è½¬æ¢ï¼Œä»£ç ä¸­ä½¿ç”¨æ‹¬å·æ¥è¿›è¡Œå¼ºåˆ¶è½¬æ¢ï¼Œè¿™ä¸ªæ“ä½œé€šå¸¸æ¥è¯´æ˜¯ä¸å…è®¸çš„ã€‚ä¸€ä¸ªæ´¾ç”Ÿç±»å¯ä»¥åœ¨åŸºç±»çš„åŸºç¡€ä¸Šæ´¾ç”Ÿå‡ºæ–°çš„æ•°æ®æˆå‘˜ï¼Œä½†è¿™äº›æˆå‘˜å¹¶ä¸èƒ½é€‚ç”¨äºåŸºç±»å¯¹è±¡ï¼Œä¾‹å¦‚Employeeç±»æœ‰ä¸€å±æ€§ä¸ºCompanyï¼Œè€Œä½¿ç”¨Personç±»å®ä¾‹åŒ–çš„å¯¹è±¡æ˜¯è®¿é—®ä¸åˆ°è¯¥å±æ€§çš„ï¼Œæ‰€ä»¥å‘ä¸‹è½¬æ¢æ˜¯ä¸å®‰å…¨çš„ï¼Œä¸Šè¿°ä»£ç åœ¨è¿è¡Œæ—¶ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯ã€‚\nä½†æœ‰ä¸€ç§æƒ…å†µä¾‹å¤–ï¼Œå¦‚æœè½¬æ¢å¯¹è±¡æ˜¯å‘ä¸Šè½¬æ¢è¿‡æ¥çš„ï¼Œé‚£ä¹ˆå°±ä¸ä¼šæŠ¥è¿è¡Œé”™è¯¯ï¼Œä¾‹å¦‚ï¼š\nPerson e3 = new Employee();//åœ¨å®ä¾‹åŒ–æ—¶è¿›è¡Œå‘ä¸Šè½¬æ¢ Employee e4 = (Employee)e3;//å‘ä¸‹è½¬æ¢ ä»£ç ä¸­çš„e3å¯¹è±¡æœ¬èº«æ˜¯Employeeç±»å‹ï¼Œä½†é€šè¿‡å‘ä¸Šè½¬æ¢æˆäº†Personç±»å‹çš„å¼•ç”¨ï¼Œå‘ä¸Šè½¬æ¢å¹¶ä¸ä¼šæ¸…é™¤æ´¾ç”Ÿç±»ä¸­çš„æ•°æ®æˆå‘˜ï¼Œæ‰€ä»¥å‘ä¸‹è½¬æ¢å›Employeeç±»å‹æ—¶å¹¶ä¸ä¼šæŠ¥é”™ã€‚\nå‘ä¸Šå’Œå‘ä¸‹è½¬æ¢ä¹Ÿé€‚ç”¨äºæŠ½è±¡ç±»å’Œæ¥å£ã€‚\niså’Œaså…³é”®å­—\nåœ¨æœ‰äº›æƒ…å†µï¼Œå‘ä¸‹è½¬æ¢æ“ä½œæ˜¯ä¸å¯é¿å…çš„ã€‚è‹¥è¦è¿›è¡Œå‘ä¸‹å¼ºåˆ¶è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨Cè¯­è¨€é£æ ¼çš„()æ¥å¼ºåˆ¶è½¬æ¢ï¼Œå¦‚e2 = (Employee)p2;ï¼Œè¦æ˜¯p2æ— æ³•è½¬æ¢æˆe2ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æ‰€ä»¥åœ¨å‘ä¸‹è½¬æ¢å‰ï¼Œé€šå¸¸è¦è¿›è¡Œæ£€æŸ¥ã€‚\nC#æä¾›iså…³é”®å­—åˆ¤æ–­å¯¹è±¡ç±»å‹ï¼Œå¹¶è¿”å›trueæˆ–falseï¼Œåœ¨è½¬æ¢å‰ä½¿ç”¨isè¿›è¡Œåˆ¤æ–­ï¼š\n//æ£€æŸ¥p2çš„ç±»å‹æ˜¯å¦æ˜¯`Employee` if(p2 is Employee) { e2 = (Employee)p2; ... } C#è¿˜æä¾›äº†aså…³é”®å­—æ¥è¿›è¡Œå‘ä¸‹è½¬æ¢ï¼Œå’Œ()çš„ä¸åŒæ˜¯ï¼Œä½¿ç”¨asè½¬æ¢å¤±è´¥å¹¶ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è¿”å›nullï¼š\ne2 = p2 as Employee;//ä½¿ç”¨aså…³é”®å­—è¿›è¡Œè½¬æ¢ï¼Œå¦‚æœå¤±è´¥åˆ™ä¼šè¿”å›null if(e2 == null) ...//è½¬æ¢å¤±è´¥ else ...è½¬æ¢æˆåŠŸ æ›¿æ¢å¸¦æ¥çš„å¤šæ€æ€§\nåœ¨å¯¹è±¡å‘ä¸Šè½¬æ¢è¿‡åï¼Œå¦‚æœè°ƒç”¨çš„æ–¹æ³•è¢«è½¬æ¢å‰çš„ç±»å‹é‡å†™è¿‡ï¼Œåˆ™ä¼šè°ƒç”¨é‡å†™åçš„æ–¹æ³•ï¼š\nShape t1 = new Triangle(); Shape r1 = new Rectangle(); Console.WriteLine(t1.Area()); Console.WriteLine(r1.Area()); ä»£ç ä¸­ä½¿ç”¨Triangleç±»å‹å’ŒRectangleç±»å‹å®ä¾‹åŒ–å‡ºs1å’Œr1å¯¹è±¡ï¼Œå¹¶ä¸Šè½¬å‹æˆShapeç±»å‹ï¼Œå› ä¸ºä¸¤ä¸ªç±»å‹éƒ½é‡å†™äº†åŸºç±»çš„Areaæ–¹æ³•ï¼Œåœ¨è°ƒç”¨ä¸¤ä¸ªå¯¹è±¡çš„Areaæ–¹æ³•æ—¶ï¼Œå°†ä¼šå„è‡ªè°ƒç”¨è½¬æ¢å‰ç±»å‹è°ƒç”¨é‡å†™åçš„æ–¹æ³•ï¼Œå³ä½¿å®ƒä»¬è½¬æ¢æˆäº†Shapeç±»å‹ã€‚\næ›¿æ¢æ“ä½œçœ‹èµ·æ¥ä¼šå¯¼è‡´æ–¹æ³•è°ƒç”¨çš„æ··ä¹±ï¼Œä½†è¿™æ ·å…¶å®å¾ˆå¥½åœ°è¿ç”¨äº†ç±»çš„å¤šæ€æ€§ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™æåˆ°ï¼š\n\u0026ldquo;å¦‚æœSæ˜¯Tçš„å­ç±»å‹ï¼Œå¯¹äºSç±»å‹çš„ä»»æ„å¯¹è±¡ï¼Œå¦‚æœå°†ä»–ä»¬çœ‹ä½œæ˜¯Tç±»å‹çš„å¯¹è±¡ï¼Œåˆ™å¯¹è±¡çš„è¡Œä¸ºä¹Ÿç†åº”ä¸æœŸæœ›çš„è¡Œä¸ºä¸€è‡´ã€‚\u0026rdquo;\næ›¿æ¢æ“ä½œå¯¹ç±»çš„é€šç”¨æ€§æå‡æ˜¯å·¨å¤§çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å¯¹ä¸€ç»„ç»§æ‰¿è‡ªåŒä¸€ä¸ªç±»å‹çš„å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå®ƒä»¬å°†è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼š\nobject[] data = { 100, \u0026#34;Alice\u0026#34;, 0.98f, Math.PI, DateTime.Now }; foreach (var obj in data) { Console.WriteLine(obj); } ä¸Šè¿°ä»£ç ä½¿ç”¨äº†å¤šä¸ªä¸åŒç±»å‹çš„å¯¹è±¡åˆå§‹åŒ–ä¸€ä¸ªobjectç±»å‹çš„æ•°ç»„ï¼Œåœ¨å¾ªç¯ä¸­ï¼ŒConsole.WriteLineæ–¹æ³•æ¥æ”¶ä¸€ä¸ªobjectç±»å‹å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å¯¹è±¡çš„ToStringæ–¹æ³•ï¼Œå› ä¸ºæ•°ç»„ä¸­å¯¹è±¡çš„ç±»å‹éƒ½å„è‡ªé‡å†™äº†ToStringæ–¹æ³•ï¼Œå®ƒä»¬çš„è¾“å‡ºå°†ä¼šè¡¨ç°å‡ºä¸åŒçš„æ•ˆæœã€‚\nå¤šæ€æ€§çš„å¥½å¤„ # å¢å¼ºäº†ä»£ç çš„é€šç”¨æ€§å’Œç®€æ´æ€§ï¼Œå› ä¸ºå¤šæ€å…è®¸ä¸åŒçš„å¯¹è±¡æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä½†è°ƒç”¨çš„æ–¹æ³•å´æ˜¯åŒä¸€ä¸ªï¼Œè¿™æ„å‘³ç€ç¨‹åºå‘˜ä¸éœ€è¦å†™å¤šä¸ªä¸“é—¨é’ˆå¯¹ä¸åŒå¯¹è±¡ç±»å‹çš„æ–¹æ³•ã€‚ å¢å¼ºäº†ä»£ç çš„å¯æ‰©å±•æ€§ï¼Œå½“åœ¨ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„ç¨‹åºä¸­æ·»åŠ æ–°çš„å¯¹è±¡ç±»å‹ï¼Œåªéœ€è¦é€‰æ‹©è¦ç»§æ‰¿çš„ç±»ï¼Œå®ç°éœ€è¦çš„æ¥å£å³å¯ï¼Œä¸éœ€è¦èŠ±è´¹å¤§é‡çš„äº‹ä»¶æ€è€ƒç±»ä¸­æœ‰å“ªäº›æˆå‘˜ã€‚ é¢å‘å¯¹è±¡äº”å¤§åŸåˆ™ï¼ˆSOLIDåŸåˆ™ï¼‰ # å•ä¸€èŒè´£åŸåˆ™ï¼ŒSingle Responsibility Principle (SRP) # \u0026ldquo;æ¯ä¸ªæ¨¡å—éƒ½åªæœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ã€‚\u0026rdquo;\nå³ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸçš„èŒè´£ã€‚å•ä¸€èŒè´£åŸåˆ™æ˜¯å®ç°é«˜å†…èšä½è€¦åˆçš„å…³é”®ï¼Œä¸è¦æŠŠå¤ªå¤šçš„åŠŸèƒ½å°è£…åˆ°ç±»ä¸­ï¼Œå¦åˆ™å°†ä¼šå¢åŠ è€¦åˆåº¦ï¼Œå¤§å¤§é™ä½å¯ç»´æŠ¤æ€§ã€‚\nå•ä¸€èŒè´£æ˜¯ç¨‹åºè®¾è®¡é˜¶æ®µæ—¶åˆ’åˆ†ç±»çš„ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œåªæœ‰å…¨é¢äº†è§£ç¨‹åºçš„åŠŸèƒ½ï¼Œæ‰èƒ½å¾ˆå¥½åœ°åˆ†ç¦»èŒè´£ã€‚\nå¼€é—­åŸåˆ™ï¼ŒOpen/Closed Principle # â€œå¼€â€æŒ‡å¯¹æ‰©å±•å¼€æ”¾ï¼Œâ€œé—­â€æŒ‡å¯¹ä¿®æ”¹å…³é—­ã€‚\nç¼–å†™æ¨¡å—æ—¶åº”å½“å°½é‡è®¾è®¡å‡ºä¸éœ€è¦ä¿®æ”¹çš„æ¨¡å—ï¼Œåœ¨æ‰©å±•æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œåªéœ€è¦ç¼–å†™æ–°çš„ä»£ç è€Œæ— éœ€ä¿®æ”¹æ—§çš„ä»£ç ã€‚\næ»¡è¶³å¼€é—­åŸåˆ™å¯ä»¥æœ€å¤§åŒ–æ¨¡å—çš„å¤ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚\nä¸€äº›è®¾è®¡æ¨¡å¼å¾ˆå¥½åœ°å®ç°äº†å¼€é—­åŸåˆ™ï¼šå¦‚é¢å‘æ¥å£ç¼–ç¨‹(Interface Based Programming)ï¼Œå°†åŠŸèƒ½æŠ½è±¡æˆç¨³å®šçš„æ¥å£ï¼Œåœ¨æ‰©å±•ä»£ç æ—¶æ·»åŠ æ¥å£å’Œå®ç°æ–¹æ³•å³å¯ã€‚æˆ–æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)ï¼Œå°†æ¨¡å—åˆ†ä¸ºå¤šä¸ªå±‚ï¼Œä½¿ç”¨äº‹ä»¶å›è°ƒç­‰æ–¹æ³•åœ¨å±‚ç›´æ¥æ³¨å…¥å¤„ç†çš„ä»£ç ï¼Œåœ¨æ·»åŠ åŠŸèƒ½æ—¶åªéœ€åœ¨éœ€è¦çš„å±‚ä¸­æ·»åŠ ä»£ç å³å¯ã€‚\né‡Œæ°æ›¿æ¢åŸåˆ™ï¼ŒLiskov Substitution Principle (LSP) # \u0026ldquo;å¦‚æœSæ˜¯Tçš„å­ç±»å‹ï¼Œå¯¹äºSç±»å‹çš„ä»»æ„å¯¹è±¡ï¼Œå¦‚æœå°†ä»–ä»¬çœ‹ä½œæ˜¯Tç±»å‹çš„å¯¹è±¡ï¼Œåˆ™å¯¹è±¡çš„è¡Œä¸ºä¹Ÿç†åº”ä¸æœŸæœ›çš„è¡Œä¸ºä¸€è‡´ã€‚\u0026rdquo;\næ¢å¥è¯è¯´ï¼Œæ´¾ç”Ÿç±»å¿…é¡»å¯ä»¥æ›¿æ¢å…¶åŸºç±»ã€‚\nä»€ä¹ˆå«â€œä¸æœŸæœ›çš„è¡Œä¸ºä¸€è‡´â€?\nâ€œåœ¨ä¸äº†è§£æ´¾ç”Ÿç±»çš„æƒ…å†µä¸‹ï¼Œä»…é€šè¿‡æ¥å£æˆ–åŸºç±»çš„æ–¹æ³•ï¼Œå³å¯æ¸…æ¥šçš„çŸ¥é“æ–¹æ³•çš„è¡Œä¸ºï¼Œè€Œä¸ç®¡å“ªç§æ´¾ç”Ÿç±»çš„å®ç°ï¼Œéƒ½ä¸æ¥å£æˆ–åŸºç±»æ–¹æ³•çš„æœŸæœ›è¡Œä¸ºä¸€è‡´ã€‚æˆ–è€…è¯´æ¥å£æˆ–åŸºç±»çš„æ–¹æ³•æ˜¯ä¸€ç§å¥‘çº¦ï¼Œä½¿ç”¨æ–¹æŒ‰ç…§è¿™ä¸ªå¥‘çº¦æ¥ä½¿ç”¨ï¼Œæ´¾ç”Ÿç±»ä¹ŸæŒ‰ç…§è¿™ä¸ªå¥‘çº¦æ¥å®ç°ã€‚è¿™å°±æ˜¯ä¸æœŸæœ›è¡Œä¸ºä¸€è‡´çš„æ›¿æ¢ã€‚â€\nåœ¨è¿ç”¨ç±»çš„å¤šæ€æ€§æ—¶ï¼Œä¸åº”å½“è¿èƒŒé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ–¹æ³•æ—¶ï¼Œåº”å½“ä¿è¯æ¯ä¸ªæ´¾ç”Ÿç±»é‡å†™æ–¹æ³•çš„æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå³â€œä¸æœŸæœ›çš„è¡Œä¸ºä¸€è‡´â€ã€‚\nä¾‹å¦‚Triangleç±»å’ŒRectangleç±»éƒ½é‡å†™äº†Shapeç±»çš„Areaæ–¹æ³•ï¼Œå®ƒä»¬éƒ½åº”å½“ä¿è¯é‡å†™åèƒ½æ­£ç¡®è¿”å›å›¾å½¢çš„é¢ç§¯ï¼Œè€Œä¸æ˜¯è¿”å›å‘¨é•¿ã€‚\næ¥å£éš”ç¦»åŸåˆ™ï¼ŒInterface Segregation Principle (ISP) # \u0026ldquo;å®¢æˆ·ç«¯åªä¾èµ–äºå®ƒæ‰€éœ€è¦çš„æ¥å£ï¼›å®ƒéœ€è¦ä»€ä¹ˆæ¥å£å°±æä¾›ä»€ä¹ˆæ¥å£ï¼ŒæŠŠä¸éœ€è¦çš„æ¥å£å‰”é™¤æ‰ã€‚\u0026rdquo;\næ¥å£ä¸åº”è¿‡äºè‡ƒè‚¿ï¼Œå°½é‡ç»†åŒ–æ¥å£ï¼Œå‡å°‘æ¥å£ä¸­æ–¹æ³•çš„æ•°é‡ï¼Œé™ä½ç±»å¯¹å•ä¸ªæ¥å£çš„ä¾èµ–æ€§ã€‚\næ¥å£è¶Šå¤§ï¼Œå®ƒè¶Šæœ‰å¯èƒ½åŒ…å«å¹¶éæ‰€æœ‰å®ç°ç±»éƒ½èƒ½ä½¿ç”¨çš„åˆ°çš„æ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªç±»å’ŒæŸä¸ªæ¥å£æ²¡æœ‰ä¸€è‡´çš„ç›®çš„ï¼Œé‚£å°±ä¸è¦å®ç°é‚£ä¸ªæ¥å£ã€‚\nä¾èµ–å€’ç½®åŸåˆ™ï¼ŒDependency Inversion Principle (DIP) # \u0026ldquo;é«˜çº§æ¨¡å—/ç±»ä¸åº”å½“ä¾èµ–äºä½çº§çš„æ¨¡å—/ç±»ï¼Œé¦–å…ˆä¸¤è€…éƒ½åº”å½“ä¾èµ–äºå…¶æŠ½è±¡ã€‚å…¶æ¬¡ï¼ŒæŠ½è±¡ä¸åº”å½“ä¾èµ–äºå®ç°ã€‚æœ€åï¼Œå®ç°åº”å½“å–å†³äºæŠ½è±¡ã€‚\nè¯´äººè¯å°±æ˜¯ï¼Œå½“ä¸¤ä¸ªæ¨¡å—/ç±»æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œé¦–å…ˆå®ƒä»¬éƒ½åº”å½“ç»§æ‰¿è‡ªæŸä¸ªç±»æˆ–å®ç°æŸä¸ªæ¥å£ã€‚ç„¶åï¼Œåœ¨å¯¹ä¸€ä¸ªæ´¾ç”Ÿç¨‹åº¦è¾ƒä½çš„ç±»è¿›è¡Œè®¾è®¡æ—¶ï¼Œä¸åº”å½“ä¾èµ–äºä¸€ä¸ªæ´¾ç”Ÿç¨‹åº¦è¾ƒé«˜çš„ç±»ï¼Œåº”è¯¥ä½¿ç”¨å…¶åŸºç±»æˆ–æ˜¯æ¥å£ç­‰æ´¾ç”Ÿç¨‹åº¦è¾ƒä½çš„ç±»è¿›è¡Œä¾èµ–ã€‚\nå½“ä¸€ä¸ªç±»ä¾èµ–äºå¦ä¸€ä¸ªç±»çš„ä¸€ä¸ªæ˜ç¡®çš„å®ç°æ—¶ï¼Œå¦‚æœä¾èµ–ç±»çš„å®ç°æ”¹å˜äº†ï¼Œå½“å‰ç±»å¯èƒ½ä¼šè¢«ç ´åã€‚å› æ­¤ï¼Œåœ¨å¯¹ä¸€ä¸ªåŠŸèƒ½è¿›è¡Œä¾èµ–æ—¶ï¼Œåº”å½“é¢å‘æŠ½è±¡ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å®ç°ã€‚\næ€»ç»“ # é¢å‘å¯¹è±¡ä¸ºç¼–ç¨‹æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æ€è·¯ï¼Œéµå¾ªSOLIDåŸåˆ™å¯ä»¥æ„å»ºä¸€ä¸ªä»£ç æ•´æ´ï¼Œå¯è¯»æ€§é«˜ï¼Œä¸”æ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºï¼Œä½†è¿‡äºè¿½æ±‚è¿™äº›ç¹æ–‡ç¼›èŠ‚å¯èƒ½ä¼šå¤§å¹…å¢åŠ ä»£ç é‡ã€‚è§„åˆ™æ˜¯æ­»çš„äººæ˜¯æ´»çš„ï¼Œåœ¨è¿›è¡Œç¼–ç¨‹æ—¶å¿…é¡»æƒè¡¡è¿™äº›è§„åˆ™å¸¦æ¥çš„ä»£ç è´¨é‡å’Œä»£ç æ•°é‡ï¼Œæ¯•ç«Ÿï¼Œ20è¡Œä»£ç å¯æ¯”200è¡Œä»£ç è¦å°‘å¾—å¤šã€‚\nå‚è€ƒå†…å®¹\nç±»ç»§æ‰¿ï¼šStephen Prata. C++ Primer Plus.\nC#é¢å‘å¯¹è±¡ï¼š\rhttps://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/tutorials/oop\nC#æ¥å£ï¼š\rhttps://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/interface\nC#é»˜è®¤æ¥å£æ–¹æ³•ï¼š\rhttps://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/proposals/csharp-8.0/default-interface-methods SOLIDåŸåˆ™ï¼š\rhttps://www.c-sharpcorner.com/UploadFile/damubetha/solid-principles-in-C-Sharp/\né‡Œæ°æ›¿æ¢åŸåˆ™ï¼š\rhttps://zhuanlan.zhihu.com/p/268574641\n","date":"2023å¹´3æœˆ17æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BC%96%E7%A8%8B-csharp/","section":"Posts","summary":"","title":"é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼ˆC#ï¼‰"},{"content":"\r.NET è¡¨è¾¾å¼æ ‘ # .NET Expressionè¡¨è¾¾å¼æ ‘å°†ä»£ç æŠ½è±¡æˆäº†ä¸€é¢—å¯¹è±¡æ ‘ï¼Œæ ‘ä¸Šçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªä»£ç è¡¨è¾¾å¼ï¼Œå®ƒçš„æ„é€ ç±»ä¼¼ç¼–è¯‘åŸç†ä¸­çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚\nå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼è¿›è¡Œå£°æ˜è¡¨è¾¾å¼æ ‘ï¼Œç¼–è¯‘å™¨å°†ä¼šè‡ªåŠ¨è½¬æ¢ï¼Œä½†æ˜¯è¯¥lambdaè¡¨è¾¾å¼ä¸èƒ½æ˜¯è¯­å¥ï¼ˆå³è¡¨è¾¾å¼åªèƒ½æœ‰ä¸€å¥ï¼Œä¸èƒ½ç”¨{}ç»„æˆå¤šå¥ï¼‰ã€‚\nè¡¨è¾¾å¼æ ‘å¯ä»¥è½¬æ¢ä¸ºå§”æ‰˜ï¼Œåœ¨ä¸€äº›linqåœºæ™¯å¯ä»¥é€šè¿‡æ„å»ºè¡¨è¾¾å¼æ ‘æ¥åŠ¨æ€æ‹¼æ¥ä¸€äº›linqæŸ¥è¯¢æ¡ä»¶ã€‚\nè¡¨è¾¾å¼æ ‘å…¥é—¨ # ä¸€ä¸ªè¡¨è¾¾å¼æ ‘æ˜¯ç±»ä¼¼ä»¥ä¸‹çš„ç»“æ„\nè¡¨è¾¾å¼C\r| +-----+-----+\r| |\rè¡¨è¾¾å¼A è¡¨è¾¾å¼B æ¯”å¦‚ç®€å•çš„lambdaè¡¨è¾¾å¼x =\u0026gt; x + 1å¯ä»¥ç”¨è½¬åŒ–ä¸ºä»¥ä¸‹è¡¨è¾¾å¼\nx + 1\r|\r+---+---+\r| |\rx 1 å…¶ä¸­å¶å­èŠ‚ç‚¹xä¸ºå˜é‡è¡¨è¾¾å¼ï¼Œå¶å­èŠ‚ç‚¹1ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œx+1èŠ‚ç‚¹ä¸ºäºŒå‰è¡¨è¾¾å¼ï¼Œä½¿ç”¨äº†+è¿ç®—ç¬¦\nåœ¨C#ä¸­ï¼Œè¡¨è¾¾å¼æ ‘å¯ä»¥é€šè¿‡ExpressionåŠå…¶æ´¾ç”Ÿç±»çš„å„ç§æ–¹æ³•æ‰‹åŠ¨æ„å»ºï¼ŒExressionç±»å¸¸ç”¨çš„é™æ€æ–¹æ³•å¦‚ä¸‹ï¼š\nExpression.Constant() åˆ›å»ºä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ã€‚ Expression.Variable() åˆ›å»ºä¸€ä¸ªå˜é‡è¡¨è¾¾å¼ã€‚ Expression.New() åˆ›å»ºä¸€ä¸ªå®ä¾‹åŒ–è¡¨è¾¾å¼ã€‚ Expression.Assaign() åˆ›å»ºä¸€ä¸ªèµ‹å€¼è¡¨è¾¾å¼ã€‚ Expression.Equal() åˆ›å»ºä¸€ä¸ªç›¸ç­‰æ¯”è¾ƒè¡¨è¾¾å¼ã€‚ Expression.Call() åˆ›å»ºä¸€ä¸ªæ–¹æ³•è°ƒç”¨è¡¨è¾¾å¼ã€‚ Expression.Condition() åˆ›å»ºä¸€ä¸ªåˆ†æ”¯é€»è¾‘è¡¨è¾¾å¼ã€‚ Expression.Loop() åˆ›å»ºä¸€ä¸ªå¾ªç¯é€»è¾‘è¡¨è¾¾å¼ã€‚ Expression.Add()/Subtract()/Multiply()/Divide() åŠ /å‡/ä¹˜/é™¤è¡¨è¾¾å¼\n\u0026hellip; ä½¿ç”¨C#ä»£ç æ„é€ ç®€å•çš„è¡¨è¾¾å¼æ ‘ # x =\u0026gt; x + 1\npublic static void Example1() { var param1 = Expression.Variable(typeof(int), \u0026#34;x\u0026#34;);//å£°æ˜å˜é‡è¡¨è¾¾å¼ï¼Œç±»å‹ä¸ºintï¼Œå‚æ•°åä¸º\u0026#34;x\u0026#34; var const1 = Expression.Constant(1);//å¸¸é‡è¡¨è¾¾å¼ var biExpr = Expression.Add(param1, const1);//å£°æ˜è¿›è¡ŒåŠ æ³•è¿ç®—çš„äºŒå‰è¡¨è¾¾å¼ï¼Œå·¦èŠ‚ç‚¹ä¸ºx,å³èŠ‚ç‚¹ä¸º1 //x =\u0026gt; x + 1è¡¨è¾¾å¼æ ‘å°±æ„æˆäº† //ä½¿ç”¨Expression.Lambdaæ–¹æ³•å¯ä»¥å°†è¡¨è¾¾å¼æ ‘è½¬æ¢ä¸ºlambdaè¡¨è¾¾å¼æ ‘ï¼Œåœ¨ç±»å‹å‚æ•°ä¸­å¯ä»¥æŒ‡å®šè½¬æ¢çš„å§”æ‰˜ç±»å‹ var lambdaExpr = Expression.Lambda\u0026lt;Func\u0026lt;int, int\u0026gt;\u0026gt;(biExpr, param1);//lambdaè¾“å…¥å‚æ•°ä¸ºxå˜é‡ //ä½¿ç”¨LambdaExpression.Compileæ–¹æ³•å°†è½¬æ¢å¥½çš„lambdaè¡¨è¾¾å¼æ ‘ç¼–è¯‘æˆå§”æ‰˜ Func\u0026lt;int,int\u0026gt; func = lambdaExpr.Compile(); //è°ƒç”¨ç¼–è¯‘å‡ºçš„å§”æ‰˜ Console.WriteLine(func(5)); } æ›´å¤æ‚ä¸€äº›çš„è¡¨è¾¾å¼æ ‘ # (a,b,c) =\u0026gt; (a + b + c) / 3\npublic static void Example2() { var param1 = Expression.Variable(typeof(int), \u0026#34;a\u0026#34;); var param2 = Expression.Variable(typeof(int), \u0026#34;b\u0026#34;); var param3 = Expression.Variable(typeof(int), \u0026#34;c\u0026#34;); var const1 = Expression.Constant(3.0f,typeof(float)); var biExpr1 = Expression.Add(param1, param2);//æ„é€ å‚æ•°1ï¼Œ2ï¼Œç”ŸæˆåŠ æ³•è¡¨è¾¾å¼æ ‘1 var biExpr2 = Expression.Add(biExpr1, param3);//æ„é€ åŠ æ³•è¡¨è¾¾å¼æ ‘1å’Œå‚æ•°3ï¼Œç”ŸæˆåŠ æ³•è¡¨è¾¾å¼æ ‘2 var biExpr3 = Expression.Convert(biExpr2, typeof(float));//ä¸¤æ•´å½¢ç›¸é™¤ä¸ä¼šä¿ç•™å°æ•°ï¼Œè½¬åŒ–ä¸ºæµ®ç‚¹å‹ var biExpr4 = Expression.Divide(biExpr3, const1);//æ„é€ åŠ æ³•è¡¨è¾¾å¼æ ‘2å’Œå¸¸é‡è¡¨è¾¾å¼1ï¼Œç”Ÿæˆé™¤æ³•è¡¨è¾¾å¼æ ‘3 var lambdaExpr = Expression.Lambda\u0026lt;Func\u0026lt;int,int,int,float\u0026gt;\u0026gt;(biExpr4, param1,param2,param3);//æ ¹æ®è¡¨è¾¾å¼æ ‘3å’Œä¸‰ä¸ªå‚æ•°ï¼Œå°†è¡¨è¾¾å¼æ ‘è½¬æ¢ä¸ºlambdaè¡¨è¾¾å¼æ ‘ var func = lambdaExpr.Compile(); Console.WriteLine(func(2, 3, 3)); } æ–¹æ³•è°ƒç”¨è¡¨è¾¾å¼ # (str,value) =\u0026gt; !string.IsNullOrWhiteSpace(str) \u0026amp;\u0026amp; str.Contains(value)\npublic static void Example3() { var param1 = Expression.Variable(typeof(string), \u0026#34;str\u0026#34;); var param2 = Expression.Variable(typeof(string), \u0026#34;value\u0026#34;); //ä½¿ç”¨åå°„è·å–é™æ€æ–¹æ³•ï¼Œå¹¶ä¸å‚æ•°è¡¨è¾¾å¼æ„é€ æˆæ–¹æ³•è°ƒç”¨è¡¨è¾¾å¼ var callExpr1 = Expression.Not(Expression.Call(typeof(string).GetMethod(nameof(string.IsNullOrWhiteSpace), new Type[]{typeof(string)})!, param2)); //ä½¿ç”¨åå°„è·å–å®ä¾‹æ–¹æ³•ï¼Œå®ä¾‹æ–¹æ³•éœ€è¦æŒ‡å®šè°ƒç”¨å®ä¾‹çš„è¡¨è¾¾å¼ var callExpr2 = Expression.Call(param1, typeof(string).GetMethod(nameof(string.Contains), new[] {typeof(string)} )!, param2); var biExpr1 = Expression.AndAlso(callExpr1, callExpr2);//ä¸è¿ç®— var lambdaExpr = Expression.Lambda\u0026lt;Func\u0026lt;string,string,bool\u0026gt;\u0026gt;(biExpr1, param1,param2); var func = lambdaExpr.Compile(); Console.WriteLine(func(\u0026#34;Azusa\u0026#34;, \u0026#34;s\u0026#34;)); } ä¸€äº›å®é™…çš„åº”ç”¨ # /// \u0026lt;summary\u0026gt; /// æ¨æ–­å®ä½“å±æ€§çš„ç‰¹æ€§å’Œåç§°ï¼Œå¹¶æ ¹æ®æœç´¢å…³é”®å­—æ„å»ºè¿‡æ»¤å™¨è¡¨è¾¾å¼æ ‘ /// æ³¨æ„ï¼Œåå°„æ¨æ–­æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;keyword\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; private static Expression\u0026lt;Func\u0026lt;TEntity, bool\u0026gt;\u0026gt; BuildKeywordSearchExpression(string keyword) { //è·å–å®ä½“ç±»æ‰€æœ‰å…¬ç”¨|å®ä¾‹å±æ€§ var propInfos = typeof(TEntity).GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.GetProperty); //è·å–æ‰€æœ‰å…·æœ‰SearchKeywordAttributeç‰¹æ€§çš„å±æ€§ï¼Œä½œä¸ºç›®æ ‡å±æ€§ var targetProps = propInfos.Where(info =\u0026gt; info.GetCustomAttribute\u0026lt;SearchKeywordAttribute\u0026gt;() is not null); //å¦‚æœæ²¡æœ‰ä»»ä½•å±æ€§å¸¦SearchKeywordAttributeåˆ™æŒ‰ç…§å±æ€§ååŒ¹é…ï¼Œå¦‚æœç¬¦åˆ\u0026#34;name\u0026#34;æˆ–æ˜¯\u0026#34;title\u0026#34;æˆ–æ˜¯\u0026#34;content\u0026#34;ï¼Œé‚£å°±ä½œä¸ºç›®æ ‡å±æ€§ if (!targetProps.Any()) targetProps = propInfos.Where(info =\u0026gt; info.Name.ToUpper() is \u0026#34;NAME\u0026#34; or \u0026#34;TITLE\u0026#34; or \u0026#34;CONTENT\u0026#34;); //æ²¡æœ‰ä»»ä½•å±æ€§èƒ½å¤ŸåŒ¹é…åˆ™å¼‚å¸¸ if (!targetProps.Any()) throw new ServerErrorException(\u0026#34;æ²¡æœ‰ä»»ä½•èƒ½å¤Ÿè¿›è¡Œè¿‡æ»¤æŸ¥è¯¢çš„å±æ€§ï¼Œè¯·åœ¨å±æ€§ä¸Šæ·»åŠ [SearchKeywordAttribute]å¯ç”¨è¿‡æ»¤\u0026#34;); //æ£€æŸ¥å±æ€§æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ç±»å‹ if (!targetProps.All(info =\u0026gt; info.PropertyType == typeof(string))) throw new ServerErrorException(\u0026#34;è¿‡æ»¤å±æ€§å¿…é¡»æ˜¯å­—ç¬¦ä¸²\u0026#34;); //æ„å»º e =\u0026gt; (e.Name || Title || Content || [property with attribute]).Contain(keyword) è¡¨è¾¾å¼æ ‘ //å‚æ•°eè¡¨è¾¾å¼ var entityExpr = Expression.Parameter(typeof(TEntity),\u0026#34;entity\u0026#34;); //å¸¸é‡å…³é”®è¯è¡¨è¾¾å¼ var keywordExpr = Expression.Constant(keyword); //æ‰€æœ‰ç›®æ ‡å±æ€§çš„è¡¨è¾¾å¼ var propExprs = targetProps.Select(info =\u0026gt; Expression.Property(entityExpr,info)).ToArray(); //æ‰€æœ‰çš„å±æ€§è°ƒç”¨.Contain(keyword)å¹¶ä¸”è¿›è¡Œæˆ–è¿ç®— var firstProp = propExprs.First(); Expression resultExpr = Expression.Call(firstProp, typeof(string).GetMethod(nameof(string.Contains), new[] { typeof(string) })!, keywordExpr); for (int i = 1; i \u0026lt; propExprs.Length; i++) { var containsExpr = Expression.Call(propExprs[i], typeof(string).GetMethod(nameof(string.Contains), new[] { typeof(string) })!, keywordExpr); resultExpr = Expression.Or(resultExpr,containsExpr); } //æ„é€ æˆå§”æ‰˜ var lambda = Expression.Lambda\u0026lt;Func\u0026lt;TEntity, bool\u0026gt;\u0026gt;(resultExpr, entityExpr); Console.WriteLine(lambda.ToString()); return lambda; } ä¸Šè¿°ä»£ç æ ¹æ®æ‰€ç»™çš„å…³é”®è¯ï¼Œä½¿ç”¨åå°„æœç´¢ç±»å‹å‚æ•°ä¸­çš„TEntityç±»å‹çš„å±æ€§ï¼Œæ¢æµ‹å¸¦æœ‰SearchKeywordAttributeç‰¹æ€§æˆ–æ˜¯åä¸º\u0026quot;Name\u0026quot;,\u0026quot;Title\u0026ldquo;æˆ–æ˜¯\u0026rdquo;Content\u0026ldquo;çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨å®ƒä»¬æ„é€ ä¸€ä¸ªç”¨äºå¤šä¸ªå±æ€§æ¨¡ç³ŠæŸ¥è¯¢çš„è¡¨è¾¾å¼æ ‘ï¼Œè¿”å›ä¸€ä¸ªExpression\u0026lt;Func\u0026lt;TEntity,bool\u0026gt;\u0026gt;è¡¨è¾¾å¼å§”æ‰˜ã€‚\nè¿™æ ·çš„ä¸€ä¸ªè¡¨è¾¾å¼å¯ä»¥è‡ªåŠ¨åœ°è¯†åˆ«æŸä¸ªå®ä½“ç±»çš„å±æ€§ï¼Œå¹¶ä¸”æ ¹æ®è¿™äº›å±æ€§é€šè¿‡Linqå¯¹IQuerableè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š\npublic class Post : IEntity\u0026lt;Guid\u0026gt;,IHasCreationTime,IHasModificationTime { public Guid Id { get; set; } [SearchKeyword] public string Title { get; set; } [SearchKeyword] public string Markdown { get; set; } public Guid? CategoryId { get; set; } public Category? Category { get; set; } public ICollection\u0026lt;Tag\u0026gt; Tags { get; set; } public DateTime CreationTime { get; set; } public DateTime? LastModificationTime { get; set; } private Post() { }//EFCore public Post(string title, string markdown = \u0026#34;\u0026#34;, Category? category = null, ICollection\u0026lt;Tag\u0026gt;? tags = null) { Id = SequentialGuidGenerator.Create(); Title = title; Markdown = markdown; Category = category; Tags = tags ?? new List\u0026lt;Tag\u0026gt;(); } } public Task\u0026lt;List\u0026lt;Post\u0026gt;\u0026gt; SearchAsync(string keyword) { return dbContext.Posts.Where(BuildKeywordSearchExpression(keyword)).ToListAsync(); } æ–¹æ³•ä¸­å°†æ ¹æ®å®ä½“å±æ€§ä¸Šçš„ç‰¹æ€§è‡ªåŠ¨ç”Ÿæˆ post =\u0026gt; post.Title.Contains(keyword) || post.Markdown.Contains(keyword) è¡¨è¾¾å¼ï¼Œå¹¶é€šè¿‡IQuerableå’ŒEFCoreç”ŸæˆSQLè¯­å¥å¯¹å®ä½“è¿›è¡ŒæŸ¥è¯¢ã€‚\ninfo: 2023/4/24 23:30:37.812 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand (22ms) [Parameters=[], CommandType=\u0026#39;Text\u0026#39;, CommandTimeout=\u0026#39;30\u0026#39;] SELECT [t].[Id], [t].[CategoryId], [t].[CreationTime], [t].[LastModificationTime], [t].[Markdown], [t].[Title] FROM [T_Posts] AS [t] WHERE (CASE WHEN [t].[Title] LIKE N\u0026#39;%net%\u0026#39; THEN CAST(1 AS bit) ELSE CAST(0 AS bit) END | CASE WHEN [t].[Markdown] LIKE N\u0026#39;%net%\u0026#39; THEN CAST(1 AS bit) ELSE CAST(0 AS bit) END) = CAST(1 AS bit) å‚è€ƒæ–‡ç« \nhttps://masuit.com/1795?t=vou0ts7ora4g#%CE%BB%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A0%91%E7%9A%84%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95 https://cloud.tencent.com/developer/article/1817790 ","date":"2023å¹´3æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/net-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A0%91%E5%85%A5%E9%97%A8/","section":"Posts","summary":"","title":".NET è¡¨è¾¾å¼æ ‘å…¥é—¨"},{"content":"","date":"2023å¹´3æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/linq/","section":"Tags","summary":"","title":"Linq"},{"content":"","date":"2023å¹´3æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/asp-.net-core/","section":"Tags","summary":"","title":"ASP .NET Core"},{"content":"","date":"2023å¹´3æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/swagger/","section":"Tags","summary":"","title":"Swagger"},{"content":"","date":"2023å¹´3æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/web-api/","section":"Tags","summary":"","title":"Web API"},{"content":"\rSwaggeræ–‡æ¡£ # åœ¨ASP .NET Coreé¡¹ç›®ä¸­é…ç½®SwaggeræœåŠ¡ï¼Œåœ¨Swaggeré¡µé¢çš„æ¥å£ä¸­æ˜¾ç¤ºC#ä»£ç çš„æ³¨é‡Šã€‚\nSwaggerä¸Šçš„æ³¨é‡Š\rå¾®è½¯å®˜æ–¹æ–‡æ¡£\nå…ˆå†³æ¡ä»¶ï¼š é¡¹ç›®éœ€è¦åœ¨Nugetä¸­å®‰è£…Swashbuckle.AspNetCoreåŒ…ï¼ˆä¸€èˆ¬ä¼šåœ¨ASP .NET Coreé¡¹ç›®åˆ›å»ºæ—¶è‡ªåŠ¨å®‰è£…ï¼‰\nç”Ÿæˆå¹¶å¯¼å‡ºXMLæ–‡æ¡£ # é¦–å…ˆéœ€è¦ç”Ÿæˆé¡¹ç›®çš„XMLæ–‡æ¡£ã€‚ä»¥ Visual Studio ä¸ºä¾‹ï¼Œåœ¨é¡¹ç›®å±æ€§-è¾“å‡ºä¸­å‹¾é€‰â€œç”ŸæˆåŒ…å«APIæ–‡æ¡£çš„æ–‡ä»¶â€ï¼Œå¹¶æŒ‡å®šè¾“å‡ºç›®å½•ï¼š\nVSä¸­ç”ŸæˆXMLæ–‡æ¡£\ræ¥ç€ç”Ÿæˆé¡¹ç›®ï¼Œä¼šåœ¨æŒ‡å®šç›®å½•ä¸‹è¾“å‡ºXMLæ–‡æ¡£ï¼š\nè¾“å‡ºçš„XMLæ–‡æ¡£\ré…ç½®SwaggeræœåŠ¡ # åœ¨ StartUp ä¸­é…ç½®æœåŠ¡\nprogram.cs\n//å®‰è£…NugetåŒ…åå³å¯ä½¿ç”¨AddSwaggerGenæ–¹æ³•æ·»åŠ SwaggeræœåŠ¡ services.AddSwaggerGen(options =\u0026gt; { //å®šä¹‰Swaggeræ–‡æ¡£ï¼Œå¯å¤šæ¬¡å®šä¹‰ä»¥åŒºåˆ†ç‰ˆæœ¬ //æ­¤æ—¶å®šä¹‰çš„æ–‡æ¡£åä¸ºv1 options.SwaggerDoc(\u0026#34;v1\u0026#34;, new OpenApiInfo() { //æ·»åŠ ä¸€äº›APIä¿¡æ¯ï¼Œå°†ä¼šå‘ˆç°åœ¨Swaggeré¡µé¢ä¸Š Version = \u0026#34;v1\u0026#34;, Title = \u0026#34;ç”¨æˆ·ä¿¡æ¯æ§åˆ¶å™¨\u0026#34;, }); //æŒ‡å®šXMLæ–‡æ¡£çš„ç›®å½• options.IncludeXmlComments($\u0026#34;{Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)}\\\\{Assembly.GetExecutingAssembly().GetName().Name}.xml\u0026#34;, true); ... }); é…ç½®Swaggerä¸­é—´ä»¶ # åœ¨ASP .NET Coreå…¥å£å‡½æ•°ä¸­é…ç½®ä¸­é—´ä»¶\nprogram.cs\n... var app = builder.Build(); //æ­¤æ—¶åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰ä¼šæ·»åŠ Swaggerä¸­é—´ä»¶ if (app.Environment.IsDevelopment()) { //æ·»åŠ Swaggerä¸­é—´ä»¶ app.UseSwagger(); //æ·»åŠ SwaggerUIä¸­é—´ä»¶ï¼Œåœ¨å‚æ•°ä¸­æŒ‡å®šSwaggerç»ˆç»“ç‚¹ï¼Œç»ˆç»“ç‚¹é”™è¯¯å°†ä¼šå¯¼è‡´æ¥å£æ— æ³•æ­£å¸¸æ˜¾ç¤º //æ­¤æ—¶ä½¿ç”¨ç»ˆç»“ç‚¹æ˜¯æ­¥éª¤2ä¸­å£°æ˜çš„åä¸º\u0026#34;v1\u0026#34;æ–‡æ¡£ï¼Œå¦‚æœå®šä¹‰äº†å¤šä¸ªæ–‡æ¡£ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦æŒ‡å®šå¤šä¸ªç»ˆç»“ç‚¹ app.UseSwaggerUI(c =\u0026gt; c.SwaggerEndpoint(\u0026#34;/swagger/v1/swagger.json\u0026#34;, \u0026#34;Gehenna.WebAPI v1\u0026#34;)); } å¦‚æœä½¿ç”¨IIS æˆ–åå‘ä»£ç†çš„è·¯å¾„ï¼Œè¯·ä½¿ç”¨ ./ å‰ç¼€å°† Swagger ç»ˆç»“ç‚¹è®¾ç½®ä¸ºç›¸å¯¹è·¯å¾„ã€‚ ä¾‹å¦‚ ./swagger/v1/swagger.jsonã€‚\nä½¿ç”¨ /swagger/v1/swagger.json æŒ‡ç¤ºåº”ç”¨åœ¨ URL çš„çœŸå®æ ¹ç›®å½•ä¸­æŸ¥æ‰¾ JSON æ–‡ä»¶ï¼ˆå¦‚æœä½¿ç”¨ï¼ŒåŠ ä¸Šè·¯ç”±å‰ç¼€ï¼‰ã€‚ä¾‹å¦‚ï¼Œè¯·ä½¿ç”¨ https://localhost:\u0026lt;port\u0026gt;/\u0026lt;route_prefix\u0026gt;/swagger/v1/swagger.json è€Œä¸æ˜¯ https://localhost:\u0026lt;port\u0026gt;/\u0026lt;virtual_directory\u0026gt;/\u0026lt;route_prefix\u0026gt;/swagger/v1/swagger.jsonã€‚\né…ç½®å®Œæˆ # åœ¨APIæ§åˆ¶å™¨ç±»æˆ–ç»ˆç»“ç‚¹æ–¹æ³•ä¸Šæ·»åŠ XMLæ³¨é‡Šã€‚\nç»™æ§åˆ¶å™¨ä¸Šæ·»åŠ æ³¨é‡Š\rç»™æ§åˆ¶å™¨æ“ä½œæ–¹æ³•æ·»åŠ æ³¨é‡Š\ré…ç½®å®Œæˆåï¼Œè®¿é—®https://localhost:\u0026lt;port\u0026gt;/\u0026lt;route_prefix\u0026gt;/swagger/index.htmlé¡µé¢ä¸Šå³å¯è¿›å…¥Swaggerç•Œé¢ã€‚\né¡µé¢çš„æ ‡é¢˜æ–‡å­—å°†æ˜¾ç¤ºé…ç½®SwaggeræœåŠ¡æ—¶æä¾›çš„æ•°æ®ã€‚\nSwaggeré¡µé¢æ ‡é¢˜\ré¡µé¢å³ä¸Šæ–¹çš„ä¸‹æ‹‰æ¡†å¯ä»¥é€‰æ‹©åœ¨æ­¥éª¤2/3ä¸­å®šä¹‰çš„Swaggerçš„ç‰ˆæœ¬\nSwaggerç‰ˆæœ¬\ré¡µé¢ä¸­å°†ä¼šæ˜¾ç¤ºæ§åˆ¶å™¨ï¼ŒAPIç»ˆç»“ç‚¹æ–¹æ³•çš„æ³¨é‡Š æ¥å£æ³¨é‡Š\rå¦‚æœç»™æ–¹æ³•å‚æ•°æ·»åŠ äº†æ³¨é‡Šï¼ŒSwaggerä¹Ÿä¼šæ˜¾ç¤ºå‡ºæ¥ æ–¹æ³•å‚æ•°çš„æ³¨é‡Š\rå¦‚æœè¯·æ±‚/å“åº”çš„æ•°æ®æ¨¡å‹æœ‰æ·»åŠ æ³¨é‡Šï¼Œç‚¹å‡»schemeæ˜¾ç¤º è¯·æ±‚/å“åº”æ¨¡å‹æ³¨é‡Š\råœ¨ä½¿ç”¨æ³›å‹ä½œä¸ºAPIå“åº”æ•°æ®æ¨¡å‹æ—¶æ˜¾ç¤ºæ³¨é‡Š # //å¾…è¡¥å……\nå‚è€ƒæ–‡ç« ï¼šhttps://learn.microsoft.com/zh-cn/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-7.0\u0026amp;tabs=visual-studio\n","date":"2023å¹´3æœˆ15æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E5%9C%A8asp-.net-core%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AEswagger%E6%96%87%E6%A1%A3/","section":"Posts","summary":"","title":"åœ¨ASP .NET Coreé¡¹ç›®é…ç½®Swaggeræ–‡æ¡£"},{"content":"","date":"2023å¹´3æœˆ11æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/javascript/","section":"Tags","summary":"","title":"Javascript"},{"content":"","date":"2023å¹´3æœˆ11æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/signalr/","section":"Tags","summary":"","title":"SignalR"},{"content":"","date":"2023å¹´3æœˆ11æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/tags/websocket/","section":"Tags","summary":"","title":"Websocket"},{"content":"åœ¨ä½¿ç”¨SignalRå‘.NETåç«¯è¿›è¡Œå®æ—¶é€šä¿¡æ—¶ï¼Œæ—¶å¸¸ä¼šä½¿ç”¨ AccessToken è¿›è¡Œç”¨æˆ·æˆæƒã€‚æä¾›ç”¨æˆ·è®¤è¯å¯ä»¥æé«˜åç«¯æ¥å£çš„å®‰å…¨æ€§ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨SignalRçš„ç”¨æˆ·è®¤è¯æœºåˆ¶æ¥å‘æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰SignalRè¿æ¥å‘é€æ¶ˆæ¯ã€‚\nåç«¯ç”¨æˆ·æˆæƒæœåŠ¡ # åœ¨ ASP.NET Core ä¸­æ·»åŠ æˆæƒæœºåˆ¶ï¼š # Program.cs ... services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme) //æ­¤å¤„ä½¿ç”¨JWTBearerè¿›è¡ŒæˆæƒéªŒè¯ .AddJwtBearer(options =\u0026gt; { var secretKey = configurations.GetRequiredSection(\u0026#34;Jwt\u0026#34;).Get\u0026lt;JwtOption\u0026gt;().SecretKey??throw new ConfigurationErrorsException(\u0026#34;Jwtå¯†é’¥æœªé…ç½®\u0026#34;); options.TokenValidationParameters = new() { ValidateIssuer = false, ValidateAudience = false, ValidateLifetime = true, ValidateIssuerSigningKey = true, IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(secretKey)), }; }); ... //æ·»åŠ è®¤è¯æœºåˆ¶éœ€è¦å¼•ç”¨Authenticationä¸Authorizationä¸¤ä¸ªä¸­é—´ä»¶ app.UseAuthentication(); app.UseAuthorization(); ... åœ¨SignalRé›†çº¿å™¨ç±»ä¸Šæ·»åŠ Authorizeç‰¹æ€§ # è¯¦ç»†çš„æˆæƒä¿¡æ¯ä¸ä¸åŒçš„æˆæƒè§„åˆ™å‚è€ƒ\rASP.NET Coreæˆæƒ\n//æ·»åŠ æˆæƒ [Authorize] public class ChatHub : Hub { public override async Task OnConnectedAsync() { await base.OnConnectedAsync(); //åœ¨Hubç±»çš„Context.Userå±æ€§ä¸­å¯ä»¥è·å–åˆ°SignalRé€šè¿‡websocketæ¡æ‰‹è·å–åˆ°çš„ç”¨æˆ·æˆæƒä¿¡æ¯ await Console.Out.WriteLineAsync(Context.User.Identity.Name); } ... } è¿™æ ·å°±ä¸ºASP .NET Coreæä¾›äº†åŸºæœ¬çš„ç”¨æˆ·æˆæƒæœºåˆ¶ï¼Œåœ¨åº”ç”¨çš„ç»ˆç»“ç‚¹(endPoints)ä¸Šæ·»åŠ [Autorize]ç‰¹æ€§æ¥å¯¹æ­¤ç»ˆç»“ç‚¹è¿›è¡Œç”¨æˆ·æˆæƒã€‚\nåœ¨å®¢æˆ·ç«¯é…ç½®SignalRè¿æ¥çš„è®¿é—®ä»¤ç‰Œ # C#å®¢æˆ·ç«¯ # ... _connection = new HubConnectionBuilder() .WithAutomaticReconnect() //åœ¨WithUrlæ–¹æ³•çš„configureHttpConnectionå‚æ•°ä¸­é…ç½® .WithUrl(HubUrl, options =\u0026gt; { //ä¸ºAccessTokenProvideræä¾›è·å–è®¿é—®ä»¤ç‰Œçš„å§”æ‰˜ //æ­¤å¤„ä¸ºåº”å½“æŸ¥æ‰¾å¹¶è·å–ç”¨æˆ·è®¿é—®ä»¤ç‰Œçš„é€»è¾‘ options.AccessTokenProvider = () =\u0026gt; Task.FromResult(authorizationToken); }); .ConfigureLogging(builder =\u0026gt; builder.AddConsole()) .Build(); await _connection.StartAsync(); ... Javascriptå®¢æˆ·ç«¯ # ... this.hubConnection = new signalR.HubConnectionBuilder() .withUrl(\u0026#34;this.hubUrl\u0026#34;,{ //ä¸ºwithUrlæ–¹æ³•å‚æ•°2çš„accessTokenFactoryå±æ€§æä¾›è·å–è®¿é—®ä»¤ç‰Œçš„æ–¹æ³• accessTokenFactory: () =\u0026gt; this.getAccessToken(), skipNegotiation: true, transport: signalR.HttpTransportType.WebSockets }) .build(); await this.hubConnection.start(); ... è¸©å‘æ³¨æ„ # åœ¨Javascriptå®¢æˆ·ç«¯ï¼Œå³ä½¿é…ç½®äº†è®¿é—®ä»¤ç‰Œï¼Œåœ¨å¯¹åç«¯SignalRé›†çº¿å™¨è¿›è¡Œè®¿é—®æ—¶æœåŠ¡å™¨ä»ç„¶ä¼šå“åº” 401 Unauthorized æˆ–æ˜¯å®¢æˆ·ç«¯æŠ›å‡º SignalR Error: Failed to complete negotiation with the server å¼‚å¸¸ï¼Œè‹¥æ’é™¤äº†Javascriptå®¢æˆ·ç«¯é…ç½®é—®é¢˜æˆ–æ˜¯CORSè·¨åŸŸè®¿é—®é—®é¢˜ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯å› ä¸ºJavascript websocket APIä¸æ”¯æŒè®¾ç½®è¯·æ±‚æŠ¥æ–‡å¤´çš„åŸå› ã€‚\nå®¢æˆ·ç«¯ä½¿ç”¨HTTPåè®®å‘æœåŠ¡å™¨è¿›è¡Œè®¿é—®ä»¤ç‰ŒéªŒè¯å¸¸ç”¨çš„æ–¹å¼æ˜¯åœ¨æŠ¥æ–‡å¤´ä¸­æ·»åŠ  Authorization æ ‡å¤´ï¼Œå¹¶æä¾›è®¿é—®ä»¤ç‰Œå­—ç¬¦ä¸²ã€‚ è¯·æ±‚æ ‡å¤´ä¸­çš„Authorizationé¡¹\råœ¨SignalRè¿›è¡ŒWebsocketè¿æ¥å‰ä¼šè¿›è¡Œåå•†(negotiation)ï¼Œè‹¥å®¢æˆ·ç«¯åœ¨å»ºç«‹SignalRè¿æ¥æ—¶é…ç½®äº†è®¿é—®ä»¤ç‰Œï¼Œåˆ™ä¼šåœ¨è¯·æ±‚æ—¶é™„å¸¦ä¸Šè®¿é—®ä»¤ç‰Œã€‚\nä½†åœ¨SignalR Javascriptå®¢æˆ·ç«¯è¿›è¡Œåå•†æ—¶ï¼Œè®¿é—®ä»¤ç‰Œå¹¶ä¸æ˜¯æ·»åŠ åœ¨æŠ¥æ–‡å¤´ä¸­ï¼Œè€Œæ˜¯ä»¥æŸ¥è¯¢å­—ç¬¦ä¸²çš„å½¢å¼å‘é€è¯·æ±‚ã€‚ è®¿é—®ä»¤ç‰Œæ”¾åœ¨äº†æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­\rASP.NET Coreå¹¶ä¸ä¼šè‡ªåŠ¨å¯¹æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„è®¿é—®ä»¤ç‰Œè¿›è¡Œæˆæƒï¼Œæ‰€ä»¥æ­¤æ—¶æœåŠ¡å™¨å°†ä¼šè¿”å› 401 Unauthorized ï¼Œè€ŒJavascriptå®¢æˆ·ç«¯ä¼šæŠ›å‡º SignalR Error: Failed to complete negotiation with the server (æ— æ³•å®Œæˆä¸æœåŠ¡å™¨çš„åå•†ï¼‰ å¼‚å¸¸ã€‚\nè§£å†³æ–¹æ³•ï¼š # åœ¨æœåŠ¡å™¨ç«¯é…ç½®æˆæƒæœºåˆ¶ï¼Œåœ¨æ”¶åˆ°è¯·æ±‚æ¶ˆæ¯æ—¶æ‰‹åŠ¨è¿›è¡Œæˆæƒå¤„ç†ã€‚é…ç½®çš„æ–¹å¼æœ‰å¤šç§ï¼Œè¾ƒä¸ºç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥åœ¨AuthorizationæœåŠ¡ä¸­æ·»åŠ äº‹ä»¶ï¼š\nprogram.cs ... services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme) //ä½¿ç”¨JwtBearerä½œä¸ºè®¤è¯ä»¤ç‰Œ .AddJwtBearer(options =\u0026gt; { var secretKey = configurations.GetRequiredSection(\u0026#34;Jwt\u0026#34;).Get\u0026lt;JwtOption\u0026gt;().SecretKey??throw new ConfigurationErrorsException(\u0026#34;Jwtå¯†é’¥æœªé…ç½®\u0026#34;); options.TokenValidationParameters = new() { ValidateIssuer = false, ValidateAudience = false, ValidateLifetime = true, ValidateIssuerSigningKey = true, IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(secretKey)), }; //æ·»åŠ æˆæƒäº‹ä»¶ï¼Œåœ¨æ”¶åˆ°è¯·æ±‚æ¶ˆæ¯æ—¶è¿›è¡Œå¤„ç† options.Events = new JwtBearerEvents() { OnMessageReceived = context =\u0026gt; { //ä»è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­å–å‡ºè®¿é—®ä»¤ç‰Œ var accessToken = context.Request.Query[\u0026#34;access_token\u0026#34;]; //è¯·æ±‚æ¡ä»¶ä¸ç¬¦åˆåˆ™è¿”å› if (!string.IsNullOrEmpty(accessToken) \u0026amp;\u0026amp; context.Request.Headers[\u0026#34;Upgrade\u0026#34;] == \u0026#34;websocket\u0026#34;) { //æ‰‹åŠ¨å¯¹ä¸Šä¸‹æ–‡ä¸­çš„ä»¤ç‰Œå±æ€§èµ‹å€¼ï¼Œå‰©ä¸‹çš„æˆæƒç”±.NETè‡ªåŠ¨å®Œæˆ context.Token = accessToken; } return Task.CompletedTask; } }; }); ... å‚è€ƒæ–‡ç« \nhttps://stackoverflow.com/questions/21260384/signalr-authenticating-with-access-token#comment32085907_21260384\n","date":"2023å¹´3æœˆ11æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/%E4%B8%BAsignalr%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/","section":"Posts","summary":"","title":"ä¸ºSignalRçš„è¿æ¥é…ç½®ç”¨æˆ·è®¤è¯"},{"content":"\ræµ‹è¯•å¸–å­ # ä½¿ç”¨Hugoè¶…å¿«é€Ÿå»ºç«™\nHugoé¦–é¡µ\nhugo new site Azusa\u0026rsquo;s Archive\n","date":"2023å¹´3æœˆ10æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/posts/hellow-world/hello-world/","section":"Posts","summary":"","title":"Hello World"},{"content":"","date":"0001å¹´1æœˆ 1æ—¥","permalink":"/Hugo-Blog-Blowfish-Theme/authors/","section":"Authors","summary":"","title":"Authors"}]